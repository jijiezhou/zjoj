{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ColorDecorationInjectedTextMarker } from './colorDetector.js';\nimport { ColorHoverParticipant } from './colorHoverParticipant.js';\nimport { ModesHoverController } from '../../hover/browser/hover.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nexport class ColorContribution extends Disposable {\n  constructor(_editor) {\n    super();\n    this._editor = _editor;\n    this._register(_editor.onMouseDown(e => this.onMouseDown(e)));\n  }\n  dispose() {\n    super.dispose();\n  }\n  onMouseDown(mouseEvent) {\n    const colorDecoratorsActivatedOn = this._editor.getOption(146 /* EditorOption.colorDecoratorsActivatedOn */);\n    if (colorDecoratorsActivatedOn !== 'click' && colorDecoratorsActivatedOn !== 'clickAndHover') {\n      return;\n    }\n    const target = mouseEvent.target;\n    if (target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n      return;\n    }\n    if (!target.detail.injectedText) {\n      return;\n    }\n    if (target.detail.injectedText.options.attachedData !== ColorDecorationInjectedTextMarker) {\n      return;\n    }\n    if (!target.range) {\n      return;\n    }\n    const hoverController = this._editor.getContribution(ModesHoverController.ID);\n    if (!hoverController) {\n      return;\n    }\n    if (!hoverController.isColorPickerVisible) {\n      const range = new Range(target.range.startLineNumber, target.range.startColumn + 1, target.range.endLineNumber, target.range.endColumn + 1);\n      hoverController.showContentHover(range, 1 /* HoverStartMode.Immediate */, 0 /* HoverStartSource.Mouse */, false, true);\n    }\n  }\n}\nColorContribution.ID = 'editor.contrib.colorContribution'; // ms\nregisterEditorContribution(ColorContribution.ID, ColorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nHoverParticipantRegistry.register(ColorHoverParticipant);","map":{"version":3,"names":["Disposable","registerEditorContribution","Range","ColorDecorationInjectedTextMarker","ColorHoverParticipant","ModesHoverController","HoverParticipantRegistry","ColorContribution","constructor","_editor","_register","onMouseDown","e","dispose","mouseEvent","colorDecoratorsActivatedOn","getOption","target","type","detail","injectedText","options","attachedData","range","hoverController","getContribution","ID","isColorPickerVisible","startLineNumber","startColumn","endLineNumber","endColumn","showContentHover","register"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorContributions.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ColorDecorationInjectedTextMarker } from './colorDetector.js';\nimport { ColorHoverParticipant } from './colorHoverParticipant.js';\nimport { ModesHoverController } from '../../hover/browser/hover.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nexport class ColorContribution extends Disposable {\n    constructor(_editor) {\n        super();\n        this._editor = _editor;\n        this._register(_editor.onMouseDown((e) => this.onMouseDown(e)));\n    }\n    dispose() {\n        super.dispose();\n    }\n    onMouseDown(mouseEvent) {\n        const colorDecoratorsActivatedOn = this._editor.getOption(146 /* EditorOption.colorDecoratorsActivatedOn */);\n        if (colorDecoratorsActivatedOn !== 'click' && colorDecoratorsActivatedOn !== 'clickAndHover') {\n            return;\n        }\n        const target = mouseEvent.target;\n        if (target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return;\n        }\n        if (!target.detail.injectedText) {\n            return;\n        }\n        if (target.detail.injectedText.options.attachedData !== ColorDecorationInjectedTextMarker) {\n            return;\n        }\n        if (!target.range) {\n            return;\n        }\n        const hoverController = this._editor.getContribution(ModesHoverController.ID);\n        if (!hoverController) {\n            return;\n        }\n        if (!hoverController.isColorPickerVisible) {\n            const range = new Range(target.range.startLineNumber, target.range.startColumn + 1, target.range.endLineNumber, target.range.endColumn + 1);\n            hoverController.showContentHover(range, 1 /* HoverStartMode.Immediate */, 0 /* HoverStartSource.Mouse */, false, true);\n        }\n    }\n}\nColorContribution.ID = 'editor.contrib.colorContribution'; // ms\nregisterEditorContribution(ColorContribution.ID, ColorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nHoverParticipantRegistry.register(ColorHoverParticipant);\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAASA,UAAU,QAAQ,sCAAsC;AACjE,SAASC,0BAA0B,QAAQ,sCAAsC;AACjF,SAASC,KAAK,QAAQ,+BAA+B;AACrD,SAASC,iCAAiC,QAAQ,oBAAoB;AACtE,SAASC,qBAAqB,QAAQ,4BAA4B;AAClE,SAASC,oBAAoB,QAAQ,8BAA8B;AACnE,SAASC,wBAAwB,QAAQ,mCAAmC;AAC5E,OAAO,MAAMC,iBAAiB,SAASP,UAAU,CAAC;EAC9CQ,WAAWA,CAACC,OAAO,EAAE;IACjB,KAAK,CAAC,CAAC;IACP,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,SAAS,CAACD,OAAO,CAACE,WAAW,CAAEC,CAAC,IAAK,IAAI,CAACD,WAAW,CAACC,CAAC,CAAC,CAAC,CAAC;EACnE;EACAC,OAAOA,CAAA,EAAG;IACN,KAAK,CAACA,OAAO,CAAC,CAAC;EACnB;EACAF,WAAWA,CAACG,UAAU,EAAE;IACpB,MAAMC,0BAA0B,GAAG,IAAI,CAACN,OAAO,CAACO,SAAS,CAAC,GAAG,CAAC,6CAA6C,CAAC;IAC5G,IAAID,0BAA0B,KAAK,OAAO,IAAIA,0BAA0B,KAAK,eAAe,EAAE;MAC1F;IACJ;IACA,MAAME,MAAM,GAAGH,UAAU,CAACG,MAAM;IAChC,IAAIA,MAAM,CAACC,IAAI,KAAK,CAAC,CAAC,oCAAoC;MACtD;IACJ;IACA,IAAI,CAACD,MAAM,CAACE,MAAM,CAACC,YAAY,EAAE;MAC7B;IACJ;IACA,IAAIH,MAAM,CAACE,MAAM,CAACC,YAAY,CAACC,OAAO,CAACC,YAAY,KAAKnB,iCAAiC,EAAE;MACvF;IACJ;IACA,IAAI,CAACc,MAAM,CAACM,KAAK,EAAE;MACf;IACJ;IACA,MAAMC,eAAe,GAAG,IAAI,CAACf,OAAO,CAACgB,eAAe,CAACpB,oBAAoB,CAACqB,EAAE,CAAC;IAC7E,IAAI,CAACF,eAAe,EAAE;MAClB;IACJ;IACA,IAAI,CAACA,eAAe,CAACG,oBAAoB,EAAE;MACvC,MAAMJ,KAAK,GAAG,IAAIrB,KAAK,CAACe,MAAM,CAACM,KAAK,CAACK,eAAe,EAAEX,MAAM,CAACM,KAAK,CAACM,WAAW,GAAG,CAAC,EAAEZ,MAAM,CAACM,KAAK,CAACO,aAAa,EAAEb,MAAM,CAACM,KAAK,CAACQ,SAAS,GAAG,CAAC,CAAC;MAC3IP,eAAe,CAACQ,gBAAgB,CAACT,KAAK,EAAE,CAAC,CAAC,gCAAgC,CAAC,CAAC,8BAA8B,KAAK,EAAE,IAAI,CAAC;IAC1H;EACJ;AACJ;AACAhB,iBAAiB,CAACmB,EAAE,GAAG,kCAAkC,CAAC,CAAC;AAC3DzB,0BAA0B,CAACM,iBAAiB,CAACmB,EAAE,EAAEnB,iBAAiB,EAAE,CAAC,CAAC,4DAA4D,CAAC;AACnID,wBAAwB,CAAC2B,QAAQ,CAAC7B,qBAAqB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}