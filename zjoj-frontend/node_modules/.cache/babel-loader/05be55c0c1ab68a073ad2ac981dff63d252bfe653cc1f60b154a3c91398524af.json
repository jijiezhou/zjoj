{"ast":null,"code":"import { createApp, createVNode } from \"vue\";\nlet ellipsisContainer;\nfunction styleToString(style) {\n  const styleNames = Array.prototype.slice.apply(style);\n  return styleNames.map(name => `${name}: ${style.getPropertyValue(name)};`).join(\"\");\n}\nfunction pxToNumber(value) {\n  if (!value) return 0;\n  const match = value.match(/^\\d*(\\.\\d*)?/);\n  return match ? Number(match[0]) : 0;\n}\nvar measure = (originElement, ellipsisConfig, operations, fullText) => {\n  if (!ellipsisContainer) {\n    ellipsisContainer = document.createElement(\"div\");\n    document.body.appendChild(ellipsisContainer);\n  }\n  const {\n    rows,\n    suffix,\n    ellipsisStr\n  } = ellipsisConfig;\n  const originStyle = window.getComputedStyle(originElement);\n  const styleString = styleToString(originStyle);\n  const lineHeight = pxToNumber(originStyle.lineHeight);\n  const maxHeight = Math.round(lineHeight * rows + pxToNumber(originStyle.paddingTop) + pxToNumber(originStyle.paddingBottom));\n  ellipsisContainer.setAttribute(\"style\", styleString);\n  ellipsisContainer.setAttribute(\"aria-hidden\", \"true\");\n  ellipsisContainer.style.height = \"auto\";\n  ellipsisContainer.style.minHeight = \"auto\";\n  ellipsisContainer.style.maxHeight = \"auto\";\n  ellipsisContainer.style.position = \"fixed\";\n  ellipsisContainer.style.left = \"0\";\n  ellipsisContainer.style.top = \"-99999999px\";\n  ellipsisContainer.style.zIndex = \"-200\";\n  ellipsisContainer.style.whiteSpace = \"normal\";\n  const vm = createApp({\n    render() {\n      return createVNode(\"span\", null, [operations]);\n    }\n  });\n  vm.mount(ellipsisContainer);\n  const operationsChildNodes = Array.prototype.slice.apply(ellipsisContainer.childNodes[0].cloneNode(true).childNodes);\n  vm.unmount();\n  ellipsisContainer.innerHTML = \"\";\n  const ellipsisTextNode = document.createTextNode(`${ellipsisStr}${suffix}`);\n  ellipsisContainer.appendChild(ellipsisTextNode);\n  operationsChildNodes.forEach(operationNode => {\n    ellipsisContainer.appendChild(operationNode);\n  });\n  const textNode = document.createTextNode(fullText);\n  ellipsisContainer.insertBefore(textNode, ellipsisTextNode);\n  function inRange() {\n    return ellipsisContainer.offsetHeight <= maxHeight;\n  }\n  if (inRange()) {\n    return {\n      ellipsis: false,\n      text: fullText\n    };\n  }\n  function measureText(textNode2, startLoc = 0, endLoc = fullText.length, lastSuccessLoc = 0) {\n    const midLoc = Math.floor((startLoc + endLoc) / 2);\n    const currentText = fullText.slice(0, midLoc);\n    textNode2.textContent = currentText;\n    if (startLoc >= endLoc - 1) {\n      for (let step = endLoc; step >= startLoc; step -= 1) {\n        const currentStepText = fullText.slice(0, step);\n        textNode2.textContent = currentStepText;\n        if (inRange() || !currentStepText) {\n          return;\n        }\n      }\n    }\n    if (inRange()) {\n      measureText(textNode2, midLoc, endLoc, midLoc);\n    } else {\n      measureText(textNode2, startLoc, midLoc, lastSuccessLoc);\n    }\n  }\n  measureText(textNode);\n  return {\n    text: textNode.textContent,\n    ellipsis: true\n  };\n};\nexport { measure as default };","map":{"version":3,"names":["createApp","createVNode","ellipsisContainer","styleToString","style","styleNames","Array","prototype","slice","apply","map","name","getPropertyValue","join","pxToNumber","value","match","Number","measure","originElement","ellipsisConfig","operations","fullText","document","createElement","body","appendChild","rows","suffix","ellipsisStr","originStyle","window","getComputedStyle","styleString","lineHeight","maxHeight","Math","round","paddingTop","paddingBottom","setAttribute","height","minHeight","position","left","top","zIndex","whiteSpace","vm","render","mount","operationsChildNodes","childNodes","cloneNode","unmount","innerHTML","ellipsisTextNode","createTextNode","forEach","operationNode","textNode","insertBefore","inRange","offsetHeight","ellipsis","text","measureText","textNode2","startLoc","endLoc","length","lastSuccessLoc","midLoc","floor","currentText","textContent","step","currentStepText","default"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/@arco-design/web-vue/es/typography/utils/measure.js"],"sourcesContent":["import { createApp, createVNode } from \"vue\";\nlet ellipsisContainer;\nfunction styleToString(style) {\n  const styleNames = Array.prototype.slice.apply(style);\n  return styleNames.map((name) => `${name}: ${style.getPropertyValue(name)};`).join(\"\");\n}\nfunction pxToNumber(value) {\n  if (!value)\n    return 0;\n  const match = value.match(/^\\d*(\\.\\d*)?/);\n  return match ? Number(match[0]) : 0;\n}\nvar measure = (originElement, ellipsisConfig, operations, fullText) => {\n  if (!ellipsisContainer) {\n    ellipsisContainer = document.createElement(\"div\");\n    document.body.appendChild(ellipsisContainer);\n  }\n  const {\n    rows,\n    suffix,\n    ellipsisStr\n  } = ellipsisConfig;\n  const originStyle = window.getComputedStyle(originElement);\n  const styleString = styleToString(originStyle);\n  const lineHeight = pxToNumber(originStyle.lineHeight);\n  const maxHeight = Math.round(lineHeight * rows + pxToNumber(originStyle.paddingTop) + pxToNumber(originStyle.paddingBottom));\n  ellipsisContainer.setAttribute(\"style\", styleString);\n  ellipsisContainer.setAttribute(\"aria-hidden\", \"true\");\n  ellipsisContainer.style.height = \"auto\";\n  ellipsisContainer.style.minHeight = \"auto\";\n  ellipsisContainer.style.maxHeight = \"auto\";\n  ellipsisContainer.style.position = \"fixed\";\n  ellipsisContainer.style.left = \"0\";\n  ellipsisContainer.style.top = \"-99999999px\";\n  ellipsisContainer.style.zIndex = \"-200\";\n  ellipsisContainer.style.whiteSpace = \"normal\";\n  const vm = createApp({\n    render() {\n      return createVNode(\"span\", null, [operations]);\n    }\n  });\n  vm.mount(ellipsisContainer);\n  const operationsChildNodes = Array.prototype.slice.apply(ellipsisContainer.childNodes[0].cloneNode(true).childNodes);\n  vm.unmount();\n  ellipsisContainer.innerHTML = \"\";\n  const ellipsisTextNode = document.createTextNode(`${ellipsisStr}${suffix}`);\n  ellipsisContainer.appendChild(ellipsisTextNode);\n  operationsChildNodes.forEach((operationNode) => {\n    ellipsisContainer.appendChild(operationNode);\n  });\n  const textNode = document.createTextNode(fullText);\n  ellipsisContainer.insertBefore(textNode, ellipsisTextNode);\n  function inRange() {\n    return ellipsisContainer.offsetHeight <= maxHeight;\n  }\n  if (inRange()) {\n    return {\n      ellipsis: false,\n      text: fullText\n    };\n  }\n  function measureText(textNode2, startLoc = 0, endLoc = fullText.length, lastSuccessLoc = 0) {\n    const midLoc = Math.floor((startLoc + endLoc) / 2);\n    const currentText = fullText.slice(0, midLoc);\n    textNode2.textContent = currentText;\n    if (startLoc >= endLoc - 1) {\n      for (let step = endLoc; step >= startLoc; step -= 1) {\n        const currentStepText = fullText.slice(0, step);\n        textNode2.textContent = currentStepText;\n        if (inRange() || !currentStepText) {\n          return;\n        }\n      }\n    }\n    if (inRange()) {\n      measureText(textNode2, midLoc, endLoc, midLoc);\n    } else {\n      measureText(textNode2, startLoc, midLoc, lastSuccessLoc);\n    }\n  }\n  measureText(textNode);\n  return {\n    text: textNode.textContent,\n    ellipsis: true\n  };\n};\nexport { measure as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}