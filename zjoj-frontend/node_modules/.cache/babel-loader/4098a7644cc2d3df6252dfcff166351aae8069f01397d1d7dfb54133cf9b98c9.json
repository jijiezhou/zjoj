{"ast":null,"code":"import { defineComponent, toRefs, ref, watch, onMounted, onBeforeUnmount, openBlock, createElementBlock, normalizeClass, renderSlot, createTextVNode, toDisplayString, createCommentVNode, createElementVNode, normalizeStyle } from \"vue\";\nimport originDayjs from \"dayjs\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport { getDateString } from \"./utils.js\";\nimport _export_sfc from \"../_virtual/plugin-vue_export-helper.js\";\nconst _sfc_main = defineComponent({\n  name: \"Countdown\",\n  props: {\n    title: String,\n    value: {\n      type: Number,\n      default: () => Date.now() + 3e5\n    },\n    now: {\n      type: Number,\n      default: () => Date.now()\n    },\n    format: {\n      type: String,\n      default: \"HH:mm:ss\"\n    },\n    start: {\n      type: Boolean,\n      default: true\n    },\n    valueStyle: {\n      type: Object\n    }\n  },\n  emits: {\n    finish: () => true\n  },\n  setup(props, {\n    emit\n  }) {\n    const prefixCls = getPrefixCls(\"statistic\");\n    const {\n      start,\n      value,\n      now,\n      format\n    } = toRefs(props);\n    const displayValue = ref(getDateString(Math.max(originDayjs(props.value).diff(originDayjs(props.now), \"millisecond\"), 0), props.format));\n    watch([value, now, format], () => {\n      const _value = getDateString(Math.max(originDayjs(props.value).diff(originDayjs(props.now), \"millisecond\"), 0), props.format);\n      if (_value !== displayValue.value) {\n        displayValue.value = _value;\n      }\n    });\n    const timer = ref(0);\n    const stopTimer = () => {\n      if (timer.value) {\n        window.clearInterval(timer.value);\n        timer.value = 0;\n      }\n    };\n    const startTimer = () => {\n      if (originDayjs(props.value).valueOf() < Date.now()) {\n        return;\n      }\n      timer.value = window.setInterval(() => {\n        const _value = originDayjs(props.value).diff(originDayjs(), \"millisecond\");\n        if (_value <= 0) {\n          stopTimer();\n          emit(\"finish\");\n        }\n        displayValue.value = getDateString(Math.max(_value, 0), props.format);\n      }, 1e3 / 30);\n    };\n    onMounted(() => {\n      if (props.start) {\n        startTimer();\n      }\n    });\n    onBeforeUnmount(() => {\n      stopTimer();\n    });\n    watch(start, value2 => {\n      if (value2 && !timer.value) {\n        startTimer();\n      }\n    });\n    return {\n      prefixCls,\n      displayValue\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: normalizeClass([`${_ctx.prefixCls}`, `${_ctx.prefixCls}-countdown`])\n  }, [_ctx.title || _ctx.$slots.title ? (openBlock(), createElementBlock(\"div\", {\n    key: 0,\n    class: normalizeClass(`${_ctx.prefixCls}-title`)\n  }, [renderSlot(_ctx.$slots, \"title\", {}, () => [createTextVNode(toDisplayString(_ctx.title), 1)])], 2)) : createCommentVNode(\"v-if\", true), createElementVNode(\"div\", {\n    class: normalizeClass(`${_ctx.prefixCls}-content`)\n  }, [createElementVNode(\"div\", {\n    class: normalizeClass(`${_ctx.prefixCls}-value`),\n    style: normalizeStyle(_ctx.valueStyle)\n  }, toDisplayString(_ctx.displayValue), 7)], 2)], 2);\n}\nvar Countdown = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { Countdown as default };","map":{"version":3,"names":["defineComponent","toRefs","ref","watch","onMounted","onBeforeUnmount","openBlock","createElementBlock","normalizeClass","renderSlot","createTextVNode","toDisplayString","createCommentVNode","createElementVNode","normalizeStyle","originDayjs","getPrefixCls","getDateString","_export_sfc","_sfc_main","name","props","title","String","value","type","Number","default","Date","now","format","start","Boolean","valueStyle","Object","emits","finish","setup","emit","prefixCls","displayValue","Math","max","diff","_value","timer","stopTimer","window","clearInterval","startTimer","valueOf","setInterval","value2","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","class","$slots","key","style","Countdown"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/@arco-design/web-vue/es/statistic/countdown.js"],"sourcesContent":["import { defineComponent, toRefs, ref, watch, onMounted, onBeforeUnmount, openBlock, createElementBlock, normalizeClass, renderSlot, createTextVNode, toDisplayString, createCommentVNode, createElementVNode, normalizeStyle } from \"vue\";\nimport originDayjs from \"dayjs\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport { getDateString } from \"./utils.js\";\nimport _export_sfc from \"../_virtual/plugin-vue_export-helper.js\";\nconst _sfc_main = defineComponent({\n  name: \"Countdown\",\n  props: {\n    title: String,\n    value: {\n      type: Number,\n      default: () => Date.now() + 3e5\n    },\n    now: {\n      type: Number,\n      default: () => Date.now()\n    },\n    format: {\n      type: String,\n      default: \"HH:mm:ss\"\n    },\n    start: {\n      type: Boolean,\n      default: true\n    },\n    valueStyle: {\n      type: Object\n    }\n  },\n  emits: {\n    finish: () => true\n  },\n  setup(props, { emit }) {\n    const prefixCls = getPrefixCls(\"statistic\");\n    const { start, value, now, format } = toRefs(props);\n    const displayValue = ref(getDateString(Math.max(originDayjs(props.value).diff(originDayjs(props.now), \"millisecond\"), 0), props.format));\n    watch([value, now, format], () => {\n      const _value = getDateString(Math.max(originDayjs(props.value).diff(originDayjs(props.now), \"millisecond\"), 0), props.format);\n      if (_value !== displayValue.value) {\n        displayValue.value = _value;\n      }\n    });\n    const timer = ref(0);\n    const stopTimer = () => {\n      if (timer.value) {\n        window.clearInterval(timer.value);\n        timer.value = 0;\n      }\n    };\n    const startTimer = () => {\n      if (originDayjs(props.value).valueOf() < Date.now()) {\n        return;\n      }\n      timer.value = window.setInterval(() => {\n        const _value = originDayjs(props.value).diff(originDayjs(), \"millisecond\");\n        if (_value <= 0) {\n          stopTimer();\n          emit(\"finish\");\n        }\n        displayValue.value = getDateString(Math.max(_value, 0), props.format);\n      }, 1e3 / 30);\n    };\n    onMounted(() => {\n      if (props.start) {\n        startTimer();\n      }\n    });\n    onBeforeUnmount(() => {\n      stopTimer();\n    });\n    watch(start, (value2) => {\n      if (value2 && !timer.value) {\n        startTimer();\n      }\n    });\n    return {\n      prefixCls,\n      displayValue\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: normalizeClass([`${_ctx.prefixCls}`, `${_ctx.prefixCls}-countdown`])\n  }, [\n    _ctx.title || _ctx.$slots.title ? (openBlock(), createElementBlock(\"div\", {\n      key: 0,\n      class: normalizeClass(`${_ctx.prefixCls}-title`)\n    }, [\n      renderSlot(_ctx.$slots, \"title\", {}, () => [\n        createTextVNode(toDisplayString(_ctx.title), 1)\n      ])\n    ], 2)) : createCommentVNode(\"v-if\", true),\n    createElementVNode(\"div\", {\n      class: normalizeClass(`${_ctx.prefixCls}-content`)\n    }, [\n      createElementVNode(\"div\", {\n        class: normalizeClass(`${_ctx.prefixCls}-value`),\n        style: normalizeStyle(_ctx.valueStyle)\n      }, toDisplayString(_ctx.displayValue), 7)\n    ], 2)\n  ], 2);\n}\nvar Countdown = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { Countdown as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}