{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class Array2D {\n  constructor(width, height) {\n    this.width = width;\n    this.height = height;\n    this.array = [];\n    this.array = new Array(width * height);\n  }\n  get(x, y) {\n    return this.array[x + y * this.width];\n  }\n  set(x, y, value) {\n    this.array[x + y * this.width] = value;\n  }\n}\nexport function isSpace(charCode) {\n  return charCode === 32 /* CharCode.Space */ || charCode === 9 /* CharCode.Tab */;\n}\nexport class LineRangeFragment {\n  static getKey(chr) {\n    let key = this.chrKeys.get(chr);\n    if (key === undefined) {\n      key = this.chrKeys.size;\n      this.chrKeys.set(chr, key);\n    }\n    return key;\n  }\n  constructor(range, lines, source) {\n    this.range = range;\n    this.lines = lines;\n    this.source = source;\n    this.histogram = [];\n    let counter = 0;\n    for (let i = range.startLineNumber - 1; i < range.endLineNumberExclusive - 1; i++) {\n      const line = lines[i];\n      for (let j = 0; j < line.length; j++) {\n        counter++;\n        const chr = line[j];\n        const key = LineRangeFragment.getKey(chr);\n        this.histogram[key] = (this.histogram[key] || 0) + 1;\n      }\n      counter++;\n      const key = LineRangeFragment.getKey('\\n');\n      this.histogram[key] = (this.histogram[key] || 0) + 1;\n    }\n    this.totalCount = counter;\n  }\n  computeSimilarity(other) {\n    var _a, _b;\n    let sumDifferences = 0;\n    const maxLength = Math.max(this.histogram.length, other.histogram.length);\n    for (let i = 0; i < maxLength; i++) {\n      sumDifferences += Math.abs(((_a = this.histogram[i]) !== null && _a !== void 0 ? _a : 0) - ((_b = other.histogram[i]) !== null && _b !== void 0 ? _b : 0));\n    }\n    return 1 - sumDifferences / (this.totalCount + other.totalCount);\n  }\n}\nLineRangeFragment.chrKeys = new Map();","map":{"version":3,"names":["Array2D","constructor","width","height","array","Array","get","x","y","set","value","isSpace","charCode","LineRangeFragment","getKey","chr","key","chrKeys","undefined","size","range","lines","source","histogram","counter","i","startLineNumber","endLineNumberExclusive","line","j","length","totalCount","computeSimilarity","other","_a","_b","sumDifferences","maxLength","Math","max","abs","Map"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/common/diff/defaultLinesDiffComputer/utils.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class Array2D {\n    constructor(width, height) {\n        this.width = width;\n        this.height = height;\n        this.array = [];\n        this.array = new Array(width * height);\n    }\n    get(x, y) {\n        return this.array[x + y * this.width];\n    }\n    set(x, y, value) {\n        this.array[x + y * this.width] = value;\n    }\n}\nexport function isSpace(charCode) {\n    return charCode === 32 /* CharCode.Space */ || charCode === 9 /* CharCode.Tab */;\n}\nexport class LineRangeFragment {\n    static getKey(chr) {\n        let key = this.chrKeys.get(chr);\n        if (key === undefined) {\n            key = this.chrKeys.size;\n            this.chrKeys.set(chr, key);\n        }\n        return key;\n    }\n    constructor(range, lines, source) {\n        this.range = range;\n        this.lines = lines;\n        this.source = source;\n        this.histogram = [];\n        let counter = 0;\n        for (let i = range.startLineNumber - 1; i < range.endLineNumberExclusive - 1; i++) {\n            const line = lines[i];\n            for (let j = 0; j < line.length; j++) {\n                counter++;\n                const chr = line[j];\n                const key = LineRangeFragment.getKey(chr);\n                this.histogram[key] = (this.histogram[key] || 0) + 1;\n            }\n            counter++;\n            const key = LineRangeFragment.getKey('\\n');\n            this.histogram[key] = (this.histogram[key] || 0) + 1;\n        }\n        this.totalCount = counter;\n    }\n    computeSimilarity(other) {\n        var _a, _b;\n        let sumDifferences = 0;\n        const maxLength = Math.max(this.histogram.length, other.histogram.length);\n        for (let i = 0; i < maxLength; i++) {\n            sumDifferences += Math.abs(((_a = this.histogram[i]) !== null && _a !== void 0 ? _a : 0) - ((_b = other.histogram[i]) !== null && _b !== void 0 ? _b : 0));\n        }\n        return 1 - (sumDifferences / (this.totalCount + other.totalCount));\n    }\n}\nLineRangeFragment.chrKeys = new Map();\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}