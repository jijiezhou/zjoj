{"ast":null,"code":"import { ref } from \"vue\";\nimport { useMutationObserver } from \"./use-mutation-observer.js\";\nconst THEME_TOKEN = \"arco-theme\";\nconst Theme = {\n  Dark: \"dark\",\n  Light: \"light\"\n};\nconst useTheme = callback => {\n  const theme = ref(Theme.Light);\n  const setTheme = value => {\n    theme.value = value;\n  };\n  const getTheme = element => {\n    return element.getAttribute(THEME_TOKEN) === Theme.Dark ? Theme.Dark : Theme.Light;\n  };\n  useMutationObserver(document.body, mutations => {\n    for (const mutation of mutations) {\n      if (mutation.type === \"attributes\" && mutation.attributeName === THEME_TOKEN) {\n        setTheme(getTheme(mutation.target));\n        callback == null ? void 0 : callback();\n        break;\n      }\n    }\n  }, {\n    attributes: true,\n    attributeFilter: [THEME_TOKEN],\n    subtree: false,\n    childList: false,\n    characterData: false\n  });\n  setTheme(getTheme(document.body));\n  return {\n    theme,\n    setTheme\n  };\n};\nexport { useTheme };","map":{"version":3,"names":["ref","useMutationObserver","THEME_TOKEN","Theme","Dark","Light","useTheme","callback","theme","setTheme","value","getTheme","element","getAttribute","document","body","mutations","mutation","type","attributeName","target","attributes","attributeFilter","subtree","childList","characterData"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/@arco-design/web-vue/es/watermark/hooks/use-theme.js"],"sourcesContent":["import { ref } from \"vue\";\nimport { useMutationObserver } from \"./use-mutation-observer.js\";\nconst THEME_TOKEN = \"arco-theme\";\nconst Theme = {\n  Dark: \"dark\",\n  Light: \"light\"\n};\nconst useTheme = (callback) => {\n  const theme = ref(Theme.Light);\n  const setTheme = (value) => {\n    theme.value = value;\n  };\n  const getTheme = (element) => {\n    return element.getAttribute(THEME_TOKEN) === Theme.Dark ? Theme.Dark : Theme.Light;\n  };\n  useMutationObserver(document.body, (mutations) => {\n    for (const mutation of mutations) {\n      if (mutation.type === \"attributes\" && mutation.attributeName === THEME_TOKEN) {\n        setTheme(getTheme(mutation.target));\n        callback == null ? void 0 : callback();\n        break;\n      }\n    }\n  }, {\n    attributes: true,\n    attributeFilter: [THEME_TOKEN],\n    subtree: false,\n    childList: false,\n    characterData: false\n  });\n  setTheme(getTheme(document.body));\n  return {\n    theme,\n    setTheme\n  };\n};\nexport { useTheme };\n"],"mappings":"AAAA,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,mBAAmB,QAAQ,4BAA4B;AAChE,MAAMC,WAAW,GAAG,YAAY;AAChC,MAAMC,KAAK,GAAG;EACZC,IAAI,EAAE,MAAM;EACZC,KAAK,EAAE;AACT,CAAC;AACD,MAAMC,QAAQ,GAAIC,QAAQ,IAAK;EAC7B,MAAMC,KAAK,GAAGR,GAAG,CAACG,KAAK,CAACE,KAAK,CAAC;EAC9B,MAAMI,QAAQ,GAAIC,KAAK,IAAK;IAC1BF,KAAK,CAACE,KAAK,GAAGA,KAAK;EACrB,CAAC;EACD,MAAMC,QAAQ,GAAIC,OAAO,IAAK;IAC5B,OAAOA,OAAO,CAACC,YAAY,CAACX,WAAW,CAAC,KAAKC,KAAK,CAACC,IAAI,GAAGD,KAAK,CAACC,IAAI,GAAGD,KAAK,CAACE,KAAK;EACpF,CAAC;EACDJ,mBAAmB,CAACa,QAAQ,CAACC,IAAI,EAAGC,SAAS,IAAK;IAChD,KAAK,MAAMC,QAAQ,IAAID,SAAS,EAAE;MAChC,IAAIC,QAAQ,CAACC,IAAI,KAAK,YAAY,IAAID,QAAQ,CAACE,aAAa,KAAKjB,WAAW,EAAE;QAC5EO,QAAQ,CAACE,QAAQ,CAACM,QAAQ,CAACG,MAAM,CAAC,CAAC;QACnCb,QAAQ,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAAC,CAAC;QACtC;MACF;IACF;EACF,CAAC,EAAE;IACDc,UAAU,EAAE,IAAI;IAChBC,eAAe,EAAE,CAACpB,WAAW,CAAC;IAC9BqB,OAAO,EAAE,KAAK;IACdC,SAAS,EAAE,KAAK;IAChBC,aAAa,EAAE;EACjB,CAAC,CAAC;EACFhB,QAAQ,CAACE,QAAQ,CAACG,QAAQ,CAACC,IAAI,CAAC,CAAC;EACjC,OAAO;IACLP,KAAK;IACLC;EACF,CAAC;AACH,CAAC;AACD,SAASH,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}