{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class StableEditorScrollState {\n  static capture(editor) {\n    if (editor.getScrollTop() === 0 || editor.hasPendingScrollAnimation()) {\n      // Never mess with the scroll top if the editor is at the top of the file or if there is a pending scroll animation\n      return new StableEditorScrollState(editor.getScrollTop(), editor.getContentHeight(), null, 0, null);\n    }\n    let visiblePosition = null;\n    let visiblePositionScrollDelta = 0;\n    const visibleRanges = editor.getVisibleRanges();\n    if (visibleRanges.length > 0) {\n      visiblePosition = visibleRanges[0].getStartPosition();\n      const visiblePositionScrollTop = editor.getTopForPosition(visiblePosition.lineNumber, visiblePosition.column);\n      visiblePositionScrollDelta = editor.getScrollTop() - visiblePositionScrollTop;\n    }\n    return new StableEditorScrollState(editor.getScrollTop(), editor.getContentHeight(), visiblePosition, visiblePositionScrollDelta, editor.getPosition());\n  }\n  constructor(_initialScrollTop, _initialContentHeight, _visiblePosition, _visiblePositionScrollDelta, _cursorPosition) {\n    this._initialScrollTop = _initialScrollTop;\n    this._initialContentHeight = _initialContentHeight;\n    this._visiblePosition = _visiblePosition;\n    this._visiblePositionScrollDelta = _visiblePositionScrollDelta;\n    this._cursorPosition = _cursorPosition;\n  }\n  restore(editor) {\n    if (this._initialContentHeight === editor.getContentHeight() && this._initialScrollTop === editor.getScrollTop()) {\n      // The editor's content height and scroll top haven't changed, so we don't need to do anything\n      return;\n    }\n    if (this._visiblePosition) {\n      const visiblePositionScrollTop = editor.getTopForPosition(this._visiblePosition.lineNumber, this._visiblePosition.column);\n      editor.setScrollTop(visiblePositionScrollTop + this._visiblePositionScrollDelta);\n    }\n  }\n  restoreRelativeVerticalPositionOfCursor(editor) {\n    if (this._initialContentHeight === editor.getContentHeight() && this._initialScrollTop === editor.getScrollTop()) {\n      // The editor's content height and scroll top haven't changed, so we don't need to do anything\n      return;\n    }\n    const currentCursorPosition = editor.getPosition();\n    if (!this._cursorPosition || !currentCursorPosition) {\n      return;\n    }\n    const offset = editor.getTopForLineNumber(currentCursorPosition.lineNumber) - editor.getTopForLineNumber(this._cursorPosition.lineNumber);\n    editor.setScrollTop(editor.getScrollTop() + offset);\n  }\n}","map":{"version":3,"names":["StableEditorScrollState","capture","editor","getScrollTop","hasPendingScrollAnimation","getContentHeight","visiblePosition","visiblePositionScrollDelta","visibleRanges","getVisibleRanges","length","getStartPosition","visiblePositionScrollTop","getTopForPosition","lineNumber","column","getPosition","constructor","_initialScrollTop","_initialContentHeight","_visiblePosition","_visiblePositionScrollDelta","_cursorPosition","restore","setScrollTop","restoreRelativeVerticalPositionOfCursor","currentCursorPosition","offset","getTopForLineNumber"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/browser/stableEditorScroll.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class StableEditorScrollState {\n    static capture(editor) {\n        if (editor.getScrollTop() === 0 || editor.hasPendingScrollAnimation()) {\n            // Never mess with the scroll top if the editor is at the top of the file or if there is a pending scroll animation\n            return new StableEditorScrollState(editor.getScrollTop(), editor.getContentHeight(), null, 0, null);\n        }\n        let visiblePosition = null;\n        let visiblePositionScrollDelta = 0;\n        const visibleRanges = editor.getVisibleRanges();\n        if (visibleRanges.length > 0) {\n            visiblePosition = visibleRanges[0].getStartPosition();\n            const visiblePositionScrollTop = editor.getTopForPosition(visiblePosition.lineNumber, visiblePosition.column);\n            visiblePositionScrollDelta = editor.getScrollTop() - visiblePositionScrollTop;\n        }\n        return new StableEditorScrollState(editor.getScrollTop(), editor.getContentHeight(), visiblePosition, visiblePositionScrollDelta, editor.getPosition());\n    }\n    constructor(_initialScrollTop, _initialContentHeight, _visiblePosition, _visiblePositionScrollDelta, _cursorPosition) {\n        this._initialScrollTop = _initialScrollTop;\n        this._initialContentHeight = _initialContentHeight;\n        this._visiblePosition = _visiblePosition;\n        this._visiblePositionScrollDelta = _visiblePositionScrollDelta;\n        this._cursorPosition = _cursorPosition;\n    }\n    restore(editor) {\n        if (this._initialContentHeight === editor.getContentHeight() && this._initialScrollTop === editor.getScrollTop()) {\n            // The editor's content height and scroll top haven't changed, so we don't need to do anything\n            return;\n        }\n        if (this._visiblePosition) {\n            const visiblePositionScrollTop = editor.getTopForPosition(this._visiblePosition.lineNumber, this._visiblePosition.column);\n            editor.setScrollTop(visiblePositionScrollTop + this._visiblePositionScrollDelta);\n        }\n    }\n    restoreRelativeVerticalPositionOfCursor(editor) {\n        if (this._initialContentHeight === editor.getContentHeight() && this._initialScrollTop === editor.getScrollTop()) {\n            // The editor's content height and scroll top haven't changed, so we don't need to do anything\n            return;\n        }\n        const currentCursorPosition = editor.getPosition();\n        if (!this._cursorPosition || !currentCursorPosition) {\n            return;\n        }\n        const offset = editor.getTopForLineNumber(currentCursorPosition.lineNumber) - editor.getTopForLineNumber(this._cursorPosition.lineNumber);\n        editor.setScrollTop(editor.getScrollTop() + offset);\n    }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAO,MAAMA,uBAAuB,CAAC;EACjC,OAAOC,OAAOA,CAACC,MAAM,EAAE;IACnB,IAAIA,MAAM,CAACC,YAAY,CAAC,CAAC,KAAK,CAAC,IAAID,MAAM,CAACE,yBAAyB,CAAC,CAAC,EAAE;MACnE;MACA,OAAO,IAAIJ,uBAAuB,CAACE,MAAM,CAACC,YAAY,CAAC,CAAC,EAAED,MAAM,CAACG,gBAAgB,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC;IACvG;IACA,IAAIC,eAAe,GAAG,IAAI;IAC1B,IAAIC,0BAA0B,GAAG,CAAC;IAClC,MAAMC,aAAa,GAAGN,MAAM,CAACO,gBAAgB,CAAC,CAAC;IAC/C,IAAID,aAAa,CAACE,MAAM,GAAG,CAAC,EAAE;MAC1BJ,eAAe,GAAGE,aAAa,CAAC,CAAC,CAAC,CAACG,gBAAgB,CAAC,CAAC;MACrD,MAAMC,wBAAwB,GAAGV,MAAM,CAACW,iBAAiB,CAACP,eAAe,CAACQ,UAAU,EAAER,eAAe,CAACS,MAAM,CAAC;MAC7GR,0BAA0B,GAAGL,MAAM,CAACC,YAAY,CAAC,CAAC,GAAGS,wBAAwB;IACjF;IACA,OAAO,IAAIZ,uBAAuB,CAACE,MAAM,CAACC,YAAY,CAAC,CAAC,EAAED,MAAM,CAACG,gBAAgB,CAAC,CAAC,EAAEC,eAAe,EAAEC,0BAA0B,EAAEL,MAAM,CAACc,WAAW,CAAC,CAAC,CAAC;EAC3J;EACAC,WAAWA,CAACC,iBAAiB,EAAEC,qBAAqB,EAAEC,gBAAgB,EAAEC,2BAA2B,EAAEC,eAAe,EAAE;IAClH,IAAI,CAACJ,iBAAiB,GAAGA,iBAAiB;IAC1C,IAAI,CAACC,qBAAqB,GAAGA,qBAAqB;IAClD,IAAI,CAACC,gBAAgB,GAAGA,gBAAgB;IACxC,IAAI,CAACC,2BAA2B,GAAGA,2BAA2B;IAC9D,IAAI,CAACC,eAAe,GAAGA,eAAe;EAC1C;EACAC,OAAOA,CAACrB,MAAM,EAAE;IACZ,IAAI,IAAI,CAACiB,qBAAqB,KAAKjB,MAAM,CAACG,gBAAgB,CAAC,CAAC,IAAI,IAAI,CAACa,iBAAiB,KAAKhB,MAAM,CAACC,YAAY,CAAC,CAAC,EAAE;MAC9G;MACA;IACJ;IACA,IAAI,IAAI,CAACiB,gBAAgB,EAAE;MACvB,MAAMR,wBAAwB,GAAGV,MAAM,CAACW,iBAAiB,CAAC,IAAI,CAACO,gBAAgB,CAACN,UAAU,EAAE,IAAI,CAACM,gBAAgB,CAACL,MAAM,CAAC;MACzHb,MAAM,CAACsB,YAAY,CAACZ,wBAAwB,GAAG,IAAI,CAACS,2BAA2B,CAAC;IACpF;EACJ;EACAI,uCAAuCA,CAACvB,MAAM,EAAE;IAC5C,IAAI,IAAI,CAACiB,qBAAqB,KAAKjB,MAAM,CAACG,gBAAgB,CAAC,CAAC,IAAI,IAAI,CAACa,iBAAiB,KAAKhB,MAAM,CAACC,YAAY,CAAC,CAAC,EAAE;MAC9G;MACA;IACJ;IACA,MAAMuB,qBAAqB,GAAGxB,MAAM,CAACc,WAAW,CAAC,CAAC;IAClD,IAAI,CAAC,IAAI,CAACM,eAAe,IAAI,CAACI,qBAAqB,EAAE;MACjD;IACJ;IACA,MAAMC,MAAM,GAAGzB,MAAM,CAAC0B,mBAAmB,CAACF,qBAAqB,CAACZ,UAAU,CAAC,GAAGZ,MAAM,CAAC0B,mBAAmB,CAAC,IAAI,CAACN,eAAe,CAACR,UAAU,CAAC;IACzIZ,MAAM,CAACsB,YAAY,CAACtB,MAAM,CAACC,YAAY,CAAC,CAAC,GAAGwB,MAAM,CAAC;EACvD;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}