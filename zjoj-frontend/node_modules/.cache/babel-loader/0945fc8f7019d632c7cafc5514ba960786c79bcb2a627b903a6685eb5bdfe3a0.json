{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar ContextMenuController_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { Separator, SubmenuAction } from '../../../../base/common/actions.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { IMenuService, MenuId, SubmenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IWorkspaceContextService, isStandaloneEditorWorkspace } from '../../../../platform/workspace/common/workspace.js';\nlet ContextMenuController = ContextMenuController_1 = class ContextMenuController {\n  static get(editor) {\n    return editor.getContribution(ContextMenuController_1.ID);\n  }\n  constructor(editor, _contextMenuService, _contextViewService, _contextKeyService, _keybindingService, _menuService, _configurationService, _workspaceContextService) {\n    this._contextMenuService = _contextMenuService;\n    this._contextViewService = _contextViewService;\n    this._contextKeyService = _contextKeyService;\n    this._keybindingService = _keybindingService;\n    this._menuService = _menuService;\n    this._configurationService = _configurationService;\n    this._workspaceContextService = _workspaceContextService;\n    this._toDispose = new DisposableStore();\n    this._contextMenuIsBeingShownCount = 0;\n    this._editor = editor;\n    this._toDispose.add(this._editor.onContextMenu(e => this._onContextMenu(e)));\n    this._toDispose.add(this._editor.onMouseWheel(e => {\n      if (this._contextMenuIsBeingShownCount > 0) {\n        const view = this._contextViewService.getContextViewElement();\n        const target = e.srcElement;\n        // Event triggers on shadow root host first\n        // Check if the context view is under this host before hiding it #103169\n        if (!(target.shadowRoot && dom.getShadowRoot(view) === target.shadowRoot)) {\n          this._contextViewService.hideContextView();\n        }\n      }\n    }));\n    this._toDispose.add(this._editor.onKeyDown(e => {\n      if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n        return; // Context menu is turned off through configuration\n      }\n      if (e.keyCode === 58 /* KeyCode.ContextMenu */) {\n        // Chrome is funny like that\n        e.preventDefault();\n        e.stopPropagation();\n        this.showContextMenu();\n      }\n    }));\n  }\n  _onContextMenu(e) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n      this._editor.focus();\n      // Ensure the cursor is at the position of the mouse click\n      if (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\n        this._editor.setPosition(e.target.position);\n      }\n      return; // Context menu is turned off through configuration\n    }\n    if (e.target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */) {\n      return; // allow native menu on widgets to support right click on input field for example in find\n    }\n    if (e.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.detail.injectedText) {\n      return; // allow native menu on injected text\n    }\n    e.event.preventDefault();\n    e.event.stopPropagation();\n    if (e.target.type === 11 /* MouseTargetType.SCROLLBAR */) {\n      return this._showScrollbarContextMenu(e.event);\n    }\n    if (e.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.type !== 7 /* MouseTargetType.CONTENT_EMPTY */ && e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n      return; // only support mouse click into text or native context menu key for now\n    }\n    // Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions\n    this._editor.focus();\n    // Ensure the cursor is at the position of the mouse click\n    if (e.target.position) {\n      let hasSelectionAtPosition = false;\n      for (const selection of this._editor.getSelections()) {\n        if (selection.containsPosition(e.target.position)) {\n          hasSelectionAtPosition = true;\n          break;\n        }\n      }\n      if (!hasSelectionAtPosition) {\n        this._editor.setPosition(e.target.position);\n      }\n    }\n    // Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position\n    let anchor = null;\n    if (e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n      anchor = e.event;\n    }\n    // Show the context menu\n    this.showContextMenu(anchor);\n  }\n  showContextMenu(anchor) {\n    if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n      return; // Context menu is turned off through configuration\n    }\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    // Find actions available for menu\n    const menuActions = this._getMenuActions(this._editor.getModel(), this._editor.isSimpleWidget ? MenuId.SimpleEditorContext : MenuId.EditorContext);\n    // Show menu if we have actions to show\n    if (menuActions.length > 0) {\n      this._doShowContextMenu(menuActions, anchor);\n    }\n  }\n  _getMenuActions(model, menuId) {\n    const result = [];\n    // get menu groups\n    const menu = this._menuService.createMenu(menuId, this._contextKeyService);\n    const groups = menu.getActions({\n      arg: model.uri\n    });\n    menu.dispose();\n    // translate them into other actions\n    for (const group of groups) {\n      const [, actions] = group;\n      let addedItems = 0;\n      for (const action of actions) {\n        if (action instanceof SubmenuItemAction) {\n          const subActions = this._getMenuActions(model, action.item.submenu);\n          if (subActions.length > 0) {\n            result.push(new SubmenuAction(action.id, action.label, subActions));\n            addedItems++;\n          }\n        } else {\n          result.push(action);\n          addedItems++;\n        }\n      }\n      if (addedItems) {\n        result.push(new Separator());\n      }\n    }\n    if (result.length) {\n      result.pop(); // remove last separator\n    }\n    return result;\n  }\n  _doShowContextMenu(actions, event = null) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    // Disable hover\n    const oldHoverSetting = this._editor.getOption(60 /* EditorOption.hover */);\n    this._editor.updateOptions({\n      hover: {\n        enabled: false\n      }\n    });\n    let anchor = event;\n    if (!anchor) {\n      // Ensure selection is visible\n      this._editor.revealPosition(this._editor.getPosition(), 1 /* ScrollType.Immediate */);\n      this._editor.render();\n      const cursorCoords = this._editor.getScrolledVisiblePosition(this._editor.getPosition());\n      // Translate to absolute editor position\n      const editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n      const posx = editorCoords.left + cursorCoords.left;\n      const posy = editorCoords.top + cursorCoords.top + cursorCoords.height;\n      anchor = {\n        x: posx,\n        y: posy\n      };\n    }\n    const useShadowDOM = this._editor.getOption(126 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n    // Show menu\n    this._contextMenuIsBeingShownCount++;\n    this._contextMenuService.showContextMenu({\n      domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n      getAnchor: () => anchor,\n      getActions: () => actions,\n      getActionViewItem: action => {\n        const keybinding = this._keybindingFor(action);\n        if (keybinding) {\n          return new ActionViewItem(action, action, {\n            label: true,\n            keybinding: keybinding.getLabel(),\n            isMenu: true\n          });\n        }\n        const customActionViewItem = action;\n        if (typeof customActionViewItem.getActionViewItem === 'function') {\n          return customActionViewItem.getActionViewItem();\n        }\n        return new ActionViewItem(action, action, {\n          icon: true,\n          label: true,\n          isMenu: true\n        });\n      },\n      getKeyBinding: action => {\n        return this._keybindingFor(action);\n      },\n      onHide: wasCancelled => {\n        this._contextMenuIsBeingShownCount--;\n        this._editor.updateOptions({\n          hover: oldHoverSetting\n        });\n      }\n    });\n  }\n  _showScrollbarContextMenu(anchor) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    if (isStandaloneEditorWorkspace(this._workspaceContextService.getWorkspace())) {\n      // can't update the configuration properly in the standalone editor\n      return;\n    }\n    const minimapOptions = this._editor.getOption(72 /* EditorOption.minimap */);\n    let lastId = 0;\n    const createAction = opts => {\n      return {\n        id: `menu-action-${++lastId}`,\n        label: opts.label,\n        tooltip: '',\n        class: undefined,\n        enabled: typeof opts.enabled === 'undefined' ? true : opts.enabled,\n        checked: opts.checked,\n        run: opts.run\n      };\n    };\n    const createSubmenuAction = (label, actions) => {\n      return new SubmenuAction(`menu-action-${++lastId}`, label, actions, undefined);\n    };\n    const createEnumAction = (label, enabled, configName, configuredValue, options) => {\n      if (!enabled) {\n        return createAction({\n          label,\n          enabled,\n          run: () => {}\n        });\n      }\n      const createRunner = value => {\n        return () => {\n          this._configurationService.updateValue(configName, value);\n        };\n      };\n      const actions = [];\n      for (const option of options) {\n        actions.push(createAction({\n          label: option.label,\n          checked: configuredValue === option.value,\n          run: createRunner(option.value)\n        }));\n      }\n      return createSubmenuAction(label, actions);\n    };\n    const actions = [];\n    actions.push(createAction({\n      label: nls.localize('context.minimap.minimap', \"Minimap\"),\n      checked: minimapOptions.enabled,\n      run: () => {\n        this._configurationService.updateValue(`editor.minimap.enabled`, !minimapOptions.enabled);\n      }\n    }));\n    actions.push(new Separator());\n    actions.push(createAction({\n      label: nls.localize('context.minimap.renderCharacters', \"Render Characters\"),\n      enabled: minimapOptions.enabled,\n      checked: minimapOptions.renderCharacters,\n      run: () => {\n        this._configurationService.updateValue(`editor.minimap.renderCharacters`, !minimapOptions.renderCharacters);\n      }\n    }));\n    actions.push(createEnumAction(nls.localize('context.minimap.size', \"Vertical size\"), minimapOptions.enabled, 'editor.minimap.size', minimapOptions.size, [{\n      label: nls.localize('context.minimap.size.proportional', \"Proportional\"),\n      value: 'proportional'\n    }, {\n      label: nls.localize('context.minimap.size.fill', \"Fill\"),\n      value: 'fill'\n    }, {\n      label: nls.localize('context.minimap.size.fit', \"Fit\"),\n      value: 'fit'\n    }]));\n    actions.push(createEnumAction(nls.localize('context.minimap.slider', \"Slider\"), minimapOptions.enabled, 'editor.minimap.showSlider', minimapOptions.showSlider, [{\n      label: nls.localize('context.minimap.slider.mouseover', \"Mouse Over\"),\n      value: 'mouseover'\n    }, {\n      label: nls.localize('context.minimap.slider.always', \"Always\"),\n      value: 'always'\n    }]));\n    const useShadowDOM = this._editor.getOption(126 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n    this._contextMenuIsBeingShownCount++;\n    this._contextMenuService.showContextMenu({\n      domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n      getAnchor: () => anchor,\n      getActions: () => actions,\n      onHide: wasCancelled => {\n        this._contextMenuIsBeingShownCount--;\n        this._editor.focus();\n      }\n    });\n  }\n  _keybindingFor(action) {\n    return this._keybindingService.lookupKeybinding(action.id);\n  }\n  dispose() {\n    if (this._contextMenuIsBeingShownCount > 0) {\n      this._contextViewService.hideContextView();\n    }\n    this._toDispose.dispose();\n  }\n};\nContextMenuController.ID = 'editor.contrib.contextmenu';\nContextMenuController = ContextMenuController_1 = __decorate([__param(1, IContextMenuService), __param(2, IContextViewService), __param(3, IContextKeyService), __param(4, IKeybindingService), __param(5, IMenuService), __param(6, IConfigurationService), __param(7, IWorkspaceContextService)], ContextMenuController);\nexport { ContextMenuController };\nclass ShowContextMenu extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.showContextMenu',\n      label: nls.localize('action.showContextMenu.label', \"Show Editor Context Menu\"),\n      alias: 'Show Editor Context Menu',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(accessor, editor) {\n    var _a;\n    (_a = ContextMenuController.get(editor)) === null || _a === void 0 ? void 0 : _a.showContextMenu();\n  }\n}\nregisterEditorContribution(ContextMenuController.ID, ContextMenuController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(ShowContextMenu);","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","ContextMenuController_1","dom","ActionViewItem","Separator","SubmenuAction","DisposableStore","isIOS","EditorAction","registerEditorAction","registerEditorContribution","EditorContextKeys","nls","IMenuService","MenuId","SubmenuItemAction","IContextKeyService","IContextMenuService","IContextViewService","IKeybindingService","IConfigurationService","IWorkspaceContextService","isStandaloneEditorWorkspace","ContextMenuController","get","editor","getContribution","ID","constructor","_contextMenuService","_contextViewService","_contextKeyService","_keybindingService","_menuService","_configurationService","_workspaceContextService","_toDispose","_contextMenuIsBeingShownCount","_editor","add","onContextMenu","e","_onContextMenu","onMouseWheel","view","getContextViewElement","srcElement","shadowRoot","getShadowRoot","hideContextView","onKeyDown","getOption","keyCode","preventDefault","stopPropagation","showContextMenu","hasModel","focus","position","getSelection","containsPosition","setPosition","type","detail","injectedText","event","_showScrollbarContextMenu","hasSelectionAtPosition","selection","getSelections","anchor","menuActions","_getMenuActions","getModel","isSimpleWidget","SimpleEditorContext","EditorContext","_doShowContextMenu","model","menuId","result","menu","createMenu","groups","getActions","arg","uri","dispose","group","actions","addedItems","action","subActions","item","submenu","push","id","label","pop","oldHoverSetting","updateOptions","hover","enabled","revealPosition","getPosition","render","cursorCoords","getScrolledVisiblePosition","editorCoords","getDomNodePagePosition","getDomNode","posx","left","posy","top","height","x","y","useShadowDOM","domForShadowRoot","undefined","getAnchor","getActionViewItem","keybinding","_keybindingFor","getLabel","isMenu","customActionViewItem","icon","getKeyBinding","onHide","wasCancelled","getWorkspace","minimapOptions","lastId","createAction","opts","tooltip","class","checked","run","createSubmenuAction","createEnumAction","configName","configuredValue","options","createRunner","value","updateValue","option","localize","renderCharacters","size","showSlider","lookupKeybinding","ShowContextMenu","alias","precondition","kbOpts","kbExpr","textInputFocus","primary","weight","accessor","_a"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/contrib/contextmenu/browser/contextmenu.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar ContextMenuController_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { Separator, SubmenuAction } from '../../../../base/common/actions.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { IMenuService, MenuId, SubmenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IWorkspaceContextService, isStandaloneEditorWorkspace } from '../../../../platform/workspace/common/workspace.js';\nlet ContextMenuController = ContextMenuController_1 = class ContextMenuController {\n    static get(editor) {\n        return editor.getContribution(ContextMenuController_1.ID);\n    }\n    constructor(editor, _contextMenuService, _contextViewService, _contextKeyService, _keybindingService, _menuService, _configurationService, _workspaceContextService) {\n        this._contextMenuService = _contextMenuService;\n        this._contextViewService = _contextViewService;\n        this._contextKeyService = _contextKeyService;\n        this._keybindingService = _keybindingService;\n        this._menuService = _menuService;\n        this._configurationService = _configurationService;\n        this._workspaceContextService = _workspaceContextService;\n        this._toDispose = new DisposableStore();\n        this._contextMenuIsBeingShownCount = 0;\n        this._editor = editor;\n        this._toDispose.add(this._editor.onContextMenu((e) => this._onContextMenu(e)));\n        this._toDispose.add(this._editor.onMouseWheel((e) => {\n            if (this._contextMenuIsBeingShownCount > 0) {\n                const view = this._contextViewService.getContextViewElement();\n                const target = e.srcElement;\n                // Event triggers on shadow root host first\n                // Check if the context view is under this host before hiding it #103169\n                if (!(target.shadowRoot && dom.getShadowRoot(view) === target.shadowRoot)) {\n                    this._contextViewService.hideContextView();\n                }\n            }\n        }));\n        this._toDispose.add(this._editor.onKeyDown((e) => {\n            if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n                return; // Context menu is turned off through configuration\n            }\n            if (e.keyCode === 58 /* KeyCode.ContextMenu */) {\n                // Chrome is funny like that\n                e.preventDefault();\n                e.stopPropagation();\n                this.showContextMenu();\n            }\n        }));\n    }\n    _onContextMenu(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n            this._editor.focus();\n            // Ensure the cursor is at the position of the mouse click\n            if (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\n                this._editor.setPosition(e.target.position);\n            }\n            return; // Context menu is turned off through configuration\n        }\n        if (e.target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */) {\n            return; // allow native menu on widgets to support right click on input field for example in find\n        }\n        if (e.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.detail.injectedText) {\n            return; // allow native menu on injected text\n        }\n        e.event.preventDefault();\n        e.event.stopPropagation();\n        if (e.target.type === 11 /* MouseTargetType.SCROLLBAR */) {\n            return this._showScrollbarContextMenu(e.event);\n        }\n        if (e.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.type !== 7 /* MouseTargetType.CONTENT_EMPTY */ && e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n            return; // only support mouse click into text or native context menu key for now\n        }\n        // Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions\n        this._editor.focus();\n        // Ensure the cursor is at the position of the mouse click\n        if (e.target.position) {\n            let hasSelectionAtPosition = false;\n            for (const selection of this._editor.getSelections()) {\n                if (selection.containsPosition(e.target.position)) {\n                    hasSelectionAtPosition = true;\n                    break;\n                }\n            }\n            if (!hasSelectionAtPosition) {\n                this._editor.setPosition(e.target.position);\n            }\n        }\n        // Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position\n        let anchor = null;\n        if (e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n            anchor = e.event;\n        }\n        // Show the context menu\n        this.showContextMenu(anchor);\n    }\n    showContextMenu(anchor) {\n        if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n            return; // Context menu is turned off through configuration\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Find actions available for menu\n        const menuActions = this._getMenuActions(this._editor.getModel(), this._editor.isSimpleWidget ? MenuId.SimpleEditorContext : MenuId.EditorContext);\n        // Show menu if we have actions to show\n        if (menuActions.length > 0) {\n            this._doShowContextMenu(menuActions, anchor);\n        }\n    }\n    _getMenuActions(model, menuId) {\n        const result = [];\n        // get menu groups\n        const menu = this._menuService.createMenu(menuId, this._contextKeyService);\n        const groups = menu.getActions({ arg: model.uri });\n        menu.dispose();\n        // translate them into other actions\n        for (const group of groups) {\n            const [, actions] = group;\n            let addedItems = 0;\n            for (const action of actions) {\n                if (action instanceof SubmenuItemAction) {\n                    const subActions = this._getMenuActions(model, action.item.submenu);\n                    if (subActions.length > 0) {\n                        result.push(new SubmenuAction(action.id, action.label, subActions));\n                        addedItems++;\n                    }\n                }\n                else {\n                    result.push(action);\n                    addedItems++;\n                }\n            }\n            if (addedItems) {\n                result.push(new Separator());\n            }\n        }\n        if (result.length) {\n            result.pop(); // remove last separator\n        }\n        return result;\n    }\n    _doShowContextMenu(actions, event = null) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Disable hover\n        const oldHoverSetting = this._editor.getOption(60 /* EditorOption.hover */);\n        this._editor.updateOptions({\n            hover: {\n                enabled: false\n            }\n        });\n        let anchor = event;\n        if (!anchor) {\n            // Ensure selection is visible\n            this._editor.revealPosition(this._editor.getPosition(), 1 /* ScrollType.Immediate */);\n            this._editor.render();\n            const cursorCoords = this._editor.getScrolledVisiblePosition(this._editor.getPosition());\n            // Translate to absolute editor position\n            const editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n            const posx = editorCoords.left + cursorCoords.left;\n            const posy = editorCoords.top + cursorCoords.top + cursorCoords.height;\n            anchor = { x: posx, y: posy };\n        }\n        const useShadowDOM = this._editor.getOption(126 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        // Show menu\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            getActionViewItem: (action) => {\n                const keybinding = this._keybindingFor(action);\n                if (keybinding) {\n                    return new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel(), isMenu: true });\n                }\n                const customActionViewItem = action;\n                if (typeof customActionViewItem.getActionViewItem === 'function') {\n                    return customActionViewItem.getActionViewItem();\n                }\n                return new ActionViewItem(action, action, { icon: true, label: true, isMenu: true });\n            },\n            getKeyBinding: (action) => {\n                return this._keybindingFor(action);\n            },\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.updateOptions({\n                    hover: oldHoverSetting\n                });\n            }\n        });\n    }\n    _showScrollbarContextMenu(anchor) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (isStandaloneEditorWorkspace(this._workspaceContextService.getWorkspace())) {\n            // can't update the configuration properly in the standalone editor\n            return;\n        }\n        const minimapOptions = this._editor.getOption(72 /* EditorOption.minimap */);\n        let lastId = 0;\n        const createAction = (opts) => {\n            return {\n                id: `menu-action-${++lastId}`,\n                label: opts.label,\n                tooltip: '',\n                class: undefined,\n                enabled: (typeof opts.enabled === 'undefined' ? true : opts.enabled),\n                checked: opts.checked,\n                run: opts.run\n            };\n        };\n        const createSubmenuAction = (label, actions) => {\n            return new SubmenuAction(`menu-action-${++lastId}`, label, actions, undefined);\n        };\n        const createEnumAction = (label, enabled, configName, configuredValue, options) => {\n            if (!enabled) {\n                return createAction({ label, enabled, run: () => { } });\n            }\n            const createRunner = (value) => {\n                return () => {\n                    this._configurationService.updateValue(configName, value);\n                };\n            };\n            const actions = [];\n            for (const option of options) {\n                actions.push(createAction({\n                    label: option.label,\n                    checked: configuredValue === option.value,\n                    run: createRunner(option.value)\n                }));\n            }\n            return createSubmenuAction(label, actions);\n        };\n        const actions = [];\n        actions.push(createAction({\n            label: nls.localize('context.minimap.minimap', \"Minimap\"),\n            checked: minimapOptions.enabled,\n            run: () => {\n                this._configurationService.updateValue(`editor.minimap.enabled`, !minimapOptions.enabled);\n            }\n        }));\n        actions.push(new Separator());\n        actions.push(createAction({\n            label: nls.localize('context.minimap.renderCharacters', \"Render Characters\"),\n            enabled: minimapOptions.enabled,\n            checked: minimapOptions.renderCharacters,\n            run: () => {\n                this._configurationService.updateValue(`editor.minimap.renderCharacters`, !minimapOptions.renderCharacters);\n            }\n        }));\n        actions.push(createEnumAction(nls.localize('context.minimap.size', \"Vertical size\"), minimapOptions.enabled, 'editor.minimap.size', minimapOptions.size, [{\n                label: nls.localize('context.minimap.size.proportional', \"Proportional\"),\n                value: 'proportional'\n            }, {\n                label: nls.localize('context.minimap.size.fill', \"Fill\"),\n                value: 'fill'\n            }, {\n                label: nls.localize('context.minimap.size.fit', \"Fit\"),\n                value: 'fit'\n            }]));\n        actions.push(createEnumAction(nls.localize('context.minimap.slider', \"Slider\"), minimapOptions.enabled, 'editor.minimap.showSlider', minimapOptions.showSlider, [{\n                label: nls.localize('context.minimap.slider.mouseover', \"Mouse Over\"),\n                value: 'mouseover'\n            }, {\n                label: nls.localize('context.minimap.slider.always', \"Always\"),\n                value: 'always'\n            }]));\n        const useShadowDOM = this._editor.getOption(126 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.focus();\n            }\n        });\n    }\n    _keybindingFor(action) {\n        return this._keybindingService.lookupKeybinding(action.id);\n    }\n    dispose() {\n        if (this._contextMenuIsBeingShownCount > 0) {\n            this._contextViewService.hideContextView();\n        }\n        this._toDispose.dispose();\n    }\n};\nContextMenuController.ID = 'editor.contrib.contextmenu';\nContextMenuController = ContextMenuController_1 = __decorate([\n    __param(1, IContextMenuService),\n    __param(2, IContextViewService),\n    __param(3, IContextKeyService),\n    __param(4, IKeybindingService),\n    __param(5, IMenuService),\n    __param(6, IConfigurationService),\n    __param(7, IWorkspaceContextService)\n], ContextMenuController);\nexport { ContextMenuController };\nclass ShowContextMenu extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showContextMenu',\n            label: nls.localize('action.showContextMenu.label', \"Show Editor Context Menu\"),\n            alias: 'Show Editor Context Menu',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = ContextMenuController.get(editor)) === null || _a === void 0 ? void 0 : _a.showContextMenu();\n    }\n}\nregisterEditorContribution(ContextMenuController.ID, ContextMenuController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(ShowContextMenu);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}