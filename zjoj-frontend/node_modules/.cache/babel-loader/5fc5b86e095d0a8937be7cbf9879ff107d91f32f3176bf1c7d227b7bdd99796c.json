{"ast":null,"code":"import { ref, computed, nextTick, watch } from \"vue\";\nimport { Enter } from \"../_utils/keycode.js\";\nconst useInput = ({\n  defaultValue,\n  modelValue,\n  emit,\n  eventName = \"input\",\n  updateEventName = \"update:modelValue\",\n  eventHandlers\n}) => {\n  var _a;\n  const inputRef = ref();\n  const _value = ref((_a = defaultValue == null ? void 0 : defaultValue.value) != null ? _a : \"\");\n  const _focused = ref(false);\n  const isComposition = ref(false);\n  const compositionValue = ref(\"\");\n  let initialValue;\n  const computedValue = computed(() => {\n    var _a2;\n    return (_a2 = modelValue == null ? void 0 : modelValue.value) != null ? _a2 : _value.value;\n  });\n  const updateValue = (value, ev) => {\n    _value.value = value;\n    emit(updateEventName, value);\n    emit(eventName, value, ev);\n  };\n  const handleInput = ev => {\n    const {\n      value\n    } = ev.target;\n    if (!isComposition.value) {\n      updateValue(value, ev);\n      nextTick(() => {\n        if (inputRef.value && computedValue.value !== inputRef.value.value) {\n          inputRef.value.value = computedValue.value;\n        }\n      });\n    }\n  };\n  const handleChange = ev => {\n    if (eventName === \"input\" && computedValue.value !== initialValue) {\n      initialValue = computedValue.value;\n      emit(\"change\", computedValue.value, ev);\n    }\n  };\n  const handleComposition = ev => {\n    var _a2;\n    const {\n      value\n    } = ev.target;\n    if (ev.type === \"compositionend\") {\n      isComposition.value = false;\n      compositionValue.value = \"\";\n      updateValue(value, ev);\n      nextTick(() => {\n        if (inputRef.value && computedValue.value !== inputRef.value.value) {\n          inputRef.value.value = computedValue.value;\n        }\n      });\n    } else {\n      isComposition.value = true;\n      compositionValue.value = computedValue.value + ((_a2 = ev.data) != null ? _a2 : \"\");\n    }\n  };\n  const handleFocus = ev => {\n    var _a2, _b;\n    _focused.value = true;\n    initialValue = computedValue.value;\n    emit(\"focus\", ev);\n    (_b = (_a2 = eventHandlers == null ? void 0 : eventHandlers.value) == null ? void 0 : _a2.onFocus) == null ? void 0 : _b.call(_a2, ev);\n  };\n  const handleBlur = ev => {\n    var _a2, _b;\n    _focused.value = false;\n    emit(\"blur\", ev);\n    (_b = (_a2 = eventHandlers == null ? void 0 : eventHandlers.value) == null ? void 0 : _a2.onBlur) == null ? void 0 : _b.call(_a2, ev);\n    handleChange(ev);\n  };\n  const handleKeyDown = ev => {\n    const keyCode = ev.key || ev.code;\n    if (!isComposition.value && keyCode === Enter.key) {\n      emit(\"pressEnter\", ev);\n      handleChange(ev);\n    }\n  };\n  const handleMousedown = ev => {\n    if (inputRef.value && ev.target !== inputRef.value) {\n      ev.preventDefault();\n      inputRef.value.focus();\n    }\n  };\n  watch(computedValue, value => {\n    if (inputRef.value && value !== inputRef.value.value) {\n      inputRef.value.value = value;\n    }\n  });\n  return {\n    inputRef,\n    _value,\n    _focused,\n    isComposition,\n    compositionValue,\n    computedValue,\n    handleInput,\n    handleComposition,\n    handleFocus,\n    handleBlur,\n    handleKeyDown,\n    handleMousedown\n  };\n};\nexport { useInput };","map":{"version":3,"names":["ref","computed","nextTick","watch","Enter","useInput","defaultValue","modelValue","emit","eventName","updateEventName","eventHandlers","_a","inputRef","_value","value","_focused","isComposition","compositionValue","initialValue","computedValue","_a2","updateValue","ev","handleInput","target","handleChange","handleComposition","type","data","handleFocus","_b","onFocus","call","handleBlur","onBlur","handleKeyDown","keyCode","key","code","handleMousedown","preventDefault","focus"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/@arco-design/web-vue/es/_hooks/use-input.js"],"sourcesContent":["import { ref, computed, nextTick, watch } from \"vue\";\nimport { Enter } from \"../_utils/keycode.js\";\nconst useInput = ({\n  defaultValue,\n  modelValue,\n  emit,\n  eventName = \"input\",\n  updateEventName = \"update:modelValue\",\n  eventHandlers\n}) => {\n  var _a;\n  const inputRef = ref();\n  const _value = ref((_a = defaultValue == null ? void 0 : defaultValue.value) != null ? _a : \"\");\n  const _focused = ref(false);\n  const isComposition = ref(false);\n  const compositionValue = ref(\"\");\n  let initialValue;\n  const computedValue = computed(() => {\n    var _a2;\n    return (_a2 = modelValue == null ? void 0 : modelValue.value) != null ? _a2 : _value.value;\n  });\n  const updateValue = (value, ev) => {\n    _value.value = value;\n    emit(updateEventName, value);\n    emit(eventName, value, ev);\n  };\n  const handleInput = (ev) => {\n    const { value } = ev.target;\n    if (!isComposition.value) {\n      updateValue(value, ev);\n      nextTick(() => {\n        if (inputRef.value && computedValue.value !== inputRef.value.value) {\n          inputRef.value.value = computedValue.value;\n        }\n      });\n    }\n  };\n  const handleChange = (ev) => {\n    if (eventName === \"input\" && computedValue.value !== initialValue) {\n      initialValue = computedValue.value;\n      emit(\"change\", computedValue.value, ev);\n    }\n  };\n  const handleComposition = (ev) => {\n    var _a2;\n    const { value } = ev.target;\n    if (ev.type === \"compositionend\") {\n      isComposition.value = false;\n      compositionValue.value = \"\";\n      updateValue(value, ev);\n      nextTick(() => {\n        if (inputRef.value && computedValue.value !== inputRef.value.value) {\n          inputRef.value.value = computedValue.value;\n        }\n      });\n    } else {\n      isComposition.value = true;\n      compositionValue.value = computedValue.value + ((_a2 = ev.data) != null ? _a2 : \"\");\n    }\n  };\n  const handleFocus = (ev) => {\n    var _a2, _b;\n    _focused.value = true;\n    initialValue = computedValue.value;\n    emit(\"focus\", ev);\n    (_b = (_a2 = eventHandlers == null ? void 0 : eventHandlers.value) == null ? void 0 : _a2.onFocus) == null ? void 0 : _b.call(_a2, ev);\n  };\n  const handleBlur = (ev) => {\n    var _a2, _b;\n    _focused.value = false;\n    emit(\"blur\", ev);\n    (_b = (_a2 = eventHandlers == null ? void 0 : eventHandlers.value) == null ? void 0 : _a2.onBlur) == null ? void 0 : _b.call(_a2, ev);\n    handleChange(ev);\n  };\n  const handleKeyDown = (ev) => {\n    const keyCode = ev.key || ev.code;\n    if (!isComposition.value && keyCode === Enter.key) {\n      emit(\"pressEnter\", ev);\n      handleChange(ev);\n    }\n  };\n  const handleMousedown = (ev) => {\n    if (inputRef.value && ev.target !== inputRef.value) {\n      ev.preventDefault();\n      inputRef.value.focus();\n    }\n  };\n  watch(computedValue, (value) => {\n    if (inputRef.value && value !== inputRef.value.value) {\n      inputRef.value.value = value;\n    }\n  });\n  return {\n    inputRef,\n    _value,\n    _focused,\n    isComposition,\n    compositionValue,\n    computedValue,\n    handleInput,\n    handleComposition,\n    handleFocus,\n    handleBlur,\n    handleKeyDown,\n    handleMousedown\n  };\n};\nexport { useInput };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}