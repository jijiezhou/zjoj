{"ast":null,"code":"import { ref, watch, computed } from \"vue\";\nimport { isEqual } from \"../../_utils/is-equal.js\";\nconst useFilter = ({\n  columns,\n  onFilterChange\n}) => {\n  const _filters = ref(getDefaultFilters(columns.value));\n  watch(columns, columns2 => {\n    const newFilters = getDefaultFilters(columns2);\n    if (!isEqual(newFilters, _filters.value)) {\n      _filters.value = newFilters;\n    }\n  });\n  const computedFilters = computed(() => {\n    var _a, _b;\n    const filters = {};\n    for (const item of columns.value) {\n      if (item.dataIndex) {\n        const value = (_b = (_a = item.filterable) == null ? void 0 : _a.filteredValue) != null ? _b : _filters.value[item.dataIndex];\n        if (value) {\n          filters[item.dataIndex] = value;\n        }\n      }\n    }\n    return filters;\n  });\n  const resetFilters = dataIndex => {\n    var _a;\n    const _dataIndex = dataIndex ? [].concat(dataIndex) : [];\n    const filters = {};\n    for (const item of columns.value) {\n      if (item.dataIndex && item.filterable) {\n        if (_dataIndex.length === 0 || _dataIndex.includes(item.dataIndex)) {\n          const filteredValue = (_a = item.filterable.defaultFilteredValue) != null ? _a : [];\n          filters[item.dataIndex] = filteredValue;\n          onFilterChange(item.dataIndex, filteredValue);\n        }\n      }\n    }\n    _filters.value = filters;\n  };\n  const clearFilters = dataIndex => {\n    const _dataIndex = dataIndex ? [].concat(dataIndex) : [];\n    const filters = {};\n    for (const item of columns.value) {\n      if (item.dataIndex && item.filterable) {\n        if (_dataIndex.length === 0 || _dataIndex.includes(item.dataIndex)) {\n          const filteredValue = [];\n          filters[item.dataIndex] = filteredValue;\n          onFilterChange(item.dataIndex, filteredValue);\n        }\n      }\n    }\n    _filters.value = filters;\n  };\n  return {\n    _filters,\n    computedFilters,\n    resetFilters,\n    clearFilters\n  };\n};\nconst getDefaultFilters = columns => {\n  var _a;\n  const filters = {};\n  for (const item of columns) {\n    if (item.dataIndex && ((_a = item.filterable) == null ? void 0 : _a.defaultFilteredValue)) {\n      filters[item.dataIndex] = item.filterable.defaultFilteredValue;\n    }\n  }\n  return filters;\n};\nexport { useFilter };","map":{"version":3,"names":["ref","watch","computed","isEqual","useFilter","columns","onFilterChange","_filters","getDefaultFilters","value","columns2","newFilters","computedFilters","_a","_b","filters","item","dataIndex","filterable","filteredValue","resetFilters","_dataIndex","concat","length","includes","defaultFilteredValue","clearFilters"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/@arco-design/web-vue/es/table/hooks/use-filter.js"],"sourcesContent":["import { ref, watch, computed } from \"vue\";\nimport { isEqual } from \"../../_utils/is-equal.js\";\nconst useFilter = ({\n  columns,\n  onFilterChange\n}) => {\n  const _filters = ref(getDefaultFilters(columns.value));\n  watch(columns, (columns2) => {\n    const newFilters = getDefaultFilters(columns2);\n    if (!isEqual(newFilters, _filters.value)) {\n      _filters.value = newFilters;\n    }\n  });\n  const computedFilters = computed(() => {\n    var _a, _b;\n    const filters = {};\n    for (const item of columns.value) {\n      if (item.dataIndex) {\n        const value = (_b = (_a = item.filterable) == null ? void 0 : _a.filteredValue) != null ? _b : _filters.value[item.dataIndex];\n        if (value) {\n          filters[item.dataIndex] = value;\n        }\n      }\n    }\n    return filters;\n  });\n  const resetFilters = (dataIndex) => {\n    var _a;\n    const _dataIndex = dataIndex ? [].concat(dataIndex) : [];\n    const filters = {};\n    for (const item of columns.value) {\n      if (item.dataIndex && item.filterable) {\n        if (_dataIndex.length === 0 || _dataIndex.includes(item.dataIndex)) {\n          const filteredValue = (_a = item.filterable.defaultFilteredValue) != null ? _a : [];\n          filters[item.dataIndex] = filteredValue;\n          onFilterChange(item.dataIndex, filteredValue);\n        }\n      }\n    }\n    _filters.value = filters;\n  };\n  const clearFilters = (dataIndex) => {\n    const _dataIndex = dataIndex ? [].concat(dataIndex) : [];\n    const filters = {};\n    for (const item of columns.value) {\n      if (item.dataIndex && item.filterable) {\n        if (_dataIndex.length === 0 || _dataIndex.includes(item.dataIndex)) {\n          const filteredValue = [];\n          filters[item.dataIndex] = filteredValue;\n          onFilterChange(item.dataIndex, filteredValue);\n        }\n      }\n    }\n    _filters.value = filters;\n  };\n  return {\n    _filters,\n    computedFilters,\n    resetFilters,\n    clearFilters\n  };\n};\nconst getDefaultFilters = (columns) => {\n  var _a;\n  const filters = {};\n  for (const item of columns) {\n    if (item.dataIndex && ((_a = item.filterable) == null ? void 0 : _a.defaultFilteredValue)) {\n      filters[item.dataIndex] = item.filterable.defaultFilteredValue;\n    }\n  }\n  return filters;\n};\nexport { useFilter };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}