{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Position } from './core/position.js';\nimport { Range } from './core/range.js';\nimport { Selection } from './core/selection.js';\nimport { createScopedLineTokens } from './languages/supports.js';\nimport { CursorColumns } from './core/cursorColumns.js';\nimport { normalizeIndentation } from './core/indentation.js';\nconst autoCloseAlways = () => true;\nconst autoCloseNever = () => false;\nconst autoCloseBeforeWhitespace = chr => chr === ' ' || chr === '\\t';\nexport class CursorConfiguration {\n  static shouldRecreate(e) {\n    return e.hasChanged(143 /* EditorOption.layoutInfo */) || e.hasChanged(129 /* EditorOption.wordSeparators */) || e.hasChanged(37 /* EditorOption.emptySelectionClipboard */) || e.hasChanged(76 /* EditorOption.multiCursorMergeOverlapping */) || e.hasChanged(78 /* EditorOption.multiCursorPaste */) || e.hasChanged(79 /* EditorOption.multiCursorLimit */) || e.hasChanged(6 /* EditorOption.autoClosingBrackets */) || e.hasChanged(7 /* EditorOption.autoClosingComments */) || e.hasChanged(11 /* EditorOption.autoClosingQuotes */) || e.hasChanged(9 /* EditorOption.autoClosingDelete */) || e.hasChanged(10 /* EditorOption.autoClosingOvertype */) || e.hasChanged(14 /* EditorOption.autoSurround */) || e.hasChanged(127 /* EditorOption.useTabStops */) || e.hasChanged(50 /* EditorOption.fontInfo */) || e.hasChanged(90 /* EditorOption.readOnly */);\n  }\n  constructor(languageId, modelOptions, configuration, languageConfigurationService) {\n    var _a;\n    this.languageConfigurationService = languageConfigurationService;\n    this._cursorMoveConfigurationBrand = undefined;\n    this._languageId = languageId;\n    const options = configuration.options;\n    const layoutInfo = options.get(143 /* EditorOption.layoutInfo */);\n    const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n    this.readOnly = options.get(90 /* EditorOption.readOnly */);\n    this.tabSize = modelOptions.tabSize;\n    this.indentSize = modelOptions.indentSize;\n    this.insertSpaces = modelOptions.insertSpaces;\n    this.stickyTabStops = options.get(115 /* EditorOption.stickyTabStops */);\n    this.lineHeight = fontInfo.lineHeight;\n    this.typicalHalfwidthCharacterWidth = fontInfo.typicalHalfwidthCharacterWidth;\n    this.pageSize = Math.max(1, Math.floor(layoutInfo.height / this.lineHeight) - 2);\n    this.useTabStops = options.get(127 /* EditorOption.useTabStops */);\n    this.wordSeparators = options.get(129 /* EditorOption.wordSeparators */);\n    this.emptySelectionClipboard = options.get(37 /* EditorOption.emptySelectionClipboard */);\n    this.copyWithSyntaxHighlighting = options.get(25 /* EditorOption.copyWithSyntaxHighlighting */);\n    this.multiCursorMergeOverlapping = options.get(76 /* EditorOption.multiCursorMergeOverlapping */);\n    this.multiCursorPaste = options.get(78 /* EditorOption.multiCursorPaste */);\n    this.multiCursorLimit = options.get(79 /* EditorOption.multiCursorLimit */);\n    this.autoClosingBrackets = options.get(6 /* EditorOption.autoClosingBrackets */);\n    this.autoClosingComments = options.get(7 /* EditorOption.autoClosingComments */);\n    this.autoClosingQuotes = options.get(11 /* EditorOption.autoClosingQuotes */);\n    this.autoClosingDelete = options.get(9 /* EditorOption.autoClosingDelete */);\n    this.autoClosingOvertype = options.get(10 /* EditorOption.autoClosingOvertype */);\n    this.autoSurround = options.get(14 /* EditorOption.autoSurround */);\n    this.autoIndent = options.get(12 /* EditorOption.autoIndent */);\n    this.surroundingPairs = {};\n    this._electricChars = null;\n    this.shouldAutoCloseBefore = {\n      quote: this._getShouldAutoClose(languageId, this.autoClosingQuotes, true),\n      comment: this._getShouldAutoClose(languageId, this.autoClosingComments, false),\n      bracket: this._getShouldAutoClose(languageId, this.autoClosingBrackets, false)\n    };\n    this.autoClosingPairs = this.languageConfigurationService.getLanguageConfiguration(languageId).getAutoClosingPairs();\n    const surroundingPairs = this.languageConfigurationService.getLanguageConfiguration(languageId).getSurroundingPairs();\n    if (surroundingPairs) {\n      for (const pair of surroundingPairs) {\n        this.surroundingPairs[pair.open] = pair.close;\n      }\n    }\n    const commentsConfiguration = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n    this.blockCommentStartToken = (_a = commentsConfiguration === null || commentsConfiguration === void 0 ? void 0 : commentsConfiguration.blockCommentStartToken) !== null && _a !== void 0 ? _a : null;\n  }\n  get electricChars() {\n    var _a;\n    if (!this._electricChars) {\n      this._electricChars = {};\n      const electricChars = (_a = this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter) === null || _a === void 0 ? void 0 : _a.getElectricCharacters();\n      if (electricChars) {\n        for (const char of electricChars) {\n          this._electricChars[char] = true;\n        }\n      }\n    }\n    return this._electricChars;\n  }\n  /**\n   * Should return opening bracket type to match indentation with\n   */\n  onElectricCharacter(character, context, column) {\n    const scopedLineTokens = createScopedLineTokens(context, column - 1);\n    const electricCharacterSupport = this.languageConfigurationService.getLanguageConfiguration(scopedLineTokens.languageId).electricCharacter;\n    if (!electricCharacterSupport) {\n      return null;\n    }\n    return electricCharacterSupport.onElectricCharacter(character, scopedLineTokens, column - scopedLineTokens.firstCharOffset);\n  }\n  normalizeIndentation(str) {\n    return normalizeIndentation(str, this.indentSize, this.insertSpaces);\n  }\n  _getShouldAutoClose(languageId, autoCloseConfig, forQuotes) {\n    switch (autoCloseConfig) {\n      case 'beforeWhitespace':\n        return autoCloseBeforeWhitespace;\n      case 'languageDefined':\n        return this._getLanguageDefinedShouldAutoClose(languageId, forQuotes);\n      case 'always':\n        return autoCloseAlways;\n      case 'never':\n        return autoCloseNever;\n    }\n  }\n  _getLanguageDefinedShouldAutoClose(languageId, forQuotes) {\n    const autoCloseBeforeSet = this.languageConfigurationService.getLanguageConfiguration(languageId).getAutoCloseBeforeSet(forQuotes);\n    return c => autoCloseBeforeSet.indexOf(c) !== -1;\n  }\n  /**\n   * Returns a visible column from a column.\n   * @see {@link CursorColumns}\n   */\n  visibleColumnFromColumn(model, position) {\n    return CursorColumns.visibleColumnFromColumn(model.getLineContent(position.lineNumber), position.column, this.tabSize);\n  }\n  /**\n   * Returns a visible column from a column.\n   * @see {@link CursorColumns}\n   */\n  columnFromVisibleColumn(model, lineNumber, visibleColumn) {\n    const result = CursorColumns.columnFromVisibleColumn(model.getLineContent(lineNumber), visibleColumn, this.tabSize);\n    const minColumn = model.getLineMinColumn(lineNumber);\n    if (result < minColumn) {\n      return minColumn;\n    }\n    const maxColumn = model.getLineMaxColumn(lineNumber);\n    if (result > maxColumn) {\n      return maxColumn;\n    }\n    return result;\n  }\n}\nexport class CursorState {\n  static fromModelState(modelState) {\n    return new PartialModelCursorState(modelState);\n  }\n  static fromViewState(viewState) {\n    return new PartialViewCursorState(viewState);\n  }\n  static fromModelSelection(modelSelection) {\n    const selection = Selection.liftSelection(modelSelection);\n    const modelState = new SingleCursorState(Range.fromPositions(selection.getSelectionStart()), 0 /* SelectionStartKind.Simple */, 0, selection.getPosition(), 0);\n    return CursorState.fromModelState(modelState);\n  }\n  static fromModelSelections(modelSelections) {\n    const states = [];\n    for (let i = 0, len = modelSelections.length; i < len; i++) {\n      states[i] = this.fromModelSelection(modelSelections[i]);\n    }\n    return states;\n  }\n  constructor(modelState, viewState) {\n    this._cursorStateBrand = undefined;\n    this.modelState = modelState;\n    this.viewState = viewState;\n  }\n  equals(other) {\n    return this.viewState.equals(other.viewState) && this.modelState.equals(other.modelState);\n  }\n}\nexport class PartialModelCursorState {\n  constructor(modelState) {\n    this.modelState = modelState;\n    this.viewState = null;\n  }\n}\nexport class PartialViewCursorState {\n  constructor(viewState) {\n    this.modelState = null;\n    this.viewState = viewState;\n  }\n}\n/**\n * Represents the cursor state on either the model or on the view model.\n */\nexport class SingleCursorState {\n  constructor(selectionStart, selectionStartKind, selectionStartLeftoverVisibleColumns, position, leftoverVisibleColumns) {\n    this.selectionStart = selectionStart;\n    this.selectionStartKind = selectionStartKind;\n    this.selectionStartLeftoverVisibleColumns = selectionStartLeftoverVisibleColumns;\n    this.position = position;\n    this.leftoverVisibleColumns = leftoverVisibleColumns;\n    this._singleCursorStateBrand = undefined;\n    this.selection = SingleCursorState._computeSelection(this.selectionStart, this.position);\n  }\n  equals(other) {\n    return this.selectionStartLeftoverVisibleColumns === other.selectionStartLeftoverVisibleColumns && this.leftoverVisibleColumns === other.leftoverVisibleColumns && this.selectionStartKind === other.selectionStartKind && this.position.equals(other.position) && this.selectionStart.equalsRange(other.selectionStart);\n  }\n  hasSelection() {\n    return !this.selection.isEmpty() || !this.selectionStart.isEmpty();\n  }\n  move(inSelectionMode, lineNumber, column, leftoverVisibleColumns) {\n    if (inSelectionMode) {\n      // move just position\n      return new SingleCursorState(this.selectionStart, this.selectionStartKind, this.selectionStartLeftoverVisibleColumns, new Position(lineNumber, column), leftoverVisibleColumns);\n    } else {\n      // move everything\n      return new SingleCursorState(new Range(lineNumber, column, lineNumber, column), 0 /* SelectionStartKind.Simple */, leftoverVisibleColumns, new Position(lineNumber, column), leftoverVisibleColumns);\n    }\n  }\n  static _computeSelection(selectionStart, position) {\n    if (selectionStart.isEmpty() || !position.isBeforeOrEqual(selectionStart.getStartPosition())) {\n      return Selection.fromPositions(selectionStart.getStartPosition(), position);\n    } else {\n      return Selection.fromPositions(selectionStart.getEndPosition(), position);\n    }\n  }\n}\nexport class EditOperationResult {\n  constructor(type, commands, opts) {\n    this._editOperationResultBrand = undefined;\n    this.type = type;\n    this.commands = commands;\n    this.shouldPushStackElementBefore = opts.shouldPushStackElementBefore;\n    this.shouldPushStackElementAfter = opts.shouldPushStackElementAfter;\n  }\n}\nexport function isQuote(ch) {\n  return ch === '\\'' || ch === '\"' || ch === '`';\n}","map":{"version":3,"names":["Position","Range","Selection","createScopedLineTokens","CursorColumns","normalizeIndentation","autoCloseAlways","autoCloseNever","autoCloseBeforeWhitespace","chr","CursorConfiguration","shouldRecreate","e","hasChanged","constructor","languageId","modelOptions","configuration","languageConfigurationService","_a","_cursorMoveConfigurationBrand","undefined","_languageId","options","layoutInfo","get","fontInfo","readOnly","tabSize","indentSize","insertSpaces","stickyTabStops","lineHeight","typicalHalfwidthCharacterWidth","pageSize","Math","max","floor","height","useTabStops","wordSeparators","emptySelectionClipboard","copyWithSyntaxHighlighting","multiCursorMergeOverlapping","multiCursorPaste","multiCursorLimit","autoClosingBrackets","autoClosingComments","autoClosingQuotes","autoClosingDelete","autoClosingOvertype","autoSurround","autoIndent","surroundingPairs","_electricChars","shouldAutoCloseBefore","quote","_getShouldAutoClose","comment","bracket","autoClosingPairs","getLanguageConfiguration","getAutoClosingPairs","getSurroundingPairs","pair","open","close","commentsConfiguration","comments","blockCommentStartToken","electricChars","electricCharacter","getElectricCharacters","char","onElectricCharacter","character","context","column","scopedLineTokens","electricCharacterSupport","firstCharOffset","str","autoCloseConfig","forQuotes","_getLanguageDefinedShouldAutoClose","autoCloseBeforeSet","getAutoCloseBeforeSet","c","indexOf","visibleColumnFromColumn","model","position","getLineContent","lineNumber","columnFromVisibleColumn","visibleColumn","result","minColumn","getLineMinColumn","maxColumn","getLineMaxColumn","CursorState","fromModelState","modelState","PartialModelCursorState","fromViewState","viewState","PartialViewCursorState","fromModelSelection","modelSelection","selection","liftSelection","SingleCursorState","fromPositions","getSelectionStart","getPosition","fromModelSelections","modelSelections","states","i","len","length","_cursorStateBrand","equals","other","selectionStart","selectionStartKind","selectionStartLeftoverVisibleColumns","leftoverVisibleColumns","_singleCursorStateBrand","_computeSelection","equalsRange","hasSelection","isEmpty","move","inSelectionMode","isBeforeOrEqual","getStartPosition","getEndPosition","EditOperationResult","type","commands","opts","_editOperationResultBrand","shouldPushStackElementBefore","shouldPushStackElementAfter","isQuote","ch"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/common/cursorCommon.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Position } from './core/position.js';\nimport { Range } from './core/range.js';\nimport { Selection } from './core/selection.js';\nimport { createScopedLineTokens } from './languages/supports.js';\nimport { CursorColumns } from './core/cursorColumns.js';\nimport { normalizeIndentation } from './core/indentation.js';\nconst autoCloseAlways = () => true;\nconst autoCloseNever = () => false;\nconst autoCloseBeforeWhitespace = (chr) => (chr === ' ' || chr === '\\t');\nexport class CursorConfiguration {\n    static shouldRecreate(e) {\n        return (e.hasChanged(143 /* EditorOption.layoutInfo */)\n            || e.hasChanged(129 /* EditorOption.wordSeparators */)\n            || e.hasChanged(37 /* EditorOption.emptySelectionClipboard */)\n            || e.hasChanged(76 /* EditorOption.multiCursorMergeOverlapping */)\n            || e.hasChanged(78 /* EditorOption.multiCursorPaste */)\n            || e.hasChanged(79 /* EditorOption.multiCursorLimit */)\n            || e.hasChanged(6 /* EditorOption.autoClosingBrackets */)\n            || e.hasChanged(7 /* EditorOption.autoClosingComments */)\n            || e.hasChanged(11 /* EditorOption.autoClosingQuotes */)\n            || e.hasChanged(9 /* EditorOption.autoClosingDelete */)\n            || e.hasChanged(10 /* EditorOption.autoClosingOvertype */)\n            || e.hasChanged(14 /* EditorOption.autoSurround */)\n            || e.hasChanged(127 /* EditorOption.useTabStops */)\n            || e.hasChanged(50 /* EditorOption.fontInfo */)\n            || e.hasChanged(90 /* EditorOption.readOnly */));\n    }\n    constructor(languageId, modelOptions, configuration, languageConfigurationService) {\n        var _a;\n        this.languageConfigurationService = languageConfigurationService;\n        this._cursorMoveConfigurationBrand = undefined;\n        this._languageId = languageId;\n        const options = configuration.options;\n        const layoutInfo = options.get(143 /* EditorOption.layoutInfo */);\n        const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n        this.readOnly = options.get(90 /* EditorOption.readOnly */);\n        this.tabSize = modelOptions.tabSize;\n        this.indentSize = modelOptions.indentSize;\n        this.insertSpaces = modelOptions.insertSpaces;\n        this.stickyTabStops = options.get(115 /* EditorOption.stickyTabStops */);\n        this.lineHeight = fontInfo.lineHeight;\n        this.typicalHalfwidthCharacterWidth = fontInfo.typicalHalfwidthCharacterWidth;\n        this.pageSize = Math.max(1, Math.floor(layoutInfo.height / this.lineHeight) - 2);\n        this.useTabStops = options.get(127 /* EditorOption.useTabStops */);\n        this.wordSeparators = options.get(129 /* EditorOption.wordSeparators */);\n        this.emptySelectionClipboard = options.get(37 /* EditorOption.emptySelectionClipboard */);\n        this.copyWithSyntaxHighlighting = options.get(25 /* EditorOption.copyWithSyntaxHighlighting */);\n        this.multiCursorMergeOverlapping = options.get(76 /* EditorOption.multiCursorMergeOverlapping */);\n        this.multiCursorPaste = options.get(78 /* EditorOption.multiCursorPaste */);\n        this.multiCursorLimit = options.get(79 /* EditorOption.multiCursorLimit */);\n        this.autoClosingBrackets = options.get(6 /* EditorOption.autoClosingBrackets */);\n        this.autoClosingComments = options.get(7 /* EditorOption.autoClosingComments */);\n        this.autoClosingQuotes = options.get(11 /* EditorOption.autoClosingQuotes */);\n        this.autoClosingDelete = options.get(9 /* EditorOption.autoClosingDelete */);\n        this.autoClosingOvertype = options.get(10 /* EditorOption.autoClosingOvertype */);\n        this.autoSurround = options.get(14 /* EditorOption.autoSurround */);\n        this.autoIndent = options.get(12 /* EditorOption.autoIndent */);\n        this.surroundingPairs = {};\n        this._electricChars = null;\n        this.shouldAutoCloseBefore = {\n            quote: this._getShouldAutoClose(languageId, this.autoClosingQuotes, true),\n            comment: this._getShouldAutoClose(languageId, this.autoClosingComments, false),\n            bracket: this._getShouldAutoClose(languageId, this.autoClosingBrackets, false),\n        };\n        this.autoClosingPairs = this.languageConfigurationService.getLanguageConfiguration(languageId).getAutoClosingPairs();\n        const surroundingPairs = this.languageConfigurationService.getLanguageConfiguration(languageId).getSurroundingPairs();\n        if (surroundingPairs) {\n            for (const pair of surroundingPairs) {\n                this.surroundingPairs[pair.open] = pair.close;\n            }\n        }\n        const commentsConfiguration = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        this.blockCommentStartToken = (_a = commentsConfiguration === null || commentsConfiguration === void 0 ? void 0 : commentsConfiguration.blockCommentStartToken) !== null && _a !== void 0 ? _a : null;\n    }\n    get electricChars() {\n        var _a;\n        if (!this._electricChars) {\n            this._electricChars = {};\n            const electricChars = (_a = this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter) === null || _a === void 0 ? void 0 : _a.getElectricCharacters();\n            if (electricChars) {\n                for (const char of electricChars) {\n                    this._electricChars[char] = true;\n                }\n            }\n        }\n        return this._electricChars;\n    }\n    /**\n     * Should return opening bracket type to match indentation with\n     */\n    onElectricCharacter(character, context, column) {\n        const scopedLineTokens = createScopedLineTokens(context, column - 1);\n        const electricCharacterSupport = this.languageConfigurationService.getLanguageConfiguration(scopedLineTokens.languageId).electricCharacter;\n        if (!electricCharacterSupport) {\n            return null;\n        }\n        return electricCharacterSupport.onElectricCharacter(character, scopedLineTokens, column - scopedLineTokens.firstCharOffset);\n    }\n    normalizeIndentation(str) {\n        return normalizeIndentation(str, this.indentSize, this.insertSpaces);\n    }\n    _getShouldAutoClose(languageId, autoCloseConfig, forQuotes) {\n        switch (autoCloseConfig) {\n            case 'beforeWhitespace':\n                return autoCloseBeforeWhitespace;\n            case 'languageDefined':\n                return this._getLanguageDefinedShouldAutoClose(languageId, forQuotes);\n            case 'always':\n                return autoCloseAlways;\n            case 'never':\n                return autoCloseNever;\n        }\n    }\n    _getLanguageDefinedShouldAutoClose(languageId, forQuotes) {\n        const autoCloseBeforeSet = this.languageConfigurationService.getLanguageConfiguration(languageId).getAutoCloseBeforeSet(forQuotes);\n        return c => autoCloseBeforeSet.indexOf(c) !== -1;\n    }\n    /**\n     * Returns a visible column from a column.\n     * @see {@link CursorColumns}\n     */\n    visibleColumnFromColumn(model, position) {\n        return CursorColumns.visibleColumnFromColumn(model.getLineContent(position.lineNumber), position.column, this.tabSize);\n    }\n    /**\n     * Returns a visible column from a column.\n     * @see {@link CursorColumns}\n     */\n    columnFromVisibleColumn(model, lineNumber, visibleColumn) {\n        const result = CursorColumns.columnFromVisibleColumn(model.getLineContent(lineNumber), visibleColumn, this.tabSize);\n        const minColumn = model.getLineMinColumn(lineNumber);\n        if (result < minColumn) {\n            return minColumn;\n        }\n        const maxColumn = model.getLineMaxColumn(lineNumber);\n        if (result > maxColumn) {\n            return maxColumn;\n        }\n        return result;\n    }\n}\nexport class CursorState {\n    static fromModelState(modelState) {\n        return new PartialModelCursorState(modelState);\n    }\n    static fromViewState(viewState) {\n        return new PartialViewCursorState(viewState);\n    }\n    static fromModelSelection(modelSelection) {\n        const selection = Selection.liftSelection(modelSelection);\n        const modelState = new SingleCursorState(Range.fromPositions(selection.getSelectionStart()), 0 /* SelectionStartKind.Simple */, 0, selection.getPosition(), 0);\n        return CursorState.fromModelState(modelState);\n    }\n    static fromModelSelections(modelSelections) {\n        const states = [];\n        for (let i = 0, len = modelSelections.length; i < len; i++) {\n            states[i] = this.fromModelSelection(modelSelections[i]);\n        }\n        return states;\n    }\n    constructor(modelState, viewState) {\n        this._cursorStateBrand = undefined;\n        this.modelState = modelState;\n        this.viewState = viewState;\n    }\n    equals(other) {\n        return (this.viewState.equals(other.viewState) && this.modelState.equals(other.modelState));\n    }\n}\nexport class PartialModelCursorState {\n    constructor(modelState) {\n        this.modelState = modelState;\n        this.viewState = null;\n    }\n}\nexport class PartialViewCursorState {\n    constructor(viewState) {\n        this.modelState = null;\n        this.viewState = viewState;\n    }\n}\n/**\n * Represents the cursor state on either the model or on the view model.\n */\nexport class SingleCursorState {\n    constructor(selectionStart, selectionStartKind, selectionStartLeftoverVisibleColumns, position, leftoverVisibleColumns) {\n        this.selectionStart = selectionStart;\n        this.selectionStartKind = selectionStartKind;\n        this.selectionStartLeftoverVisibleColumns = selectionStartLeftoverVisibleColumns;\n        this.position = position;\n        this.leftoverVisibleColumns = leftoverVisibleColumns;\n        this._singleCursorStateBrand = undefined;\n        this.selection = SingleCursorState._computeSelection(this.selectionStart, this.position);\n    }\n    equals(other) {\n        return (this.selectionStartLeftoverVisibleColumns === other.selectionStartLeftoverVisibleColumns\n            && this.leftoverVisibleColumns === other.leftoverVisibleColumns\n            && this.selectionStartKind === other.selectionStartKind\n            && this.position.equals(other.position)\n            && this.selectionStart.equalsRange(other.selectionStart));\n    }\n    hasSelection() {\n        return (!this.selection.isEmpty() || !this.selectionStart.isEmpty());\n    }\n    move(inSelectionMode, lineNumber, column, leftoverVisibleColumns) {\n        if (inSelectionMode) {\n            // move just position\n            return new SingleCursorState(this.selectionStart, this.selectionStartKind, this.selectionStartLeftoverVisibleColumns, new Position(lineNumber, column), leftoverVisibleColumns);\n        }\n        else {\n            // move everything\n            return new SingleCursorState(new Range(lineNumber, column, lineNumber, column), 0 /* SelectionStartKind.Simple */, leftoverVisibleColumns, new Position(lineNumber, column), leftoverVisibleColumns);\n        }\n    }\n    static _computeSelection(selectionStart, position) {\n        if (selectionStart.isEmpty() || !position.isBeforeOrEqual(selectionStart.getStartPosition())) {\n            return Selection.fromPositions(selectionStart.getStartPosition(), position);\n        }\n        else {\n            return Selection.fromPositions(selectionStart.getEndPosition(), position);\n        }\n    }\n}\nexport class EditOperationResult {\n    constructor(type, commands, opts) {\n        this._editOperationResultBrand = undefined;\n        this.type = type;\n        this.commands = commands;\n        this.shouldPushStackElementBefore = opts.shouldPushStackElementBefore;\n        this.shouldPushStackElementAfter = opts.shouldPushStackElementAfter;\n    }\n}\nexport function isQuote(ch) {\n    return (ch === '\\'' || ch === '\"' || ch === '`');\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}