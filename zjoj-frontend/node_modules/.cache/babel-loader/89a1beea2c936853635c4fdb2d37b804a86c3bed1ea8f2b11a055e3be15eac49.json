{"ast":null,"code":"import { ref, watch, computed } from \"vue\";\nimport { isString } from \"../../_utils/is.js\";\nimport { isEqual } from \"../../_utils/is-equal.js\";\nconst useSorter = ({\n  columns,\n  onSorterChange\n}) => {\n  const _sorter = ref(getDefaultSorter(columns.value));\n  watch(columns, columns2 => {\n    const newSorter = getDefaultSorter(columns2);\n    if (!isEqual(newSorter, _sorter.value)) {\n      _sorter.value = newSorter;\n    }\n  });\n  const computedSorter = computed(() => {\n    var _a;\n    for (const item of columns.value) {\n      if (item.dataIndex && item.sortable) {\n        const direction = isString(item.sortable.sortOrder) ? item.sortable.sortOrder : ((_a = _sorter.value) == null ? void 0 : _a.field) === item.dataIndex ? _sorter.value.direction : \"\";\n        if (direction) {\n          return {\n            field: item.dataIndex,\n            direction\n          };\n        }\n      }\n    }\n    return void 0;\n  });\n  const resetSorters = () => {\n    var _a;\n    let sorter;\n    for (const item of columns.value) {\n      if (item.dataIndex && item.sortable) {\n        if (!sorter && item.sortable.defaultSortOrder) {\n          sorter = {\n            field: item.dataIndex,\n            direction: item.sortable.defaultSortOrder\n          };\n        }\n        onSorterChange(item.dataIndex, (_a = item.sortable.defaultSortOrder) != null ? _a : \"\");\n      }\n    }\n    _sorter.value = sorter;\n  };\n  const clearSorters = () => {\n    for (const item of columns.value) {\n      if (item.dataIndex && item.sortable) {\n        onSorterChange(item.dataIndex, \"\");\n      }\n    }\n  };\n  return {\n    _sorter,\n    computedSorter,\n    resetSorters,\n    clearSorters\n  };\n};\nconst getDefaultSorter = columns => {\n  var _a;\n  for (const item of columns) {\n    if (item.dataIndex && ((_a = item.sortable) == null ? void 0 : _a.defaultSortOrder)) {\n      return {\n        field: item.dataIndex,\n        direction: item.sortable.defaultSortOrder\n      };\n    }\n  }\n  return void 0;\n};\nexport { useSorter };","map":{"version":3,"names":["ref","watch","computed","isString","isEqual","useSorter","columns","onSorterChange","_sorter","getDefaultSorter","value","columns2","newSorter","computedSorter","_a","item","dataIndex","sortable","direction","sortOrder","field","resetSorters","sorter","defaultSortOrder","clearSorters"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/@arco-design/web-vue/es/table/hooks/use-sorter.js"],"sourcesContent":["import { ref, watch, computed } from \"vue\";\nimport { isString } from \"../../_utils/is.js\";\nimport { isEqual } from \"../../_utils/is-equal.js\";\nconst useSorter = ({\n  columns,\n  onSorterChange\n}) => {\n  const _sorter = ref(getDefaultSorter(columns.value));\n  watch(columns, (columns2) => {\n    const newSorter = getDefaultSorter(columns2);\n    if (!isEqual(newSorter, _sorter.value)) {\n      _sorter.value = newSorter;\n    }\n  });\n  const computedSorter = computed(() => {\n    var _a;\n    for (const item of columns.value) {\n      if (item.dataIndex && item.sortable) {\n        const direction = isString(item.sortable.sortOrder) ? item.sortable.sortOrder : ((_a = _sorter.value) == null ? void 0 : _a.field) === item.dataIndex ? _sorter.value.direction : \"\";\n        if (direction) {\n          return {\n            field: item.dataIndex,\n            direction\n          };\n        }\n      }\n    }\n    return void 0;\n  });\n  const resetSorters = () => {\n    var _a;\n    let sorter;\n    for (const item of columns.value) {\n      if (item.dataIndex && item.sortable) {\n        if (!sorter && item.sortable.defaultSortOrder) {\n          sorter = {\n            field: item.dataIndex,\n            direction: item.sortable.defaultSortOrder\n          };\n        }\n        onSorterChange(item.dataIndex, (_a = item.sortable.defaultSortOrder) != null ? _a : \"\");\n      }\n    }\n    _sorter.value = sorter;\n  };\n  const clearSorters = () => {\n    for (const item of columns.value) {\n      if (item.dataIndex && item.sortable) {\n        onSorterChange(item.dataIndex, \"\");\n      }\n    }\n  };\n  return {\n    _sorter,\n    computedSorter,\n    resetSorters,\n    clearSorters\n  };\n};\nconst getDefaultSorter = (columns) => {\n  var _a;\n  for (const item of columns) {\n    if (item.dataIndex && ((_a = item.sortable) == null ? void 0 : _a.defaultSortOrder)) {\n      return {\n        field: item.dataIndex,\n        direction: item.sortable.defaultSortOrder\n      };\n    }\n  }\n  return void 0;\n};\nexport { useSorter };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}