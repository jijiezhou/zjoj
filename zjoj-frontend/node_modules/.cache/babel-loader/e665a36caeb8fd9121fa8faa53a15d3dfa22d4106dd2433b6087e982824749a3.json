{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './marginDecorations.css';\nimport { DecorationToRender, DedupOverlay } from '../glyphMargin/glyphMargin.js';\nexport class MarginViewLineDecorationsOverlay extends DedupOverlay {\n  constructor(context) {\n    super();\n    this._context = context;\n    this._renderResult = null;\n    this._context.addEventHandler(this);\n  }\n  dispose() {\n    this._context.removeEventHandler(this);\n    this._renderResult = null;\n    super.dispose();\n  }\n  // --- begin event handlers\n  onConfigurationChanged(e) {\n    return true;\n  }\n  onDecorationsChanged(e) {\n    return true;\n  }\n  onFlushed(e) {\n    return true;\n  }\n  onLinesChanged(e) {\n    return true;\n  }\n  onLinesDeleted(e) {\n    return true;\n  }\n  onLinesInserted(e) {\n    return true;\n  }\n  onScrollChanged(e) {\n    return e.scrollTopChanged;\n  }\n  onZonesChanged(e) {\n    return true;\n  }\n  // --- end event handlers\n  _getDecorations(ctx) {\n    const decorations = ctx.getDecorationsInViewport();\n    const r = [];\n    let rLen = 0;\n    for (let i = 0, len = decorations.length; i < len; i++) {\n      const d = decorations[i];\n      const marginClassName = d.options.marginClassName;\n      const zIndex = d.options.zIndex;\n      if (marginClassName) {\n        r[rLen++] = new DecorationToRender(d.range.startLineNumber, d.range.endLineNumber, marginClassName, zIndex);\n      }\n    }\n    return r;\n  }\n  prepareRender(ctx) {\n    const visibleStartLineNumber = ctx.visibleRange.startLineNumber;\n    const visibleEndLineNumber = ctx.visibleRange.endLineNumber;\n    const toRender = this._render(visibleStartLineNumber, visibleEndLineNumber, this._getDecorations(ctx));\n    const output = [];\n    for (let lineNumber = visibleStartLineNumber; lineNumber <= visibleEndLineNumber; lineNumber++) {\n      const lineIndex = lineNumber - visibleStartLineNumber;\n      const decorations = toRender[lineIndex].getDecorations();\n      let lineOutput = '';\n      for (const decoration of decorations) {\n        lineOutput += '<div class=\"cmdr ' + decoration.className + '\" style=\"\"></div>';\n      }\n      output[lineIndex] = lineOutput;\n    }\n    this._renderResult = output;\n  }\n  render(startLineNumber, lineNumber) {\n    if (!this._renderResult) {\n      return '';\n    }\n    return this._renderResult[lineNumber - startLineNumber];\n  }\n}","map":{"version":3,"names":["DecorationToRender","DedupOverlay","MarginViewLineDecorationsOverlay","constructor","context","_context","_renderResult","addEventHandler","dispose","removeEventHandler","onConfigurationChanged","e","onDecorationsChanged","onFlushed","onLinesChanged","onLinesDeleted","onLinesInserted","onScrollChanged","scrollTopChanged","onZonesChanged","_getDecorations","ctx","decorations","getDecorationsInViewport","r","rLen","i","len","length","d","marginClassName","options","zIndex","range","startLineNumber","endLineNumber","prepareRender","visibleStartLineNumber","visibleRange","visibleEndLineNumber","toRender","_render","output","lineNumber","lineIndex","getDecorations","lineOutput","decoration","className","render"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/marginDecorations/marginDecorations.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './marginDecorations.css';\nimport { DecorationToRender, DedupOverlay } from '../glyphMargin/glyphMargin.js';\nexport class MarginViewLineDecorationsOverlay extends DedupOverlay {\n    constructor(context) {\n        super();\n        this._context = context;\n        this._renderResult = null;\n        this._context.addEventHandler(this);\n    }\n    dispose() {\n        this._context.removeEventHandler(this);\n        this._renderResult = null;\n        super.dispose();\n    }\n    // --- begin event handlers\n    onConfigurationChanged(e) {\n        return true;\n    }\n    onDecorationsChanged(e) {\n        return true;\n    }\n    onFlushed(e) {\n        return true;\n    }\n    onLinesChanged(e) {\n        return true;\n    }\n    onLinesDeleted(e) {\n        return true;\n    }\n    onLinesInserted(e) {\n        return true;\n    }\n    onScrollChanged(e) {\n        return e.scrollTopChanged;\n    }\n    onZonesChanged(e) {\n        return true;\n    }\n    // --- end event handlers\n    _getDecorations(ctx) {\n        const decorations = ctx.getDecorationsInViewport();\n        const r = [];\n        let rLen = 0;\n        for (let i = 0, len = decorations.length; i < len; i++) {\n            const d = decorations[i];\n            const marginClassName = d.options.marginClassName;\n            const zIndex = d.options.zIndex;\n            if (marginClassName) {\n                r[rLen++] = new DecorationToRender(d.range.startLineNumber, d.range.endLineNumber, marginClassName, zIndex);\n            }\n        }\n        return r;\n    }\n    prepareRender(ctx) {\n        const visibleStartLineNumber = ctx.visibleRange.startLineNumber;\n        const visibleEndLineNumber = ctx.visibleRange.endLineNumber;\n        const toRender = this._render(visibleStartLineNumber, visibleEndLineNumber, this._getDecorations(ctx));\n        const output = [];\n        for (let lineNumber = visibleStartLineNumber; lineNumber <= visibleEndLineNumber; lineNumber++) {\n            const lineIndex = lineNumber - visibleStartLineNumber;\n            const decorations = toRender[lineIndex].getDecorations();\n            let lineOutput = '';\n            for (const decoration of decorations) {\n                lineOutput += '<div class=\"cmdr ' + decoration.className + '\" style=\"\"></div>';\n            }\n            output[lineIndex] = lineOutput;\n        }\n        this._renderResult = output;\n    }\n    render(startLineNumber, lineNumber) {\n        if (!this._renderResult) {\n            return '';\n        }\n        return this._renderResult[lineNumber - startLineNumber];\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}