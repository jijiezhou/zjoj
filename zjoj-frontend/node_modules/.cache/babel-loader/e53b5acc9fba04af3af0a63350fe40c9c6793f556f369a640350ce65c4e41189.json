{"ast":null,"code":"import { defineComponent, inject, computed, createVNode } from \"vue\";\nimport { getOperationStyle, getOperationFixedCls } from \"./utils.js\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport Checkbox from \"../checkbox/index.js\";\nimport { isFunction } from \"../_utils/is.js\";\nimport { tableInjectionKey } from \"./context.js\";\nvar OperationTh = defineComponent({\n  name: \"OperationTh\",\n  props: {\n    operationColumn: {\n      type: Object,\n      required: true\n    },\n    operations: {\n      type: Array,\n      required: true\n    },\n    rowSpan: {\n      type: Number,\n      default: 1\n    },\n    selectAll: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props) {\n    const prefixCls = getPrefixCls(\"table\");\n    const tableCtx = inject(tableInjectionKey, {});\n    const checkboxStatus = computed(() => {\n      var _a, _b, _c, _d;\n      let checked = false;\n      let indeterminate = false;\n      const currentSelectedEnabledRowKeys = (_b = (_a = tableCtx.currentSelectedRowKeys) == null ? void 0 : _a.filter(key => {\n        var _a2, _b2;\n        return (_b2 = (_a2 = tableCtx.currentAllEnabledRowKeys) == null ? void 0 : _a2.includes(key)) != null ? _b2 : true;\n      })) != null ? _b : [];\n      const selectedNumber = currentSelectedEnabledRowKeys.length;\n      const totalEnabledNumber = (_d = (_c = tableCtx.currentAllEnabledRowKeys) == null ? void 0 : _c.length) != null ? _d : 0;\n      if (selectedNumber > 0) {\n        if (selectedNumber >= totalEnabledNumber) {\n          checked = true;\n        } else {\n          indeterminate = true;\n        }\n      }\n      return {\n        checked,\n        indeterminate\n      };\n    });\n    const renderContent = () => {\n      if (props.selectAll) {\n        return createVNode(Checkbox, {\n          \"modelValue\": checkboxStatus.value.checked,\n          \"indeterminate\": checkboxStatus.value.indeterminate,\n          \"uninjectGroupContext\": true,\n          \"onChange\": checked => {\n            var _a;\n            (_a = tableCtx.onSelectAll) == null ? void 0 : _a.call(tableCtx, checked);\n          }\n        }, {\n          default: isFunction(props.operationColumn.title) ? props.operationColumn.title() : props.operationColumn.title\n        });\n      }\n      if (props.operationColumn.title) {\n        return isFunction(props.operationColumn.title) ? props.operationColumn.title() : props.operationColumn.title;\n      }\n      return null;\n    };\n    const style = computed(() => getOperationStyle(props.operationColumn, props.operations));\n    const cls = computed(() => [`${prefixCls}-th`, `${prefixCls}-operation`, {\n      [`${prefixCls}-checkbox`]: props.selectAll\n    }, ...getOperationFixedCls(prefixCls, props.operationColumn)]);\n    return () => createVNode(\"th\", {\n      \"class\": cls.value,\n      \"style\": style.value,\n      \"rowspan\": props.rowSpan > 1 ? props.rowSpan : void 0\n    }, [createVNode(\"span\", {\n      \"class\": `${prefixCls}-cell`\n    }, [renderContent()])]);\n  }\n});\nexport { OperationTh as default };","map":{"version":3,"names":["defineComponent","inject","computed","createVNode","getOperationStyle","getOperationFixedCls","getPrefixCls","Checkbox","isFunction","tableInjectionKey","OperationTh","name","props","operationColumn","type","Object","required","operations","Array","rowSpan","Number","default","selectAll","Boolean","setup","prefixCls","tableCtx","checkboxStatus","_a","_b","_c","_d","checked","indeterminate","currentSelectedEnabledRowKeys","currentSelectedRowKeys","filter","key","_a2","_b2","currentAllEnabledRowKeys","includes","selectedNumber","length","totalEnabledNumber","renderContent","value","onSelectAll","call","title","style","cls"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/@arco-design/web-vue/es/table/table-operation-th.js"],"sourcesContent":["import { defineComponent, inject, computed, createVNode } from \"vue\";\nimport { getOperationStyle, getOperationFixedCls } from \"./utils.js\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport Checkbox from \"../checkbox/index.js\";\nimport { isFunction } from \"../_utils/is.js\";\nimport { tableInjectionKey } from \"./context.js\";\nvar OperationTh = defineComponent({\n  name: \"OperationTh\",\n  props: {\n    operationColumn: {\n      type: Object,\n      required: true\n    },\n    operations: {\n      type: Array,\n      required: true\n    },\n    rowSpan: {\n      type: Number,\n      default: 1\n    },\n    selectAll: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props) {\n    const prefixCls = getPrefixCls(\"table\");\n    const tableCtx = inject(tableInjectionKey, {});\n    const checkboxStatus = computed(() => {\n      var _a, _b, _c, _d;\n      let checked = false;\n      let indeterminate = false;\n      const currentSelectedEnabledRowKeys = (_b = (_a = tableCtx.currentSelectedRowKeys) == null ? void 0 : _a.filter((key) => {\n        var _a2, _b2;\n        return (_b2 = (_a2 = tableCtx.currentAllEnabledRowKeys) == null ? void 0 : _a2.includes(key)) != null ? _b2 : true;\n      })) != null ? _b : [];\n      const selectedNumber = currentSelectedEnabledRowKeys.length;\n      const totalEnabledNumber = (_d = (_c = tableCtx.currentAllEnabledRowKeys) == null ? void 0 : _c.length) != null ? _d : 0;\n      if (selectedNumber > 0) {\n        if (selectedNumber >= totalEnabledNumber) {\n          checked = true;\n        } else {\n          indeterminate = true;\n        }\n      }\n      return {\n        checked,\n        indeterminate\n      };\n    });\n    const renderContent = () => {\n      if (props.selectAll) {\n        return createVNode(Checkbox, {\n          \"modelValue\": checkboxStatus.value.checked,\n          \"indeterminate\": checkboxStatus.value.indeterminate,\n          \"uninjectGroupContext\": true,\n          \"onChange\": (checked) => {\n            var _a;\n            (_a = tableCtx.onSelectAll) == null ? void 0 : _a.call(tableCtx, checked);\n          }\n        }, {\n          default: isFunction(props.operationColumn.title) ? props.operationColumn.title() : props.operationColumn.title\n        });\n      }\n      if (props.operationColumn.title) {\n        return isFunction(props.operationColumn.title) ? props.operationColumn.title() : props.operationColumn.title;\n      }\n      return null;\n    };\n    const style = computed(() => getOperationStyle(props.operationColumn, props.operations));\n    const cls = computed(() => [`${prefixCls}-th`, `${prefixCls}-operation`, {\n      [`${prefixCls}-checkbox`]: props.selectAll\n    }, ...getOperationFixedCls(prefixCls, props.operationColumn)]);\n    return () => createVNode(\"th\", {\n      \"class\": cls.value,\n      \"style\": style.value,\n      \"rowspan\": props.rowSpan > 1 ? props.rowSpan : void 0\n    }, [createVNode(\"span\", {\n      \"class\": `${prefixCls}-cell`\n    }, [renderContent()])]);\n  }\n});\nexport { OperationTh as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}