{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../core/range.js';\nimport { editorBracketHighlightingForeground1, editorBracketHighlightingForeground2, editorBracketHighlightingForeground3, editorBracketHighlightingForeground4, editorBracketHighlightingForeground5, editorBracketHighlightingForeground6, editorBracketHighlightingUnexpectedBracketForeground } from '../../core/editorColorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nexport class ColorizedBracketPairsDecorationProvider extends Disposable {\n  constructor(textModel) {\n    super();\n    this.textModel = textModel;\n    this.colorProvider = new ColorProvider();\n    this.onDidChangeEmitter = new Emitter();\n    this.onDidChange = this.onDidChangeEmitter.event;\n    this.colorizationOptions = textModel.getOptions().bracketPairColorizationOptions;\n    this._register(textModel.bracketPairs.onDidChange(e => {\n      this.onDidChangeEmitter.fire();\n    }));\n  }\n  //#region TextModel events\n  handleDidChangeOptions(e) {\n    this.colorizationOptions = this.textModel.getOptions().bracketPairColorizationOptions;\n  }\n  //#endregion\n  getDecorationsInRange(range, ownerId, filterOutValidation, onlyMinimapDecorations) {\n    if (onlyMinimapDecorations) {\n      // Bracket pair colorization decorations are not rendered in the minimap\n      return [];\n    }\n    if (ownerId === undefined) {\n      return [];\n    }\n    if (!this.colorizationOptions.enabled) {\n      return [];\n    }\n    const result = this.textModel.bracketPairs.getBracketsInRange(range, true).map(bracket => ({\n      id: `bracket${bracket.range.toString()}-${bracket.nestingLevel}`,\n      options: {\n        description: 'BracketPairColorization',\n        inlineClassName: this.colorProvider.getInlineClassName(bracket, this.colorizationOptions.independentColorPoolPerBracketType)\n      },\n      ownerId: 0,\n      range: bracket.range\n    })).toArray();\n    return result;\n  }\n  getAllDecorations(ownerId, filterOutValidation) {\n    if (ownerId === undefined) {\n      return [];\n    }\n    if (!this.colorizationOptions.enabled) {\n      return [];\n    }\n    return this.getDecorationsInRange(new Range(1, 1, this.textModel.getLineCount(), 1), ownerId, filterOutValidation);\n  }\n}\nclass ColorProvider {\n  constructor() {\n    this.unexpectedClosingBracketClassName = 'unexpected-closing-bracket';\n  }\n  getInlineClassName(bracket, independentColorPoolPerBracketType) {\n    if (bracket.isInvalid) {\n      return this.unexpectedClosingBracketClassName;\n    }\n    return this.getInlineClassNameOfLevel(independentColorPoolPerBracketType ? bracket.nestingLevelOfEqualBracketType : bracket.nestingLevel);\n  }\n  getInlineClassNameOfLevel(level) {\n    // To support a dynamic amount of colors up to 6 colors,\n    // we use a number that is a lcm of all numbers from 1 to 6.\n    return `bracket-highlighting-${level % 30}`;\n  }\n}\nregisterThemingParticipant((theme, collector) => {\n  const colors = [editorBracketHighlightingForeground1, editorBracketHighlightingForeground2, editorBracketHighlightingForeground3, editorBracketHighlightingForeground4, editorBracketHighlightingForeground5, editorBracketHighlightingForeground6];\n  const colorProvider = new ColorProvider();\n  collector.addRule(`.monaco-editor .${colorProvider.unexpectedClosingBracketClassName} { color: ${theme.getColor(editorBracketHighlightingUnexpectedBracketForeground)}; }`);\n  const colorValues = colors.map(c => theme.getColor(c)).filter(c => !!c).filter(c => !c.isTransparent());\n  for (let level = 0; level < 30; level++) {\n    const color = colorValues[level % colorValues.length];\n    collector.addRule(`.monaco-editor .${colorProvider.getInlineClassNameOfLevel(level)} { color: ${color}; }`);\n  }\n});","map":{"version":3,"names":["Emitter","Disposable","Range","editorBracketHighlightingForeground1","editorBracketHighlightingForeground2","editorBracketHighlightingForeground3","editorBracketHighlightingForeground4","editorBracketHighlightingForeground5","editorBracketHighlightingForeground6","editorBracketHighlightingUnexpectedBracketForeground","registerThemingParticipant","ColorizedBracketPairsDecorationProvider","constructor","textModel","colorProvider","ColorProvider","onDidChangeEmitter","onDidChange","event","colorizationOptions","getOptions","bracketPairColorizationOptions","_register","bracketPairs","e","fire","handleDidChangeOptions","getDecorationsInRange","range","ownerId","filterOutValidation","onlyMinimapDecorations","undefined","enabled","result","getBracketsInRange","map","bracket","id","toString","nestingLevel","options","description","inlineClassName","getInlineClassName","independentColorPoolPerBracketType","toArray","getAllDecorations","getLineCount","unexpectedClosingBracketClassName","isInvalid","getInlineClassNameOfLevel","nestingLevelOfEqualBracketType","level","theme","collector","colors","addRule","getColor","colorValues","c","filter","isTransparent","color","length"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/colorizedBracketPairsDecorationProvider.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../core/range.js';\nimport { editorBracketHighlightingForeground1, editorBracketHighlightingForeground2, editorBracketHighlightingForeground3, editorBracketHighlightingForeground4, editorBracketHighlightingForeground5, editorBracketHighlightingForeground6, editorBracketHighlightingUnexpectedBracketForeground } from '../../core/editorColorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nexport class ColorizedBracketPairsDecorationProvider extends Disposable {\n    constructor(textModel) {\n        super();\n        this.textModel = textModel;\n        this.colorProvider = new ColorProvider();\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        this.colorizationOptions = textModel.getOptions().bracketPairColorizationOptions;\n        this._register(textModel.bracketPairs.onDidChange(e => {\n            this.onDidChangeEmitter.fire();\n        }));\n    }\n    //#region TextModel events\n    handleDidChangeOptions(e) {\n        this.colorizationOptions = this.textModel.getOptions().bracketPairColorizationOptions;\n    }\n    //#endregion\n    getDecorationsInRange(range, ownerId, filterOutValidation, onlyMinimapDecorations) {\n        if (onlyMinimapDecorations) {\n            // Bracket pair colorization decorations are not rendered in the minimap\n            return [];\n        }\n        if (ownerId === undefined) {\n            return [];\n        }\n        if (!this.colorizationOptions.enabled) {\n            return [];\n        }\n        const result = this.textModel.bracketPairs.getBracketsInRange(range, true).map(bracket => ({\n            id: `bracket${bracket.range.toString()}-${bracket.nestingLevel}`,\n            options: {\n                description: 'BracketPairColorization',\n                inlineClassName: this.colorProvider.getInlineClassName(bracket, this.colorizationOptions.independentColorPoolPerBracketType),\n            },\n            ownerId: 0,\n            range: bracket.range,\n        })).toArray();\n        return result;\n    }\n    getAllDecorations(ownerId, filterOutValidation) {\n        if (ownerId === undefined) {\n            return [];\n        }\n        if (!this.colorizationOptions.enabled) {\n            return [];\n        }\n        return this.getDecorationsInRange(new Range(1, 1, this.textModel.getLineCount(), 1), ownerId, filterOutValidation);\n    }\n}\nclass ColorProvider {\n    constructor() {\n        this.unexpectedClosingBracketClassName = 'unexpected-closing-bracket';\n    }\n    getInlineClassName(bracket, independentColorPoolPerBracketType) {\n        if (bracket.isInvalid) {\n            return this.unexpectedClosingBracketClassName;\n        }\n        return this.getInlineClassNameOfLevel(independentColorPoolPerBracketType ? bracket.nestingLevelOfEqualBracketType : bracket.nestingLevel);\n    }\n    getInlineClassNameOfLevel(level) {\n        // To support a dynamic amount of colors up to 6 colors,\n        // we use a number that is a lcm of all numbers from 1 to 6.\n        return `bracket-highlighting-${level % 30}`;\n    }\n}\nregisterThemingParticipant((theme, collector) => {\n    const colors = [\n        editorBracketHighlightingForeground1,\n        editorBracketHighlightingForeground2,\n        editorBracketHighlightingForeground3,\n        editorBracketHighlightingForeground4,\n        editorBracketHighlightingForeground5,\n        editorBracketHighlightingForeground6\n    ];\n    const colorProvider = new ColorProvider();\n    collector.addRule(`.monaco-editor .${colorProvider.unexpectedClosingBracketClassName} { color: ${theme.getColor(editorBracketHighlightingUnexpectedBracketForeground)}; }`);\n    const colorValues = colors\n        .map(c => theme.getColor(c))\n        .filter((c) => !!c)\n        .filter(c => !c.isTransparent());\n    for (let level = 0; level < 30; level++) {\n        const color = colorValues[level % colorValues.length];\n        collector.addRule(`.monaco-editor .${colorProvider.getInlineClassNameOfLevel(level)} { color: ${color}; }`);\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}