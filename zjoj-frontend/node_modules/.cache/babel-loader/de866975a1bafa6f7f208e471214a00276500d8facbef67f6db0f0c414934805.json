{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar SmartSelectController_1;\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { BracketSelectionRangeProvider } from './bracketSelections.js';\nimport { WordSelectionRangeProvider } from './wordSelections.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nclass SelectionRanges {\n  constructor(index, ranges) {\n    this.index = index;\n    this.ranges = ranges;\n  }\n  mov(fwd) {\n    const index = this.index + (fwd ? 1 : -1);\n    if (index < 0 || index >= this.ranges.length) {\n      return this;\n    }\n    const res = new SelectionRanges(index, this.ranges);\n    if (res.ranges[index].equalsRange(this.ranges[this.index])) {\n      // next range equals this range, retry with next-next\n      return res.mov(fwd);\n    }\n    return res;\n  }\n}\nlet SmartSelectController = SmartSelectController_1 = class SmartSelectController {\n  static get(editor) {\n    return editor.getContribution(SmartSelectController_1.ID);\n  }\n  constructor(_editor, _languageFeaturesService) {\n    this._editor = _editor;\n    this._languageFeaturesService = _languageFeaturesService;\n    this._ignoreSelection = false;\n  }\n  dispose() {\n    var _a;\n    (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n  }\n  async run(forward) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    const selections = this._editor.getSelections();\n    const model = this._editor.getModel();\n    if (!this._state) {\n      await provideSelectionRanges(this._languageFeaturesService.selectionRangeProvider, model, selections.map(s => s.getPosition()), this._editor.getOption(112 /* EditorOption.smartSelect */), CancellationToken.None).then(ranges => {\n        var _a;\n        if (!arrays.isNonEmptyArray(ranges) || ranges.length !== selections.length) {\n          // invalid result\n          return;\n        }\n        if (!this._editor.hasModel() || !arrays.equals(this._editor.getSelections(), selections, (a, b) => a.equalsSelection(b))) {\n          // invalid editor state\n          return;\n        }\n        for (let i = 0; i < ranges.length; i++) {\n          ranges[i] = ranges[i].filter(range => {\n            // filter ranges inside the selection\n            return range.containsPosition(selections[i].getStartPosition()) && range.containsPosition(selections[i].getEndPosition());\n          });\n          // prepend current selection\n          ranges[i].unshift(selections[i]);\n        }\n        this._state = ranges.map(ranges => new SelectionRanges(0, ranges));\n        // listen to caret move and forget about state\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._selectionListener = this._editor.onDidChangeCursorPosition(() => {\n          var _a;\n          if (!this._ignoreSelection) {\n            (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n            this._state = undefined;\n          }\n        });\n      });\n    }\n    if (!this._state) {\n      // no state\n      return;\n    }\n    this._state = this._state.map(state => state.mov(forward));\n    const newSelections = this._state.map(state => Selection.fromPositions(state.ranges[state.index].getStartPosition(), state.ranges[state.index].getEndPosition()));\n    this._ignoreSelection = true;\n    try {\n      this._editor.setSelections(newSelections);\n    } finally {\n      this._ignoreSelection = false;\n    }\n  }\n};\nSmartSelectController.ID = 'editor.contrib.smartSelectController';\nSmartSelectController = SmartSelectController_1 = __decorate([__param(1, ILanguageFeaturesService)], SmartSelectController);\nexport { SmartSelectController };\nclass AbstractSmartSelect extends EditorAction {\n  constructor(forward, opts) {\n    super(opts);\n    this._forward = forward;\n  }\n  async run(_accessor, editor) {\n    const controller = SmartSelectController.get(editor);\n    if (controller) {\n      await controller.run(this._forward);\n    }\n  }\n}\nclass GrowSelectionAction extends AbstractSmartSelect {\n  constructor() {\n    super(true, {\n      id: 'editor.action.smartSelect.expand',\n      label: nls.localize('smartSelect.expand', \"Expand Selection\"),\n      alias: 'Expand Selection',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */,\n        mac: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */,\n          secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */]\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '1_basic',\n        title: nls.localize({\n          key: 'miSmartSelectGrow',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Expand Selection\"),\n        order: 2\n      }\n    });\n  }\n}\n// renamed command id\nCommandsRegistry.registerCommandAlias('editor.action.smartSelect.grow', 'editor.action.smartSelect.expand');\nclass ShrinkSelectionAction extends AbstractSmartSelect {\n  constructor() {\n    super(false, {\n      id: 'editor.action.smartSelect.shrink',\n      label: nls.localize('smartSelect.shrink', \"Shrink Selection\"),\n      alias: 'Shrink Selection',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */,\n        mac: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */,\n          secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */]\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '1_basic',\n        title: nls.localize({\n          key: 'miSmartSelectShrink',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Shrink Selection\"),\n        order: 3\n      }\n    });\n  }\n}\nregisterEditorContribution(SmartSelectController.ID, SmartSelectController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(GrowSelectionAction);\nregisterEditorAction(ShrinkSelectionAction);\nexport async function provideSelectionRanges(registry, model, positions, options, token) {\n  const providers = registry.all(model).concat(new WordSelectionRangeProvider(options.selectSubwords)); // ALWAYS have word based selection range\n  if (providers.length === 1) {\n    // add word selection and bracket selection when no provider exists\n    providers.unshift(new BracketSelectionRangeProvider());\n  }\n  const work = [];\n  const allRawRanges = [];\n  for (const provider of providers) {\n    work.push(Promise.resolve(provider.provideSelectionRanges(model, positions, token)).then(allProviderRanges => {\n      if (arrays.isNonEmptyArray(allProviderRanges) && allProviderRanges.length === positions.length) {\n        for (let i = 0; i < positions.length; i++) {\n          if (!allRawRanges[i]) {\n            allRawRanges[i] = [];\n          }\n          for (const oneProviderRanges of allProviderRanges[i]) {\n            if (Range.isIRange(oneProviderRanges.range) && Range.containsPosition(oneProviderRanges.range, positions[i])) {\n              allRawRanges[i].push(Range.lift(oneProviderRanges.range));\n            }\n          }\n        }\n      }\n    }, onUnexpectedExternalError));\n  }\n  await Promise.all(work);\n  return allRawRanges.map(oneRawRanges => {\n    if (oneRawRanges.length === 0) {\n      return [];\n    }\n    // sort all by start/end position\n    oneRawRanges.sort((a, b) => {\n      if (Position.isBefore(a.getStartPosition(), b.getStartPosition())) {\n        return 1;\n      } else if (Position.isBefore(b.getStartPosition(), a.getStartPosition())) {\n        return -1;\n      } else if (Position.isBefore(a.getEndPosition(), b.getEndPosition())) {\n        return -1;\n      } else if (Position.isBefore(b.getEndPosition(), a.getEndPosition())) {\n        return 1;\n      } else {\n        return 0;\n      }\n    });\n    // remove ranges that don't contain the former range or that are equal to the\n    // former range\n    const oneRanges = [];\n    let last;\n    for (const range of oneRawRanges) {\n      if (!last || Range.containsRange(range, last) && !Range.equalsRange(range, last)) {\n        oneRanges.push(range);\n        last = range;\n      }\n    }\n    if (!options.selectLeadingAndTrailingWhitespace) {\n      return oneRanges;\n    }\n    // add ranges that expand trivia at line starts and ends whenever a range\n    // wraps onto the a new line\n    const oneRangesWithTrivia = [oneRanges[0]];\n    for (let i = 1; i < oneRanges.length; i++) {\n      const prev = oneRanges[i - 1];\n      const cur = oneRanges[i];\n      if (cur.startLineNumber !== prev.startLineNumber || cur.endLineNumber !== prev.endLineNumber) {\n        // add line/block range without leading/failing whitespace\n        const rangeNoWhitespace = new Range(prev.startLineNumber, model.getLineFirstNonWhitespaceColumn(prev.startLineNumber), prev.endLineNumber, model.getLineLastNonWhitespaceColumn(prev.endLineNumber));\n        if (rangeNoWhitespace.containsRange(prev) && !rangeNoWhitespace.equalsRange(prev) && cur.containsRange(rangeNoWhitespace) && !cur.equalsRange(rangeNoWhitespace)) {\n          oneRangesWithTrivia.push(rangeNoWhitespace);\n        }\n        // add line/block range\n        const rangeFull = new Range(prev.startLineNumber, 1, prev.endLineNumber, model.getLineMaxColumn(prev.endLineNumber));\n        if (rangeFull.containsRange(prev) && !rangeFull.equalsRange(rangeNoWhitespace) && cur.containsRange(rangeFull) && !cur.equalsRange(rangeFull)) {\n          oneRangesWithTrivia.push(rangeFull);\n        }\n      }\n      oneRangesWithTrivia.push(cur);\n    }\n    return oneRangesWithTrivia;\n  });\n}\nCommandsRegistry.registerCommand('_executeSelectionRangeProvider', async function (accessor, ...args) {\n  const [resource, positions] = args;\n  assertType(URI.isUri(resource));\n  const registry = accessor.get(ILanguageFeaturesService).selectionRangeProvider;\n  const reference = await accessor.get(ITextModelService).createModelReference(resource);\n  try {\n    return provideSelectionRanges(registry, reference.object.textEditorModel, positions, {\n      selectLeadingAndTrailingWhitespace: true,\n      selectSubwords: true\n    }, CancellationToken.None);\n  } finally {\n    reference.dispose();\n  }\n});","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","SmartSelectController_1","arrays","CancellationToken","onUnexpectedExternalError","EditorAction","registerEditorAction","registerEditorContribution","Position","Range","Selection","EditorContextKeys","BracketSelectionRangeProvider","WordSelectionRangeProvider","nls","MenuId","CommandsRegistry","ILanguageFeaturesService","ITextModelService","assertType","URI","SelectionRanges","constructor","index","ranges","mov","fwd","res","equalsRange","SmartSelectController","get","editor","getContribution","ID","_editor","_languageFeaturesService","_ignoreSelection","dispose","_a","_selectionListener","run","forward","hasModel","selections","getSelections","model","getModel","_state","provideSelectionRanges","selectionRangeProvider","map","s","getPosition","getOption","None","then","isNonEmptyArray","equals","a","b","equalsSelection","filter","range","containsPosition","getStartPosition","getEndPosition","unshift","onDidChangeCursorPosition","undefined","state","newSelections","fromPositions","setSelections","AbstractSmartSelect","opts","_forward","_accessor","controller","GrowSelectionAction","id","label","localize","alias","precondition","kbOpts","kbExpr","editorTextFocus","primary","mac","secondary","weight","menuOpts","menuId","MenubarSelectionMenu","group","title","comment","order","registerCommandAlias","ShrinkSelectionAction","registry","positions","options","token","providers","all","concat","selectSubwords","work","allRawRanges","provider","push","Promise","resolve","allProviderRanges","oneProviderRanges","isIRange","lift","oneRawRanges","sort","isBefore","oneRanges","last","containsRange","selectLeadingAndTrailingWhitespace","oneRangesWithTrivia","prev","cur","startLineNumber","endLineNumber","rangeNoWhitespace","getLineFirstNonWhitespaceColumn","getLineLastNonWhitespaceColumn","rangeFull","getLineMaxColumn","registerCommand","accessor","args","resource","isUri","reference","createModelReference","object","textEditorModel"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/smartSelect.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar SmartSelectController_1;\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { BracketSelectionRangeProvider } from './bracketSelections.js';\nimport { WordSelectionRangeProvider } from './wordSelections.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nclass SelectionRanges {\n    constructor(index, ranges) {\n        this.index = index;\n        this.ranges = ranges;\n    }\n    mov(fwd) {\n        const index = this.index + (fwd ? 1 : -1);\n        if (index < 0 || index >= this.ranges.length) {\n            return this;\n        }\n        const res = new SelectionRanges(index, this.ranges);\n        if (res.ranges[index].equalsRange(this.ranges[this.index])) {\n            // next range equals this range, retry with next-next\n            return res.mov(fwd);\n        }\n        return res;\n    }\n}\nlet SmartSelectController = SmartSelectController_1 = class SmartSelectController {\n    static get(editor) {\n        return editor.getContribution(SmartSelectController_1.ID);\n    }\n    constructor(_editor, _languageFeaturesService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._ignoreSelection = false;\n    }\n    dispose() {\n        var _a;\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    async run(forward) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const selections = this._editor.getSelections();\n        const model = this._editor.getModel();\n        if (!this._state) {\n            await provideSelectionRanges(this._languageFeaturesService.selectionRangeProvider, model, selections.map(s => s.getPosition()), this._editor.getOption(112 /* EditorOption.smartSelect */), CancellationToken.None).then(ranges => {\n                var _a;\n                if (!arrays.isNonEmptyArray(ranges) || ranges.length !== selections.length) {\n                    // invalid result\n                    return;\n                }\n                if (!this._editor.hasModel() || !arrays.equals(this._editor.getSelections(), selections, (a, b) => a.equalsSelection(b))) {\n                    // invalid editor state\n                    return;\n                }\n                for (let i = 0; i < ranges.length; i++) {\n                    ranges[i] = ranges[i].filter(range => {\n                        // filter ranges inside the selection\n                        return range.containsPosition(selections[i].getStartPosition()) && range.containsPosition(selections[i].getEndPosition());\n                    });\n                    // prepend current selection\n                    ranges[i].unshift(selections[i]);\n                }\n                this._state = ranges.map(ranges => new SelectionRanges(0, ranges));\n                // listen to caret move and forget about state\n                (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                this._selectionListener = this._editor.onDidChangeCursorPosition(() => {\n                    var _a;\n                    if (!this._ignoreSelection) {\n                        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                        this._state = undefined;\n                    }\n                });\n            });\n        }\n        if (!this._state) {\n            // no state\n            return;\n        }\n        this._state = this._state.map(state => state.mov(forward));\n        const newSelections = this._state.map(state => Selection.fromPositions(state.ranges[state.index].getStartPosition(), state.ranges[state.index].getEndPosition()));\n        this._ignoreSelection = true;\n        try {\n            this._editor.setSelections(newSelections);\n        }\n        finally {\n            this._ignoreSelection = false;\n        }\n    }\n};\nSmartSelectController.ID = 'editor.contrib.smartSelectController';\nSmartSelectController = SmartSelectController_1 = __decorate([\n    __param(1, ILanguageFeaturesService)\n], SmartSelectController);\nexport { SmartSelectController };\nclass AbstractSmartSelect extends EditorAction {\n    constructor(forward, opts) {\n        super(opts);\n        this._forward = forward;\n    }\n    async run(_accessor, editor) {\n        const controller = SmartSelectController.get(editor);\n        if (controller) {\n            await controller.run(this._forward);\n        }\n    }\n}\nclass GrowSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(true, {\n            id: 'editor.action.smartSelect.expand',\n            label: nls.localize('smartSelect.expand', \"Expand Selection\"),\n            alias: 'Expand Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */,\n                    secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */],\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectGrow', comment: ['&& denotes a mnemonic'] }, \"&&Expand Selection\"),\n                order: 2\n            }\n        });\n    }\n}\n// renamed command id\nCommandsRegistry.registerCommandAlias('editor.action.smartSelect.grow', 'editor.action.smartSelect.expand');\nclass ShrinkSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(false, {\n            id: 'editor.action.smartSelect.shrink',\n            label: nls.localize('smartSelect.shrink', \"Shrink Selection\"),\n            alias: 'Shrink Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */,\n                    secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */],\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectShrink', comment: ['&& denotes a mnemonic'] }, \"&&Shrink Selection\"),\n                order: 3\n            }\n        });\n    }\n}\nregisterEditorContribution(SmartSelectController.ID, SmartSelectController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(GrowSelectionAction);\nregisterEditorAction(ShrinkSelectionAction);\nexport async function provideSelectionRanges(registry, model, positions, options, token) {\n    const providers = registry.all(model)\n        .concat(new WordSelectionRangeProvider(options.selectSubwords)); // ALWAYS have word based selection range\n    if (providers.length === 1) {\n        // add word selection and bracket selection when no provider exists\n        providers.unshift(new BracketSelectionRangeProvider());\n    }\n    const work = [];\n    const allRawRanges = [];\n    for (const provider of providers) {\n        work.push(Promise.resolve(provider.provideSelectionRanges(model, positions, token)).then(allProviderRanges => {\n            if (arrays.isNonEmptyArray(allProviderRanges) && allProviderRanges.length === positions.length) {\n                for (let i = 0; i < positions.length; i++) {\n                    if (!allRawRanges[i]) {\n                        allRawRanges[i] = [];\n                    }\n                    for (const oneProviderRanges of allProviderRanges[i]) {\n                        if (Range.isIRange(oneProviderRanges.range) && Range.containsPosition(oneProviderRanges.range, positions[i])) {\n                            allRawRanges[i].push(Range.lift(oneProviderRanges.range));\n                        }\n                    }\n                }\n            }\n        }, onUnexpectedExternalError));\n    }\n    await Promise.all(work);\n    return allRawRanges.map(oneRawRanges => {\n        if (oneRawRanges.length === 0) {\n            return [];\n        }\n        // sort all by start/end position\n        oneRawRanges.sort((a, b) => {\n            if (Position.isBefore(a.getStartPosition(), b.getStartPosition())) {\n                return 1;\n            }\n            else if (Position.isBefore(b.getStartPosition(), a.getStartPosition())) {\n                return -1;\n            }\n            else if (Position.isBefore(a.getEndPosition(), b.getEndPosition())) {\n                return -1;\n            }\n            else if (Position.isBefore(b.getEndPosition(), a.getEndPosition())) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        });\n        // remove ranges that don't contain the former range or that are equal to the\n        // former range\n        const oneRanges = [];\n        let last;\n        for (const range of oneRawRanges) {\n            if (!last || (Range.containsRange(range, last) && !Range.equalsRange(range, last))) {\n                oneRanges.push(range);\n                last = range;\n            }\n        }\n        if (!options.selectLeadingAndTrailingWhitespace) {\n            return oneRanges;\n        }\n        // add ranges that expand trivia at line starts and ends whenever a range\n        // wraps onto the a new line\n        const oneRangesWithTrivia = [oneRanges[0]];\n        for (let i = 1; i < oneRanges.length; i++) {\n            const prev = oneRanges[i - 1];\n            const cur = oneRanges[i];\n            if (cur.startLineNumber !== prev.startLineNumber || cur.endLineNumber !== prev.endLineNumber) {\n                // add line/block range without leading/failing whitespace\n                const rangeNoWhitespace = new Range(prev.startLineNumber, model.getLineFirstNonWhitespaceColumn(prev.startLineNumber), prev.endLineNumber, model.getLineLastNonWhitespaceColumn(prev.endLineNumber));\n                if (rangeNoWhitespace.containsRange(prev) && !rangeNoWhitespace.equalsRange(prev) && cur.containsRange(rangeNoWhitespace) && !cur.equalsRange(rangeNoWhitespace)) {\n                    oneRangesWithTrivia.push(rangeNoWhitespace);\n                }\n                // add line/block range\n                const rangeFull = new Range(prev.startLineNumber, 1, prev.endLineNumber, model.getLineMaxColumn(prev.endLineNumber));\n                if (rangeFull.containsRange(prev) && !rangeFull.equalsRange(rangeNoWhitespace) && cur.containsRange(rangeFull) && !cur.equalsRange(rangeFull)) {\n                    oneRangesWithTrivia.push(rangeFull);\n                }\n            }\n            oneRangesWithTrivia.push(cur);\n        }\n        return oneRangesWithTrivia;\n    });\n}\nCommandsRegistry.registerCommand('_executeSelectionRangeProvider', async function (accessor, ...args) {\n    const [resource, positions] = args;\n    assertType(URI.isUri(resource));\n    const registry = accessor.get(ILanguageFeaturesService).selectionRangeProvider;\n    const reference = await accessor.get(ITextModelService).createModelReference(resource);\n    try {\n        return provideSelectionRanges(registry, reference.object.textEditorModel, positions, { selectLeadingAndTrailingWhitespace: true, selectSubwords: true }, CancellationToken.None);\n    }\n    finally {\n        reference.dispose();\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}