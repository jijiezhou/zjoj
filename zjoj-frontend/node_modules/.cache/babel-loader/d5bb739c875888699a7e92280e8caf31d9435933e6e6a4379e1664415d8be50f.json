{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Action, Separator } from '../../../../base/common/actions.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { DefinitionAction, SymbolNavigationAction, SymbolNavigationAnchor } from '../../gotoSymbol/browser/goToCommands.js';\nimport { PeekContext } from '../../peekView/browser/peekView.js';\nimport { isIMenuItem, MenuId, MenuItemAction, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nexport async function showGoToContextMenu(accessor, editor, anchor, part) {\n  var _a;\n  const resolverService = accessor.get(ITextModelService);\n  const contextMenuService = accessor.get(IContextMenuService);\n  const commandService = accessor.get(ICommandService);\n  const instaService = accessor.get(IInstantiationService);\n  const notificationService = accessor.get(INotificationService);\n  await part.item.resolve(CancellationToken.None);\n  if (!part.part.location) {\n    return;\n  }\n  const location = part.part.location;\n  const menuActions = [];\n  // from all registered (not active) context menu actions select those\n  // that are a symbol navigation actions\n  const filter = new Set(MenuRegistry.getMenuItems(MenuId.EditorContext).map(item => isIMenuItem(item) ? item.command.id : generateUuid()));\n  for (const delegate of SymbolNavigationAction.all()) {\n    if (filter.has(delegate.desc.id)) {\n      menuActions.push(new Action(delegate.desc.id, MenuItemAction.label(delegate.desc, {\n        renderShortTitle: true\n      }), undefined, true, async () => {\n        const ref = await resolverService.createModelReference(location.uri);\n        try {\n          const symbolAnchor = new SymbolNavigationAnchor(ref.object.textEditorModel, Range.getStartPosition(location.range));\n          const range = part.item.anchor.range;\n          await instaService.invokeFunction(delegate.runEditorCommand.bind(delegate), editor, symbolAnchor, range);\n        } finally {\n          ref.dispose();\n        }\n      }));\n    }\n  }\n  if (part.part.command) {\n    const {\n      command\n    } = part.part;\n    menuActions.push(new Separator());\n    menuActions.push(new Action(command.id, command.title, undefined, true, async () => {\n      var _a;\n      try {\n        await commandService.executeCommand(command.id, ...((_a = command.arguments) !== null && _a !== void 0 ? _a : []));\n      } catch (err) {\n        notificationService.notify({\n          severity: Severity.Error,\n          source: part.item.provider.displayName,\n          message: err\n        });\n      }\n    }));\n  }\n  // show context menu\n  const useShadowDOM = editor.getOption(126 /* EditorOption.useShadowDOM */);\n  contextMenuService.showContextMenu({\n    domForShadowRoot: useShadowDOM ? (_a = editor.getDomNode()) !== null && _a !== void 0 ? _a : undefined : undefined,\n    getAnchor: () => {\n      const box = dom.getDomNodePagePosition(anchor);\n      return {\n        x: box.left,\n        y: box.top + box.height + 8\n      };\n    },\n    getActions: () => menuActions,\n    onHide: () => {\n      editor.focus();\n    },\n    autoSelectFirstItem: true\n  });\n}\nexport async function goToDefinitionWithLocation(accessor, event, editor, location) {\n  const resolverService = accessor.get(ITextModelService);\n  const ref = await resolverService.createModelReference(location.uri);\n  await editor.invokeWithinContext(async accessor => {\n    const openToSide = event.hasSideBySideModifier;\n    const contextKeyService = accessor.get(IContextKeyService);\n    const isInPeek = PeekContext.inPeekEditor.getValue(contextKeyService);\n    const canPeek = !openToSide && editor.getOption(87 /* EditorOption.definitionLinkOpensInPeek */) && !isInPeek;\n    const action = new DefinitionAction({\n      openToSide,\n      openInPeek: canPeek,\n      muteMessage: true\n    }, {\n      title: {\n        value: '',\n        original: ''\n      },\n      id: '',\n      precondition: undefined\n    });\n    return action.run(accessor, new SymbolNavigationAnchor(ref.object.textEditorModel, Range.getStartPosition(location.range)), Range.lift(location.range));\n  });\n  ref.dispose();\n}","map":{"version":3,"names":["dom","Action","Separator","CancellationToken","generateUuid","Range","ITextModelService","DefinitionAction","SymbolNavigationAction","SymbolNavigationAnchor","PeekContext","isIMenuItem","MenuId","MenuItemAction","MenuRegistry","ICommandService","IContextKeyService","IContextMenuService","IInstantiationService","INotificationService","Severity","showGoToContextMenu","accessor","editor","anchor","part","_a","resolverService","get","contextMenuService","commandService","instaService","notificationService","item","resolve","None","location","menuActions","filter","Set","getMenuItems","EditorContext","map","command","id","delegate","all","has","desc","push","label","renderShortTitle","undefined","ref","createModelReference","uri","symbolAnchor","object","textEditorModel","getStartPosition","range","invokeFunction","runEditorCommand","bind","dispose","title","executeCommand","arguments","err","notify","severity","Error","source","provider","displayName","message","useShadowDOM","getOption","showContextMenu","domForShadowRoot","getDomNode","getAnchor","box","getDomNodePagePosition","x","left","y","top","height","getActions","onHide","focus","autoSelectFirstItem","goToDefinitionWithLocation","event","invokeWithinContext","openToSide","hasSideBySideModifier","contextKeyService","isInPeek","inPeekEditor","getValue","canPeek","action","openInPeek","muteMessage","value","original","precondition","run","lift"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsLocations.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Action, Separator } from '../../../../base/common/actions.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { DefinitionAction, SymbolNavigationAction, SymbolNavigationAnchor } from '../../gotoSymbol/browser/goToCommands.js';\nimport { PeekContext } from '../../peekView/browser/peekView.js';\nimport { isIMenuItem, MenuId, MenuItemAction, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nexport async function showGoToContextMenu(accessor, editor, anchor, part) {\n    var _a;\n    const resolverService = accessor.get(ITextModelService);\n    const contextMenuService = accessor.get(IContextMenuService);\n    const commandService = accessor.get(ICommandService);\n    const instaService = accessor.get(IInstantiationService);\n    const notificationService = accessor.get(INotificationService);\n    await part.item.resolve(CancellationToken.None);\n    if (!part.part.location) {\n        return;\n    }\n    const location = part.part.location;\n    const menuActions = [];\n    // from all registered (not active) context menu actions select those\n    // that are a symbol navigation actions\n    const filter = new Set(MenuRegistry.getMenuItems(MenuId.EditorContext)\n        .map(item => isIMenuItem(item) ? item.command.id : generateUuid()));\n    for (const delegate of SymbolNavigationAction.all()) {\n        if (filter.has(delegate.desc.id)) {\n            menuActions.push(new Action(delegate.desc.id, MenuItemAction.label(delegate.desc, { renderShortTitle: true }), undefined, true, async () => {\n                const ref = await resolverService.createModelReference(location.uri);\n                try {\n                    const symbolAnchor = new SymbolNavigationAnchor(ref.object.textEditorModel, Range.getStartPosition(location.range));\n                    const range = part.item.anchor.range;\n                    await instaService.invokeFunction(delegate.runEditorCommand.bind(delegate), editor, symbolAnchor, range);\n                }\n                finally {\n                    ref.dispose();\n                }\n            }));\n        }\n    }\n    if (part.part.command) {\n        const { command } = part.part;\n        menuActions.push(new Separator());\n        menuActions.push(new Action(command.id, command.title, undefined, true, async () => {\n            var _a;\n            try {\n                await commandService.executeCommand(command.id, ...((_a = command.arguments) !== null && _a !== void 0 ? _a : []));\n            }\n            catch (err) {\n                notificationService.notify({\n                    severity: Severity.Error,\n                    source: part.item.provider.displayName,\n                    message: err\n                });\n            }\n        }));\n    }\n    // show context menu\n    const useShadowDOM = editor.getOption(126 /* EditorOption.useShadowDOM */);\n    contextMenuService.showContextMenu({\n        domForShadowRoot: useShadowDOM ? (_a = editor.getDomNode()) !== null && _a !== void 0 ? _a : undefined : undefined,\n        getAnchor: () => {\n            const box = dom.getDomNodePagePosition(anchor);\n            return { x: box.left, y: box.top + box.height + 8 };\n        },\n        getActions: () => menuActions,\n        onHide: () => {\n            editor.focus();\n        },\n        autoSelectFirstItem: true,\n    });\n}\nexport async function goToDefinitionWithLocation(accessor, event, editor, location) {\n    const resolverService = accessor.get(ITextModelService);\n    const ref = await resolverService.createModelReference(location.uri);\n    await editor.invokeWithinContext(async (accessor) => {\n        const openToSide = event.hasSideBySideModifier;\n        const contextKeyService = accessor.get(IContextKeyService);\n        const isInPeek = PeekContext.inPeekEditor.getValue(contextKeyService);\n        const canPeek = !openToSide && editor.getOption(87 /* EditorOption.definitionLinkOpensInPeek */) && !isInPeek;\n        const action = new DefinitionAction({ openToSide, openInPeek: canPeek, muteMessage: true }, { title: { value: '', original: '' }, id: '', precondition: undefined });\n        return action.run(accessor, new SymbolNavigationAnchor(ref.object.textEditorModel, Range.getStartPosition(location.range)), Range.lift(location.range));\n    });\n    ref.dispose();\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}