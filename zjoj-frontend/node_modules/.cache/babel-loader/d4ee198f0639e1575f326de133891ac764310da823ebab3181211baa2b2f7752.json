{"ast":null,"code":"import { ref } from \"vue\";\nimport { on, off } from \"../../_utils/dom.js\";\nconst useDraggable = ({\n  modalRef,\n  wrapperRef,\n  draggable,\n  alignCenter\n}) => {\n  const isDragging = ref(false);\n  const startMouse = ref([0, 0]);\n  const initialPosition = ref([0, 0]);\n  const position = ref();\n  const minPosition = ref([0, 0]);\n  const maxPosition = ref([0, 0]);\n  const getInitialPosition = () => {\n    var _a, _b, _c;\n    if (wrapperRef.value && modalRef.value) {\n      const {\n        top: wrapperTop,\n        left: wrapperLeft\n      } = wrapperRef.value.getBoundingClientRect();\n      const {\n        clientWidth: wrapperWidth,\n        clientHeight: wrapperHeight\n      } = wrapperRef.value;\n      const {\n        top,\n        left,\n        width,\n        height\n      } = modalRef.value.getBoundingClientRect();\n      const offsetTop = alignCenter.value ? 0 : (_a = modalRef.value) == null ? void 0 : _a.offsetTop;\n      const initialX = left - wrapperLeft;\n      const initialY = top - wrapperTop - offsetTop;\n      if (initialX !== ((_b = initialPosition.value) == null ? void 0 : _b[0]) || initialY !== ((_c = initialPosition.value) == null ? void 0 : _c[1])) {\n        initialPosition.value = [initialX, initialY];\n      }\n      const maxX = wrapperWidth > width ? wrapperWidth - width : 0;\n      const maxY = wrapperHeight > height ? wrapperHeight - height - offsetTop : 0;\n      if (maxX !== maxPosition.value[0] || maxY !== maxPosition.value[1]) {\n        maxPosition.value = [maxX, maxY];\n      }\n      if (offsetTop) {\n        minPosition.value = [0, 0 - offsetTop];\n      }\n    }\n  };\n  const handleMoveDown = ev => {\n    if (draggable.value) {\n      ev.preventDefault();\n      isDragging.value = true;\n      getInitialPosition();\n      startMouse.value = [ev.x, ev.y];\n      on(window, \"mousemove\", handleMouseMove);\n      on(window, \"mouseup\", handleMouseUp);\n      on(window, \"contextmenu\", handleMouseUp);\n    }\n  };\n  const handleMouseMove = ev => {\n    if (isDragging.value) {\n      const diffX = ev.x - startMouse.value[0];\n      const diffY = ev.y - startMouse.value[1];\n      let x = initialPosition.value[0] + diffX;\n      let y = initialPosition.value[1] + diffY;\n      if (x < minPosition.value[0]) x = minPosition.value[0];\n      if (x > maxPosition.value[0]) x = maxPosition.value[0];\n      if (y < minPosition.value[1]) y = minPosition.value[1];\n      if (y > maxPosition.value[1]) y = maxPosition.value[1];\n      position.value = [x, y];\n    }\n  };\n  const handleMouseUp = () => {\n    isDragging.value = false;\n    off(window, \"mousemove\", handleMouseMove);\n    off(window, \"mouseup\", handleMouseUp);\n  };\n  return {\n    position,\n    handleMoveDown\n  };\n};\nexport { useDraggable };","map":{"version":3,"names":["ref","on","off","useDraggable","modalRef","wrapperRef","draggable","alignCenter","isDragging","startMouse","initialPosition","position","minPosition","maxPosition","getInitialPosition","_a","_b","_c","value","top","wrapperTop","left","wrapperLeft","getBoundingClientRect","clientWidth","wrapperWidth","clientHeight","wrapperHeight","width","height","offsetTop","initialX","initialY","maxX","maxY","handleMoveDown","ev","preventDefault","x","y","window","handleMouseMove","handleMouseUp","diffX","diffY"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/@arco-design/web-vue/es/modal/hooks/use-draggable.js"],"sourcesContent":["import { ref } from \"vue\";\nimport { on, off } from \"../../_utils/dom.js\";\nconst useDraggable = ({\n  modalRef,\n  wrapperRef,\n  draggable,\n  alignCenter\n}) => {\n  const isDragging = ref(false);\n  const startMouse = ref([0, 0]);\n  const initialPosition = ref([0, 0]);\n  const position = ref();\n  const minPosition = ref([0, 0]);\n  const maxPosition = ref([0, 0]);\n  const getInitialPosition = () => {\n    var _a, _b, _c;\n    if (wrapperRef.value && modalRef.value) {\n      const { top: wrapperTop, left: wrapperLeft } = wrapperRef.value.getBoundingClientRect();\n      const { clientWidth: wrapperWidth, clientHeight: wrapperHeight } = wrapperRef.value;\n      const { top, left, width, height } = modalRef.value.getBoundingClientRect();\n      const offsetTop = alignCenter.value ? 0 : (_a = modalRef.value) == null ? void 0 : _a.offsetTop;\n      const initialX = left - wrapperLeft;\n      const initialY = top - wrapperTop - offsetTop;\n      if (initialX !== ((_b = initialPosition.value) == null ? void 0 : _b[0]) || initialY !== ((_c = initialPosition.value) == null ? void 0 : _c[1])) {\n        initialPosition.value = [initialX, initialY];\n      }\n      const maxX = wrapperWidth > width ? wrapperWidth - width : 0;\n      const maxY = wrapperHeight > height ? wrapperHeight - height - offsetTop : 0;\n      if (maxX !== maxPosition.value[0] || maxY !== maxPosition.value[1]) {\n        maxPosition.value = [maxX, maxY];\n      }\n      if (offsetTop) {\n        minPosition.value = [0, 0 - offsetTop];\n      }\n    }\n  };\n  const handleMoveDown = (ev) => {\n    if (draggable.value) {\n      ev.preventDefault();\n      isDragging.value = true;\n      getInitialPosition();\n      startMouse.value = [ev.x, ev.y];\n      on(window, \"mousemove\", handleMouseMove);\n      on(window, \"mouseup\", handleMouseUp);\n      on(window, \"contextmenu\", handleMouseUp);\n    }\n  };\n  const handleMouseMove = (ev) => {\n    if (isDragging.value) {\n      const diffX = ev.x - startMouse.value[0];\n      const diffY = ev.y - startMouse.value[1];\n      let x = initialPosition.value[0] + diffX;\n      let y = initialPosition.value[1] + diffY;\n      if (x < minPosition.value[0])\n        x = minPosition.value[0];\n      if (x > maxPosition.value[0])\n        x = maxPosition.value[0];\n      if (y < minPosition.value[1])\n        y = minPosition.value[1];\n      if (y > maxPosition.value[1])\n        y = maxPosition.value[1];\n      position.value = [x, y];\n    }\n  };\n  const handleMouseUp = () => {\n    isDragging.value = false;\n    off(window, \"mousemove\", handleMouseMove);\n    off(window, \"mouseup\", handleMouseUp);\n  };\n  return {\n    position,\n    handleMoveDown\n  };\n};\nexport { useDraggable };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}