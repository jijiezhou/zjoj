{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { getWindow, h, scheduleAtNextAnimationFrame } from '../../../../base/browser/dom.js';\nimport { SmoothScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { findFirstMaxBy } from '../../../../base/common/arraysFind.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, derivedObservableWithCache, derivedWithStore, observableFromEvent, observableValue } from '../../../../base/common/observable.js';\nimport { disposableObservableValue, globalTransaction, transaction } from '../../../../base/common/observableInternal/base.js';\nimport { Scrollable } from '../../../../base/common/scrollable.js';\nimport './style.css';\nimport { ObservableElementSizeObserver } from '../diffEditor/utils.js';\nimport { OffsetRange } from '../../../common/core/offsetRange.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { DiffEditorItemTemplate, TemplateData } from './diffEditorItemTemplate.js';\nimport { ObjectPool } from './objectPool.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nlet MultiDiffEditorWidgetImpl = class MultiDiffEditorWidgetImpl extends Disposable {\n  constructor(_element, _dimension, _viewModel, _workbenchUIElementFactory, _parentContextKeyService, _parentInstantiationService) {\n    super();\n    this._element = _element;\n    this._dimension = _dimension;\n    this._viewModel = _viewModel;\n    this._workbenchUIElementFactory = _workbenchUIElementFactory;\n    this._parentContextKeyService = _parentContextKeyService;\n    this._parentInstantiationService = _parentInstantiationService;\n    this._elements = h('div', {\n      style: {\n        overflowY: 'hidden'\n      }\n    }, [h('div@content', {\n      style: {\n        overflow: 'hidden'\n      }\n    }), h('div.monaco-editor@overflowWidgetsDomNode', {})]);\n    this._sizeObserver = this._register(new ObservableElementSizeObserver(this._element, undefined));\n    this._objectPool = this._register(new ObjectPool(data => {\n      const template = this._instantiationService.createInstance(DiffEditorItemTemplate, this._elements.content, this._elements.overflowWidgetsDomNode, this._workbenchUIElementFactory);\n      template.setData(data);\n      return template;\n    }));\n    this._scrollable = this._register(new Scrollable({\n      forceIntegerValues: false,\n      scheduleAtNextAnimationFrame: cb => scheduleAtNextAnimationFrame(getWindow(this._element), cb),\n      smoothScrollDuration: 100\n    }));\n    this._scrollableElement = this._register(new SmoothScrollableElement(this._elements.root, {\n      vertical: 1 /* ScrollbarVisibility.Auto */,\n      horizontal: 1 /* ScrollbarVisibility.Auto */,\n      className: 'monaco-component',\n      useShadows: false\n    }, this._scrollable));\n    this.scrollTop = observableFromEvent(this._scrollableElement.onScroll, () => /** @description scrollTop */this._scrollableElement.getScrollPosition().scrollTop);\n    this.scrollLeft = observableFromEvent(this._scrollableElement.onScroll, () => /** @description scrollLeft */this._scrollableElement.getScrollPosition().scrollLeft);\n    this._viewItems = derivedWithStore(this, (reader, store) => {\n      const vm = this._viewModel.read(reader);\n      if (!vm) {\n        return [];\n      }\n      const items = vm.items.read(reader);\n      return items.map(d => store.add(new VirtualizedViewItem(d, this._objectPool, this.scrollLeft)));\n    });\n    this._totalHeight = this._viewItems.map(this, (items, reader) => items.reduce((r, i) => r + i.contentHeight.read(reader), 0));\n    this.activeDiffItem = derived(this, reader => this._viewItems.read(reader).find(i => {\n      var _a;\n      return (_a = i.template.read(reader)) === null || _a === void 0 ? void 0 : _a.isFocused.read(reader);\n    }));\n    this.lastActiveDiffItem = derivedObservableWithCache((reader, lastValue) => {\n      var _a;\n      return (_a = this.activeDiffItem.read(reader)) !== null && _a !== void 0 ? _a : lastValue;\n    });\n    this._contextKeyService = this._register(this._parentContextKeyService.createScoped(this._element));\n    this._instantiationService = this._parentInstantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n    this._contextKeyService.createKey(EditorContextKeys.inMultiDiffEditor.key, true);\n    const ctxAllCollapsed = this._parentContextKeyService.createKey(EditorContextKeys.multiDiffEditorAllCollapsed.key, false);\n    this._register(autorun(reader => {\n      const viewModel = this._viewModel.read(reader);\n      if (viewModel) {\n        const allCollapsed = viewModel.items.read(reader).every(item => item.collapsed.read(reader));\n        ctxAllCollapsed.set(allCollapsed);\n      }\n    }));\n    this._register(autorun(reader => {\n      const lastActiveDiffItem = this.lastActiveDiffItem.read(reader);\n      transaction(tx => {\n        var _a;\n        (_a = this._viewModel.read(reader)) === null || _a === void 0 ? void 0 : _a.activeDiffItem.set(lastActiveDiffItem === null || lastActiveDiffItem === void 0 ? void 0 : lastActiveDiffItem.viewModel, tx);\n      });\n    }));\n    this._register(autorun(reader => {\n      /** @description Update widget dimension */\n      const dimension = this._dimension.read(reader);\n      this._sizeObserver.observe(dimension);\n    }));\n    this._elements.content.style.position = 'relative';\n    this._register(autorun(reader => {\n      /** @description Update scroll dimensions */\n      const height = this._sizeObserver.height.read(reader);\n      this._elements.root.style.height = `${height}px`;\n      const totalHeight = this._totalHeight.read(reader);\n      this._elements.content.style.height = `${totalHeight}px`;\n      const width = this._sizeObserver.width.read(reader);\n      let scrollWidth = width;\n      const viewItems = this._viewItems.read(reader);\n      const max = findFirstMaxBy(viewItems, i => i.maxScroll.read(reader).maxScroll);\n      if (max) {\n        const maxScroll = max.maxScroll.read(reader);\n        scrollWidth = width + maxScroll.maxScroll;\n      }\n      this._scrollableElement.setScrollDimensions({\n        width: width,\n        height: height,\n        scrollHeight: totalHeight,\n        scrollWidth\n      });\n    }));\n    _element.replaceChildren(this._scrollableElement.getDomNode());\n    this._register(toDisposable(() => {\n      _element.replaceChildren();\n    }));\n    this._register(this._register(autorun(reader => {\n      /** @description Render all */\n      globalTransaction(tx => {\n        this.render(reader);\n      });\n    })));\n  }\n  render(reader) {\n    const scrollTop = this.scrollTop.read(reader);\n    let contentScrollOffsetToScrollOffset = 0;\n    let itemHeightSumBefore = 0;\n    let itemContentHeightSumBefore = 0;\n    const viewPortHeight = this._sizeObserver.height.read(reader);\n    const contentViewPort = OffsetRange.ofStartAndLength(scrollTop, viewPortHeight);\n    const width = this._sizeObserver.width.read(reader);\n    for (const v of this._viewItems.read(reader)) {\n      const itemContentHeight = v.contentHeight.read(reader);\n      const itemHeight = Math.min(itemContentHeight, viewPortHeight);\n      const itemRange = OffsetRange.ofStartAndLength(itemHeightSumBefore, itemHeight);\n      const itemContentRange = OffsetRange.ofStartAndLength(itemContentHeightSumBefore, itemContentHeight);\n      if (itemContentRange.isBefore(contentViewPort)) {\n        contentScrollOffsetToScrollOffset -= itemContentHeight - itemHeight;\n        v.hide();\n      } else if (itemContentRange.isAfter(contentViewPort)) {\n        v.hide();\n      } else {\n        const scroll = Math.max(0, Math.min(contentViewPort.start - itemContentRange.start, itemContentHeight - itemHeight));\n        contentScrollOffsetToScrollOffset -= scroll;\n        const viewPort = OffsetRange.ofStartAndLength(scrollTop + contentScrollOffsetToScrollOffset, viewPortHeight);\n        v.render(itemRange, scroll, width, viewPort);\n      }\n      itemHeightSumBefore += itemHeight;\n      itemContentHeightSumBefore += itemContentHeight;\n    }\n    this._elements.content.style.transform = `translateY(${-(scrollTop + contentScrollOffsetToScrollOffset)}px)`;\n  }\n};\nMultiDiffEditorWidgetImpl = __decorate([__param(4, IContextKeyService), __param(5, IInstantiationService)], MultiDiffEditorWidgetImpl);\nexport { MultiDiffEditorWidgetImpl };\nclass VirtualizedViewItem extends Disposable {\n  constructor(viewModel, _objectPool, _scrollLeft) {\n    super();\n    this.viewModel = viewModel;\n    this._objectPool = _objectPool;\n    this._scrollLeft = _scrollLeft;\n    // TODO this should be in the view model\n    this._lastTemplateData = observableValue(this, {\n      contentHeight: 500,\n      maxScroll: {\n        maxScroll: 0,\n        width: 0\n      }\n    });\n    this._templateRef = this._register(disposableObservableValue(this, undefined));\n    this.contentHeight = derived(this, reader => {\n      var _a, _b, _c;\n      return (_c = (_b = (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object.height) === null || _b === void 0 ? void 0 : _b.read(reader)) !== null && _c !== void 0 ? _c : this._lastTemplateData.read(reader).contentHeight;\n    });\n    this.maxScroll = derived(this, reader => {\n      var _a, _b;\n      return (_b = (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object.maxScroll.read(reader)) !== null && _b !== void 0 ? _b : this._lastTemplateData.read(reader).maxScroll;\n    });\n    this.template = derived(this, reader => {\n      var _a;\n      return (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object;\n    });\n    this._isHidden = observableValue(this, false);\n    this._register(autorun(reader => {\n      var _a;\n      const scrollLeft = this._scrollLeft.read(reader);\n      (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object.setScrollLeft(scrollLeft);\n    }));\n    this._register(autorun(reader => {\n      const ref = this._templateRef.read(reader);\n      if (!ref) {\n        return;\n      }\n      const isHidden = this._isHidden.read(reader);\n      if (!isHidden) {\n        return;\n      }\n      const isFocused = ref.object.isFocused.read(reader);\n      if (isFocused) {\n        return;\n      }\n      transaction(tx => {\n        this._lastTemplateData.set({\n          contentHeight: ref.object.height.get(),\n          maxScroll: {\n            maxScroll: 0,\n            width: 0\n          } // Reset max scroll\n        }, tx);\n        ref.object.hide();\n        this._templateRef.set(undefined, tx);\n      });\n    }));\n  }\n  dispose() {\n    this.hide();\n    super.dispose();\n  }\n  toString() {\n    return `VirtualViewItem(${this.viewModel.entry.value.title})`;\n  }\n  hide() {\n    this._isHidden.set(true, undefined);\n  }\n  render(verticalSpace, offset, width, viewPort) {\n    this._isHidden.set(false, undefined);\n    let ref = this._templateRef.get();\n    if (!ref) {\n      ref = this._objectPool.getUnusedObj(new TemplateData(this.viewModel));\n      this._templateRef.set(ref, undefined);\n    }\n    ref.object.render(verticalSpace, width, offset, viewPort);\n  }\n}","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","getWindow","h","scheduleAtNextAnimationFrame","SmoothScrollableElement","findFirstMaxBy","Disposable","toDisposable","autorun","derived","derivedObservableWithCache","derivedWithStore","observableFromEvent","observableValue","disposableObservableValue","globalTransaction","transaction","Scrollable","ObservableElementSizeObserver","OffsetRange","IInstantiationService","DiffEditorItemTemplate","TemplateData","ObjectPool","IContextKeyService","ServiceCollection","EditorContextKeys","MultiDiffEditorWidgetImpl","constructor","_element","_dimension","_viewModel","_workbenchUIElementFactory","_parentContextKeyService","_parentInstantiationService","_elements","style","overflowY","overflow","_sizeObserver","_register","undefined","_objectPool","data","template","_instantiationService","createInstance","content","overflowWidgetsDomNode","setData","_scrollable","forceIntegerValues","cb","smoothScrollDuration","_scrollableElement","root","vertical","horizontal","className","useShadows","scrollTop","onScroll","getScrollPosition","scrollLeft","_viewItems","reader","store","vm","read","items","map","add","VirtualizedViewItem","_totalHeight","reduce","contentHeight","activeDiffItem","find","_a","isFocused","lastActiveDiffItem","lastValue","_contextKeyService","createScoped","createChild","createKey","inMultiDiffEditor","ctxAllCollapsed","multiDiffEditorAllCollapsed","viewModel","allCollapsed","every","item","collapsed","set","tx","dimension","observe","position","height","totalHeight","width","scrollWidth","viewItems","max","maxScroll","setScrollDimensions","scrollHeight","replaceChildren","getDomNode","render","contentScrollOffsetToScrollOffset","itemHeightSumBefore","itemContentHeightSumBefore","viewPortHeight","contentViewPort","ofStartAndLength","v","itemContentHeight","itemHeight","Math","min","itemRange","itemContentRange","isBefore","hide","isAfter","scroll","start","viewPort","transform","_scrollLeft","_lastTemplateData","_templateRef","_b","_c","object","_isHidden","setScrollLeft","ref","isHidden","get","dispose","toString","entry","value","title","verticalSpace","offset","getUnusedObj"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditorWidget/multiDiffEditorWidgetImpl.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { getWindow, h, scheduleAtNextAnimationFrame } from '../../../../base/browser/dom.js';\nimport { SmoothScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { findFirstMaxBy } from '../../../../base/common/arraysFind.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, derivedObservableWithCache, derivedWithStore, observableFromEvent, observableValue } from '../../../../base/common/observable.js';\nimport { disposableObservableValue, globalTransaction, transaction } from '../../../../base/common/observableInternal/base.js';\nimport { Scrollable } from '../../../../base/common/scrollable.js';\nimport './style.css';\nimport { ObservableElementSizeObserver } from '../diffEditor/utils.js';\nimport { OffsetRange } from '../../../common/core/offsetRange.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { DiffEditorItemTemplate, TemplateData } from './diffEditorItemTemplate.js';\nimport { ObjectPool } from './objectPool.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nlet MultiDiffEditorWidgetImpl = class MultiDiffEditorWidgetImpl extends Disposable {\n    constructor(_element, _dimension, _viewModel, _workbenchUIElementFactory, _parentContextKeyService, _parentInstantiationService) {\n        super();\n        this._element = _element;\n        this._dimension = _dimension;\n        this._viewModel = _viewModel;\n        this._workbenchUIElementFactory = _workbenchUIElementFactory;\n        this._parentContextKeyService = _parentContextKeyService;\n        this._parentInstantiationService = _parentInstantiationService;\n        this._elements = h('div', {\n            style: {\n                overflowY: 'hidden',\n            }\n        }, [\n            h('div@content', {\n                style: {\n                    overflow: 'hidden',\n                }\n            }),\n            h('div.monaco-editor@overflowWidgetsDomNode', {}),\n        ]);\n        this._sizeObserver = this._register(new ObservableElementSizeObserver(this._element, undefined));\n        this._objectPool = this._register(new ObjectPool((data) => {\n            const template = this._instantiationService.createInstance(DiffEditorItemTemplate, this._elements.content, this._elements.overflowWidgetsDomNode, this._workbenchUIElementFactory);\n            template.setData(data);\n            return template;\n        }));\n        this._scrollable = this._register(new Scrollable({\n            forceIntegerValues: false,\n            scheduleAtNextAnimationFrame: (cb) => scheduleAtNextAnimationFrame(getWindow(this._element), cb),\n            smoothScrollDuration: 100,\n        }));\n        this._scrollableElement = this._register(new SmoothScrollableElement(this._elements.root, {\n            vertical: 1 /* ScrollbarVisibility.Auto */,\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\n            className: 'monaco-component',\n            useShadows: false,\n        }, this._scrollable));\n        this.scrollTop = observableFromEvent(this._scrollableElement.onScroll, () => /** @description scrollTop */ this._scrollableElement.getScrollPosition().scrollTop);\n        this.scrollLeft = observableFromEvent(this._scrollableElement.onScroll, () => /** @description scrollLeft */ this._scrollableElement.getScrollPosition().scrollLeft);\n        this._viewItems = derivedWithStore(this, (reader, store) => {\n            const vm = this._viewModel.read(reader);\n            if (!vm) {\n                return [];\n            }\n            const items = vm.items.read(reader);\n            return items.map(d => store.add(new VirtualizedViewItem(d, this._objectPool, this.scrollLeft)));\n        });\n        this._totalHeight = this._viewItems.map(this, (items, reader) => items.reduce((r, i) => r + i.contentHeight.read(reader), 0));\n        this.activeDiffItem = derived(this, reader => this._viewItems.read(reader).find(i => { var _a; return (_a = i.template.read(reader)) === null || _a === void 0 ? void 0 : _a.isFocused.read(reader); }));\n        this.lastActiveDiffItem = derivedObservableWithCache((reader, lastValue) => { var _a; return (_a = this.activeDiffItem.read(reader)) !== null && _a !== void 0 ? _a : lastValue; });\n        this._contextKeyService = this._register(this._parentContextKeyService.createScoped(this._element));\n        this._instantiationService = this._parentInstantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n        this._contextKeyService.createKey(EditorContextKeys.inMultiDiffEditor.key, true);\n        const ctxAllCollapsed = this._parentContextKeyService.createKey(EditorContextKeys.multiDiffEditorAllCollapsed.key, false);\n        this._register(autorun((reader) => {\n            const viewModel = this._viewModel.read(reader);\n            if (viewModel) {\n                const allCollapsed = viewModel.items.read(reader).every(item => item.collapsed.read(reader));\n                ctxAllCollapsed.set(allCollapsed);\n            }\n        }));\n        this._register(autorun((reader) => {\n            const lastActiveDiffItem = this.lastActiveDiffItem.read(reader);\n            transaction(tx => {\n                var _a;\n                (_a = this._viewModel.read(reader)) === null || _a === void 0 ? void 0 : _a.activeDiffItem.set(lastActiveDiffItem === null || lastActiveDiffItem === void 0 ? void 0 : lastActiveDiffItem.viewModel, tx);\n            });\n        }));\n        this._register(autorun((reader) => {\n            /** @description Update widget dimension */\n            const dimension = this._dimension.read(reader);\n            this._sizeObserver.observe(dimension);\n        }));\n        this._elements.content.style.position = 'relative';\n        this._register(autorun((reader) => {\n            /** @description Update scroll dimensions */\n            const height = this._sizeObserver.height.read(reader);\n            this._elements.root.style.height = `${height}px`;\n            const totalHeight = this._totalHeight.read(reader);\n            this._elements.content.style.height = `${totalHeight}px`;\n            const width = this._sizeObserver.width.read(reader);\n            let scrollWidth = width;\n            const viewItems = this._viewItems.read(reader);\n            const max = findFirstMaxBy(viewItems, i => i.maxScroll.read(reader).maxScroll);\n            if (max) {\n                const maxScroll = max.maxScroll.read(reader);\n                scrollWidth = width + maxScroll.maxScroll;\n            }\n            this._scrollableElement.setScrollDimensions({\n                width: width,\n                height: height,\n                scrollHeight: totalHeight,\n                scrollWidth,\n            });\n        }));\n        _element.replaceChildren(this._scrollableElement.getDomNode());\n        this._register(toDisposable(() => {\n            _element.replaceChildren();\n        }));\n        this._register(this._register(autorun(reader => {\n            /** @description Render all */\n            globalTransaction(tx => {\n                this.render(reader);\n            });\n        })));\n    }\n    render(reader) {\n        const scrollTop = this.scrollTop.read(reader);\n        let contentScrollOffsetToScrollOffset = 0;\n        let itemHeightSumBefore = 0;\n        let itemContentHeightSumBefore = 0;\n        const viewPortHeight = this._sizeObserver.height.read(reader);\n        const contentViewPort = OffsetRange.ofStartAndLength(scrollTop, viewPortHeight);\n        const width = this._sizeObserver.width.read(reader);\n        for (const v of this._viewItems.read(reader)) {\n            const itemContentHeight = v.contentHeight.read(reader);\n            const itemHeight = Math.min(itemContentHeight, viewPortHeight);\n            const itemRange = OffsetRange.ofStartAndLength(itemHeightSumBefore, itemHeight);\n            const itemContentRange = OffsetRange.ofStartAndLength(itemContentHeightSumBefore, itemContentHeight);\n            if (itemContentRange.isBefore(contentViewPort)) {\n                contentScrollOffsetToScrollOffset -= itemContentHeight - itemHeight;\n                v.hide();\n            }\n            else if (itemContentRange.isAfter(contentViewPort)) {\n                v.hide();\n            }\n            else {\n                const scroll = Math.max(0, Math.min(contentViewPort.start - itemContentRange.start, itemContentHeight - itemHeight));\n                contentScrollOffsetToScrollOffset -= scroll;\n                const viewPort = OffsetRange.ofStartAndLength(scrollTop + contentScrollOffsetToScrollOffset, viewPortHeight);\n                v.render(itemRange, scroll, width, viewPort);\n            }\n            itemHeightSumBefore += itemHeight;\n            itemContentHeightSumBefore += itemContentHeight;\n        }\n        this._elements.content.style.transform = `translateY(${-(scrollTop + contentScrollOffsetToScrollOffset)}px)`;\n    }\n};\nMultiDiffEditorWidgetImpl = __decorate([\n    __param(4, IContextKeyService),\n    __param(5, IInstantiationService)\n], MultiDiffEditorWidgetImpl);\nexport { MultiDiffEditorWidgetImpl };\nclass VirtualizedViewItem extends Disposable {\n    constructor(viewModel, _objectPool, _scrollLeft) {\n        super();\n        this.viewModel = viewModel;\n        this._objectPool = _objectPool;\n        this._scrollLeft = _scrollLeft;\n        // TODO this should be in the view model\n        this._lastTemplateData = observableValue(this, { contentHeight: 500, maxScroll: { maxScroll: 0, width: 0 }, });\n        this._templateRef = this._register(disposableObservableValue(this, undefined));\n        this.contentHeight = derived(this, reader => { var _a, _b, _c; return (_c = (_b = (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object.height) === null || _b === void 0 ? void 0 : _b.read(reader)) !== null && _c !== void 0 ? _c : this._lastTemplateData.read(reader).contentHeight; });\n        this.maxScroll = derived(this, reader => { var _a, _b; return (_b = (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object.maxScroll.read(reader)) !== null && _b !== void 0 ? _b : this._lastTemplateData.read(reader).maxScroll; });\n        this.template = derived(this, reader => { var _a; return (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object; });\n        this._isHidden = observableValue(this, false);\n        this._register(autorun((reader) => {\n            var _a;\n            const scrollLeft = this._scrollLeft.read(reader);\n            (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object.setScrollLeft(scrollLeft);\n        }));\n        this._register(autorun(reader => {\n            const ref = this._templateRef.read(reader);\n            if (!ref) {\n                return;\n            }\n            const isHidden = this._isHidden.read(reader);\n            if (!isHidden) {\n                return;\n            }\n            const isFocused = ref.object.isFocused.read(reader);\n            if (isFocused) {\n                return;\n            }\n            transaction(tx => {\n                this._lastTemplateData.set({\n                    contentHeight: ref.object.height.get(),\n                    maxScroll: { maxScroll: 0, width: 0, } // Reset max scroll\n                }, tx);\n                ref.object.hide();\n                this._templateRef.set(undefined, tx);\n            });\n        }));\n    }\n    dispose() {\n        this.hide();\n        super.dispose();\n    }\n    toString() {\n        return `VirtualViewItem(${this.viewModel.entry.value.title})`;\n    }\n    hide() {\n        this._isHidden.set(true, undefined);\n    }\n    render(verticalSpace, offset, width, viewPort) {\n        this._isHidden.set(false, undefined);\n        let ref = this._templateRef.get();\n        if (!ref) {\n            ref = this._objectPool.getUnusedObj(new TemplateData(this.viewModel));\n            this._templateRef.set(ref, undefined);\n        }\n        ref.object.render(verticalSpace, width, offset, viewPort);\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}