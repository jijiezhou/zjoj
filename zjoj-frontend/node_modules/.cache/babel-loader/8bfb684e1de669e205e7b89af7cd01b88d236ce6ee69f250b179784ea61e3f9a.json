{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../base/browser/dom.js';\nimport { addMatchMediaChangeListener } from '../../../base/browser/browser.js';\nimport { Color } from '../../../base/common/color.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { TokenizationRegistry } from '../../common/languages.js';\nimport { TokenMetadata } from '../../common/encodedTokenAttributes.js';\nimport { TokenTheme, generateTokensCSSForColorMap } from '../../common/languages/supports/tokenization.js';\nimport { hc_black, hc_light, vs, vs_dark } from '../common/themes.js';\nimport { Registry } from '../../../platform/registry/common/platform.js';\nimport { asCssVariableName, Extensions } from '../../../platform/theme/common/colorRegistry.js';\nimport { Extensions as ThemingExtensions } from '../../../platform/theme/common/themeService.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { ColorScheme, isDark, isHighContrast } from '../../../platform/theme/common/theme.js';\nimport { getIconsStyleSheet, UnthemedProductIconTheme } from '../../../platform/theme/browser/iconsStyleSheet.js';\nimport { mainWindow } from '../../../base/browser/window.js';\nexport const VS_LIGHT_THEME_NAME = 'vs';\nexport const VS_DARK_THEME_NAME = 'vs-dark';\nexport const HC_BLACK_THEME_NAME = 'hc-black';\nexport const HC_LIGHT_THEME_NAME = 'hc-light';\nconst colorRegistry = Registry.as(Extensions.ColorContribution);\nconst themingRegistry = Registry.as(ThemingExtensions.ThemingContribution);\nclass StandaloneTheme {\n  constructor(name, standaloneThemeData) {\n    this.semanticHighlighting = false;\n    this.themeData = standaloneThemeData;\n    const base = standaloneThemeData.base;\n    if (name.length > 0) {\n      if (isBuiltinTheme(name)) {\n        this.id = name;\n      } else {\n        this.id = base + ' ' + name;\n      }\n      this.themeName = name;\n    } else {\n      this.id = base;\n      this.themeName = base;\n    }\n    this.colors = null;\n    this.defaultColors = Object.create(null);\n    this._tokenTheme = null;\n  }\n  get base() {\n    return this.themeData.base;\n  }\n  notifyBaseUpdated() {\n    if (this.themeData.inherit) {\n      this.colors = null;\n      this._tokenTheme = null;\n    }\n  }\n  getColors() {\n    if (!this.colors) {\n      const colors = new Map();\n      for (const id in this.themeData.colors) {\n        colors.set(id, Color.fromHex(this.themeData.colors[id]));\n      }\n      if (this.themeData.inherit) {\n        const baseData = getBuiltinRules(this.themeData.base);\n        for (const id in baseData.colors) {\n          if (!colors.has(id)) {\n            colors.set(id, Color.fromHex(baseData.colors[id]));\n          }\n        }\n      }\n      this.colors = colors;\n    }\n    return this.colors;\n  }\n  getColor(colorId, useDefault) {\n    const color = this.getColors().get(colorId);\n    if (color) {\n      return color;\n    }\n    if (useDefault !== false) {\n      return this.getDefault(colorId);\n    }\n    return undefined;\n  }\n  getDefault(colorId) {\n    let color = this.defaultColors[colorId];\n    if (color) {\n      return color;\n    }\n    color = colorRegistry.resolveDefaultColor(colorId, this);\n    this.defaultColors[colorId] = color;\n    return color;\n  }\n  defines(colorId) {\n    return this.getColors().has(colorId);\n  }\n  get type() {\n    switch (this.base) {\n      case VS_LIGHT_THEME_NAME:\n        return ColorScheme.LIGHT;\n      case HC_BLACK_THEME_NAME:\n        return ColorScheme.HIGH_CONTRAST_DARK;\n      case HC_LIGHT_THEME_NAME:\n        return ColorScheme.HIGH_CONTRAST_LIGHT;\n      default:\n        return ColorScheme.DARK;\n    }\n  }\n  get tokenTheme() {\n    if (!this._tokenTheme) {\n      let rules = [];\n      let encodedTokensColors = [];\n      if (this.themeData.inherit) {\n        const baseData = getBuiltinRules(this.themeData.base);\n        rules = baseData.rules;\n        if (baseData.encodedTokensColors) {\n          encodedTokensColors = baseData.encodedTokensColors;\n        }\n      }\n      // Pick up default colors from `editor.foreground` and `editor.background` if available\n      const editorForeground = this.themeData.colors['editor.foreground'];\n      const editorBackground = this.themeData.colors['editor.background'];\n      if (editorForeground || editorBackground) {\n        const rule = {\n          token: ''\n        };\n        if (editorForeground) {\n          rule.foreground = editorForeground;\n        }\n        if (editorBackground) {\n          rule.background = editorBackground;\n        }\n        rules.push(rule);\n      }\n      rules = rules.concat(this.themeData.rules);\n      if (this.themeData.encodedTokensColors) {\n        encodedTokensColors = this.themeData.encodedTokensColors;\n      }\n      this._tokenTheme = TokenTheme.createFromRawTokenTheme(rules, encodedTokensColors);\n    }\n    return this._tokenTheme;\n  }\n  getTokenStyleMetadata(type, modifiers, modelLanguage) {\n    // use theme rules match\n    const style = this.tokenTheme._match([type].concat(modifiers).join('.'));\n    const metadata = style.metadata;\n    const foreground = TokenMetadata.getForeground(metadata);\n    const fontStyle = TokenMetadata.getFontStyle(metadata);\n    return {\n      foreground: foreground,\n      italic: Boolean(fontStyle & 1 /* FontStyle.Italic */),\n      bold: Boolean(fontStyle & 2 /* FontStyle.Bold */),\n      underline: Boolean(fontStyle & 4 /* FontStyle.Underline */),\n      strikethrough: Boolean(fontStyle & 8 /* FontStyle.Strikethrough */)\n    };\n  }\n}\nfunction isBuiltinTheme(themeName) {\n  return themeName === VS_LIGHT_THEME_NAME || themeName === VS_DARK_THEME_NAME || themeName === HC_BLACK_THEME_NAME || themeName === HC_LIGHT_THEME_NAME;\n}\nfunction getBuiltinRules(builtinTheme) {\n  switch (builtinTheme) {\n    case VS_LIGHT_THEME_NAME:\n      return vs;\n    case VS_DARK_THEME_NAME:\n      return vs_dark;\n    case HC_BLACK_THEME_NAME:\n      return hc_black;\n    case HC_LIGHT_THEME_NAME:\n      return hc_light;\n  }\n}\nfunction newBuiltInTheme(builtinTheme) {\n  const themeData = getBuiltinRules(builtinTheme);\n  return new StandaloneTheme(builtinTheme, themeData);\n}\nexport class StandaloneThemeService extends Disposable {\n  constructor() {\n    super();\n    this._onColorThemeChange = this._register(new Emitter());\n    this.onDidColorThemeChange = this._onColorThemeChange.event;\n    this._onProductIconThemeChange = this._register(new Emitter());\n    this.onDidProductIconThemeChange = this._onProductIconThemeChange.event;\n    this._environment = Object.create(null);\n    this._builtInProductIconTheme = new UnthemedProductIconTheme();\n    this._autoDetectHighContrast = true;\n    this._knownThemes = new Map();\n    this._knownThemes.set(VS_LIGHT_THEME_NAME, newBuiltInTheme(VS_LIGHT_THEME_NAME));\n    this._knownThemes.set(VS_DARK_THEME_NAME, newBuiltInTheme(VS_DARK_THEME_NAME));\n    this._knownThemes.set(HC_BLACK_THEME_NAME, newBuiltInTheme(HC_BLACK_THEME_NAME));\n    this._knownThemes.set(HC_LIGHT_THEME_NAME, newBuiltInTheme(HC_LIGHT_THEME_NAME));\n    const iconsStyleSheet = this._register(getIconsStyleSheet(this));\n    this._codiconCSS = iconsStyleSheet.getCSS();\n    this._themeCSS = '';\n    this._allCSS = `${this._codiconCSS}\\n${this._themeCSS}`;\n    this._globalStyleElement = null;\n    this._styleElements = [];\n    this._colorMapOverride = null;\n    this.setTheme(VS_LIGHT_THEME_NAME);\n    this._onOSSchemeChanged();\n    this._register(iconsStyleSheet.onDidChange(() => {\n      this._codiconCSS = iconsStyleSheet.getCSS();\n      this._updateCSS();\n    }));\n    addMatchMediaChangeListener('(forced-colors: active)', () => {\n      this._onOSSchemeChanged();\n    });\n  }\n  registerEditorContainer(domNode) {\n    if (dom.isInShadowDOM(domNode)) {\n      return this._registerShadowDomContainer(domNode);\n    }\n    return this._registerRegularEditorContainer();\n  }\n  _registerRegularEditorContainer() {\n    if (!this._globalStyleElement) {\n      this._globalStyleElement = dom.createStyleSheet(undefined, style => {\n        style.className = 'monaco-colors';\n        style.textContent = this._allCSS;\n      });\n      this._styleElements.push(this._globalStyleElement);\n    }\n    return Disposable.None;\n  }\n  _registerShadowDomContainer(domNode) {\n    const styleElement = dom.createStyleSheet(domNode, style => {\n      style.className = 'monaco-colors';\n      style.textContent = this._allCSS;\n    });\n    this._styleElements.push(styleElement);\n    return {\n      dispose: () => {\n        for (let i = 0; i < this._styleElements.length; i++) {\n          if (this._styleElements[i] === styleElement) {\n            this._styleElements.splice(i, 1);\n            return;\n          }\n        }\n      }\n    };\n  }\n  defineTheme(themeName, themeData) {\n    if (!/^[a-z0-9\\-]+$/i.test(themeName)) {\n      throw new Error('Illegal theme name!');\n    }\n    if (!isBuiltinTheme(themeData.base) && !isBuiltinTheme(themeName)) {\n      throw new Error('Illegal theme base!');\n    }\n    // set or replace theme\n    this._knownThemes.set(themeName, new StandaloneTheme(themeName, themeData));\n    if (isBuiltinTheme(themeName)) {\n      this._knownThemes.forEach(theme => {\n        if (theme.base === themeName) {\n          theme.notifyBaseUpdated();\n        }\n      });\n    }\n    if (this._theme.themeName === themeName) {\n      this.setTheme(themeName); // refresh theme\n    }\n  }\n  getColorTheme() {\n    return this._theme;\n  }\n  setColorMapOverride(colorMapOverride) {\n    this._colorMapOverride = colorMapOverride;\n    this._updateThemeOrColorMap();\n  }\n  setTheme(themeName) {\n    let theme;\n    if (this._knownThemes.has(themeName)) {\n      theme = this._knownThemes.get(themeName);\n    } else {\n      theme = this._knownThemes.get(VS_LIGHT_THEME_NAME);\n    }\n    this._updateActualTheme(theme);\n  }\n  _updateActualTheme(desiredTheme) {\n    if (!desiredTheme || this._theme === desiredTheme) {\n      // Nothing to do\n      return;\n    }\n    this._theme = desiredTheme;\n    this._updateThemeOrColorMap();\n  }\n  _onOSSchemeChanged() {\n    if (this._autoDetectHighContrast) {\n      const wantsHighContrast = mainWindow.matchMedia(`(forced-colors: active)`).matches;\n      if (wantsHighContrast !== isHighContrast(this._theme.type)) {\n        // switch to high contrast or non-high contrast but stick to dark or light\n        let newThemeName;\n        if (isDark(this._theme.type)) {\n          newThemeName = wantsHighContrast ? HC_BLACK_THEME_NAME : VS_DARK_THEME_NAME;\n        } else {\n          newThemeName = wantsHighContrast ? HC_LIGHT_THEME_NAME : VS_LIGHT_THEME_NAME;\n        }\n        this._updateActualTheme(this._knownThemes.get(newThemeName));\n      }\n    }\n  }\n  setAutoDetectHighContrast(autoDetectHighContrast) {\n    this._autoDetectHighContrast = autoDetectHighContrast;\n    this._onOSSchemeChanged();\n  }\n  _updateThemeOrColorMap() {\n    const cssRules = [];\n    const hasRule = {};\n    const ruleCollector = {\n      addRule: rule => {\n        if (!hasRule[rule]) {\n          cssRules.push(rule);\n          hasRule[rule] = true;\n        }\n      }\n    };\n    themingRegistry.getThemingParticipants().forEach(p => p(this._theme, ruleCollector, this._environment));\n    const colorVariables = [];\n    for (const item of colorRegistry.getColors()) {\n      const color = this._theme.getColor(item.id, true);\n      if (color) {\n        colorVariables.push(`${asCssVariableName(item.id)}: ${color.toString()};`);\n      }\n    }\n    ruleCollector.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${colorVariables.join('\\n')} }`);\n    const colorMap = this._colorMapOverride || this._theme.tokenTheme.getColorMap();\n    ruleCollector.addRule(generateTokensCSSForColorMap(colorMap));\n    this._themeCSS = cssRules.join('\\n');\n    this._updateCSS();\n    TokenizationRegistry.setColorMap(colorMap);\n    this._onColorThemeChange.fire(this._theme);\n  }\n  _updateCSS() {\n    this._allCSS = `${this._codiconCSS}\\n${this._themeCSS}`;\n    this._styleElements.forEach(styleElement => styleElement.textContent = this._allCSS);\n  }\n  getFileIconTheme() {\n    return {\n      hasFileIcons: false,\n      hasFolderIcons: false,\n      hidesExplorerArrows: false\n    };\n  }\n  getProductIconTheme() {\n    return this._builtInProductIconTheme;\n  }\n}","map":{"version":3,"names":["dom","addMatchMediaChangeListener","Color","Emitter","TokenizationRegistry","TokenMetadata","TokenTheme","generateTokensCSSForColorMap","hc_black","hc_light","vs","vs_dark","Registry","asCssVariableName","Extensions","ThemingExtensions","Disposable","ColorScheme","isDark","isHighContrast","getIconsStyleSheet","UnthemedProductIconTheme","mainWindow","VS_LIGHT_THEME_NAME","VS_DARK_THEME_NAME","HC_BLACK_THEME_NAME","HC_LIGHT_THEME_NAME","colorRegistry","as","ColorContribution","themingRegistry","ThemingContribution","StandaloneTheme","constructor","name","standaloneThemeData","semanticHighlighting","themeData","base","length","isBuiltinTheme","id","themeName","colors","defaultColors","Object","create","_tokenTheme","notifyBaseUpdated","inherit","getColors","Map","set","fromHex","baseData","getBuiltinRules","has","getColor","colorId","useDefault","color","get","getDefault","undefined","resolveDefaultColor","defines","type","LIGHT","HIGH_CONTRAST_DARK","HIGH_CONTRAST_LIGHT","DARK","tokenTheme","rules","encodedTokensColors","editorForeground","editorBackground","rule","token","foreground","background","push","concat","createFromRawTokenTheme","getTokenStyleMetadata","modifiers","modelLanguage","style","_match","join","metadata","getForeground","fontStyle","getFontStyle","italic","Boolean","bold","underline","strikethrough","builtinTheme","newBuiltInTheme","StandaloneThemeService","_onColorThemeChange","_register","onDidColorThemeChange","event","_onProductIconThemeChange","onDidProductIconThemeChange","_environment","_builtInProductIconTheme","_autoDetectHighContrast","_knownThemes","iconsStyleSheet","_codiconCSS","getCSS","_themeCSS","_allCSS","_globalStyleElement","_styleElements","_colorMapOverride","setTheme","_onOSSchemeChanged","onDidChange","_updateCSS","registerEditorContainer","domNode","isInShadowDOM","_registerShadowDomContainer","_registerRegularEditorContainer","createStyleSheet","className","textContent","None","styleElement","dispose","i","splice","defineTheme","test","Error","forEach","theme","_theme","getColorTheme","setColorMapOverride","colorMapOverride","_updateThemeOrColorMap","_updateActualTheme","desiredTheme","wantsHighContrast","matchMedia","matches","newThemeName","setAutoDetectHighContrast","autoDetectHighContrast","cssRules","hasRule","ruleCollector","addRule","getThemingParticipants","p","colorVariables","item","toString","colorMap","getColorMap","setColorMap","fire","getFileIconTheme","hasFileIcons","hasFolderIcons","hidesExplorerArrows","getProductIconTheme"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneThemeService.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../base/browser/dom.js';\nimport { addMatchMediaChangeListener } from '../../../base/browser/browser.js';\nimport { Color } from '../../../base/common/color.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { TokenizationRegistry } from '../../common/languages.js';\nimport { TokenMetadata } from '../../common/encodedTokenAttributes.js';\nimport { TokenTheme, generateTokensCSSForColorMap } from '../../common/languages/supports/tokenization.js';\nimport { hc_black, hc_light, vs, vs_dark } from '../common/themes.js';\nimport { Registry } from '../../../platform/registry/common/platform.js';\nimport { asCssVariableName, Extensions } from '../../../platform/theme/common/colorRegistry.js';\nimport { Extensions as ThemingExtensions } from '../../../platform/theme/common/themeService.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { ColorScheme, isDark, isHighContrast } from '../../../platform/theme/common/theme.js';\nimport { getIconsStyleSheet, UnthemedProductIconTheme } from '../../../platform/theme/browser/iconsStyleSheet.js';\nimport { mainWindow } from '../../../base/browser/window.js';\nexport const VS_LIGHT_THEME_NAME = 'vs';\nexport const VS_DARK_THEME_NAME = 'vs-dark';\nexport const HC_BLACK_THEME_NAME = 'hc-black';\nexport const HC_LIGHT_THEME_NAME = 'hc-light';\nconst colorRegistry = Registry.as(Extensions.ColorContribution);\nconst themingRegistry = Registry.as(ThemingExtensions.ThemingContribution);\nclass StandaloneTheme {\n    constructor(name, standaloneThemeData) {\n        this.semanticHighlighting = false;\n        this.themeData = standaloneThemeData;\n        const base = standaloneThemeData.base;\n        if (name.length > 0) {\n            if (isBuiltinTheme(name)) {\n                this.id = name;\n            }\n            else {\n                this.id = base + ' ' + name;\n            }\n            this.themeName = name;\n        }\n        else {\n            this.id = base;\n            this.themeName = base;\n        }\n        this.colors = null;\n        this.defaultColors = Object.create(null);\n        this._tokenTheme = null;\n    }\n    get base() {\n        return this.themeData.base;\n    }\n    notifyBaseUpdated() {\n        if (this.themeData.inherit) {\n            this.colors = null;\n            this._tokenTheme = null;\n        }\n    }\n    getColors() {\n        if (!this.colors) {\n            const colors = new Map();\n            for (const id in this.themeData.colors) {\n                colors.set(id, Color.fromHex(this.themeData.colors[id]));\n            }\n            if (this.themeData.inherit) {\n                const baseData = getBuiltinRules(this.themeData.base);\n                for (const id in baseData.colors) {\n                    if (!colors.has(id)) {\n                        colors.set(id, Color.fromHex(baseData.colors[id]));\n                    }\n                }\n            }\n            this.colors = colors;\n        }\n        return this.colors;\n    }\n    getColor(colorId, useDefault) {\n        const color = this.getColors().get(colorId);\n        if (color) {\n            return color;\n        }\n        if (useDefault !== false) {\n            return this.getDefault(colorId);\n        }\n        return undefined;\n    }\n    getDefault(colorId) {\n        let color = this.defaultColors[colorId];\n        if (color) {\n            return color;\n        }\n        color = colorRegistry.resolveDefaultColor(colorId, this);\n        this.defaultColors[colorId] = color;\n        return color;\n    }\n    defines(colorId) {\n        return this.getColors().has(colorId);\n    }\n    get type() {\n        switch (this.base) {\n            case VS_LIGHT_THEME_NAME: return ColorScheme.LIGHT;\n            case HC_BLACK_THEME_NAME: return ColorScheme.HIGH_CONTRAST_DARK;\n            case HC_LIGHT_THEME_NAME: return ColorScheme.HIGH_CONTRAST_LIGHT;\n            default: return ColorScheme.DARK;\n        }\n    }\n    get tokenTheme() {\n        if (!this._tokenTheme) {\n            let rules = [];\n            let encodedTokensColors = [];\n            if (this.themeData.inherit) {\n                const baseData = getBuiltinRules(this.themeData.base);\n                rules = baseData.rules;\n                if (baseData.encodedTokensColors) {\n                    encodedTokensColors = baseData.encodedTokensColors;\n                }\n            }\n            // Pick up default colors from `editor.foreground` and `editor.background` if available\n            const editorForeground = this.themeData.colors['editor.foreground'];\n            const editorBackground = this.themeData.colors['editor.background'];\n            if (editorForeground || editorBackground) {\n                const rule = { token: '' };\n                if (editorForeground) {\n                    rule.foreground = editorForeground;\n                }\n                if (editorBackground) {\n                    rule.background = editorBackground;\n                }\n                rules.push(rule);\n            }\n            rules = rules.concat(this.themeData.rules);\n            if (this.themeData.encodedTokensColors) {\n                encodedTokensColors = this.themeData.encodedTokensColors;\n            }\n            this._tokenTheme = TokenTheme.createFromRawTokenTheme(rules, encodedTokensColors);\n        }\n        return this._tokenTheme;\n    }\n    getTokenStyleMetadata(type, modifiers, modelLanguage) {\n        // use theme rules match\n        const style = this.tokenTheme._match([type].concat(modifiers).join('.'));\n        const metadata = style.metadata;\n        const foreground = TokenMetadata.getForeground(metadata);\n        const fontStyle = TokenMetadata.getFontStyle(metadata);\n        return {\n            foreground: foreground,\n            italic: Boolean(fontStyle & 1 /* FontStyle.Italic */),\n            bold: Boolean(fontStyle & 2 /* FontStyle.Bold */),\n            underline: Boolean(fontStyle & 4 /* FontStyle.Underline */),\n            strikethrough: Boolean(fontStyle & 8 /* FontStyle.Strikethrough */)\n        };\n    }\n}\nfunction isBuiltinTheme(themeName) {\n    return (themeName === VS_LIGHT_THEME_NAME\n        || themeName === VS_DARK_THEME_NAME\n        || themeName === HC_BLACK_THEME_NAME\n        || themeName === HC_LIGHT_THEME_NAME);\n}\nfunction getBuiltinRules(builtinTheme) {\n    switch (builtinTheme) {\n        case VS_LIGHT_THEME_NAME:\n            return vs;\n        case VS_DARK_THEME_NAME:\n            return vs_dark;\n        case HC_BLACK_THEME_NAME:\n            return hc_black;\n        case HC_LIGHT_THEME_NAME:\n            return hc_light;\n    }\n}\nfunction newBuiltInTheme(builtinTheme) {\n    const themeData = getBuiltinRules(builtinTheme);\n    return new StandaloneTheme(builtinTheme, themeData);\n}\nexport class StandaloneThemeService extends Disposable {\n    constructor() {\n        super();\n        this._onColorThemeChange = this._register(new Emitter());\n        this.onDidColorThemeChange = this._onColorThemeChange.event;\n        this._onProductIconThemeChange = this._register(new Emitter());\n        this.onDidProductIconThemeChange = this._onProductIconThemeChange.event;\n        this._environment = Object.create(null);\n        this._builtInProductIconTheme = new UnthemedProductIconTheme();\n        this._autoDetectHighContrast = true;\n        this._knownThemes = new Map();\n        this._knownThemes.set(VS_LIGHT_THEME_NAME, newBuiltInTheme(VS_LIGHT_THEME_NAME));\n        this._knownThemes.set(VS_DARK_THEME_NAME, newBuiltInTheme(VS_DARK_THEME_NAME));\n        this._knownThemes.set(HC_BLACK_THEME_NAME, newBuiltInTheme(HC_BLACK_THEME_NAME));\n        this._knownThemes.set(HC_LIGHT_THEME_NAME, newBuiltInTheme(HC_LIGHT_THEME_NAME));\n        const iconsStyleSheet = this._register(getIconsStyleSheet(this));\n        this._codiconCSS = iconsStyleSheet.getCSS();\n        this._themeCSS = '';\n        this._allCSS = `${this._codiconCSS}\\n${this._themeCSS}`;\n        this._globalStyleElement = null;\n        this._styleElements = [];\n        this._colorMapOverride = null;\n        this.setTheme(VS_LIGHT_THEME_NAME);\n        this._onOSSchemeChanged();\n        this._register(iconsStyleSheet.onDidChange(() => {\n            this._codiconCSS = iconsStyleSheet.getCSS();\n            this._updateCSS();\n        }));\n        addMatchMediaChangeListener('(forced-colors: active)', () => {\n            this._onOSSchemeChanged();\n        });\n    }\n    registerEditorContainer(domNode) {\n        if (dom.isInShadowDOM(domNode)) {\n            return this._registerShadowDomContainer(domNode);\n        }\n        return this._registerRegularEditorContainer();\n    }\n    _registerRegularEditorContainer() {\n        if (!this._globalStyleElement) {\n            this._globalStyleElement = dom.createStyleSheet(undefined, style => {\n                style.className = 'monaco-colors';\n                style.textContent = this._allCSS;\n            });\n            this._styleElements.push(this._globalStyleElement);\n        }\n        return Disposable.None;\n    }\n    _registerShadowDomContainer(domNode) {\n        const styleElement = dom.createStyleSheet(domNode, style => {\n            style.className = 'monaco-colors';\n            style.textContent = this._allCSS;\n        });\n        this._styleElements.push(styleElement);\n        return {\n            dispose: () => {\n                for (let i = 0; i < this._styleElements.length; i++) {\n                    if (this._styleElements[i] === styleElement) {\n                        this._styleElements.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n        };\n    }\n    defineTheme(themeName, themeData) {\n        if (!/^[a-z0-9\\-]+$/i.test(themeName)) {\n            throw new Error('Illegal theme name!');\n        }\n        if (!isBuiltinTheme(themeData.base) && !isBuiltinTheme(themeName)) {\n            throw new Error('Illegal theme base!');\n        }\n        // set or replace theme\n        this._knownThemes.set(themeName, new StandaloneTheme(themeName, themeData));\n        if (isBuiltinTheme(themeName)) {\n            this._knownThemes.forEach(theme => {\n                if (theme.base === themeName) {\n                    theme.notifyBaseUpdated();\n                }\n            });\n        }\n        if (this._theme.themeName === themeName) {\n            this.setTheme(themeName); // refresh theme\n        }\n    }\n    getColorTheme() {\n        return this._theme;\n    }\n    setColorMapOverride(colorMapOverride) {\n        this._colorMapOverride = colorMapOverride;\n        this._updateThemeOrColorMap();\n    }\n    setTheme(themeName) {\n        let theme;\n        if (this._knownThemes.has(themeName)) {\n            theme = this._knownThemes.get(themeName);\n        }\n        else {\n            theme = this._knownThemes.get(VS_LIGHT_THEME_NAME);\n        }\n        this._updateActualTheme(theme);\n    }\n    _updateActualTheme(desiredTheme) {\n        if (!desiredTheme || this._theme === desiredTheme) {\n            // Nothing to do\n            return;\n        }\n        this._theme = desiredTheme;\n        this._updateThemeOrColorMap();\n    }\n    _onOSSchemeChanged() {\n        if (this._autoDetectHighContrast) {\n            const wantsHighContrast = mainWindow.matchMedia(`(forced-colors: active)`).matches;\n            if (wantsHighContrast !== isHighContrast(this._theme.type)) {\n                // switch to high contrast or non-high contrast but stick to dark or light\n                let newThemeName;\n                if (isDark(this._theme.type)) {\n                    newThemeName = wantsHighContrast ? HC_BLACK_THEME_NAME : VS_DARK_THEME_NAME;\n                }\n                else {\n                    newThemeName = wantsHighContrast ? HC_LIGHT_THEME_NAME : VS_LIGHT_THEME_NAME;\n                }\n                this._updateActualTheme(this._knownThemes.get(newThemeName));\n            }\n        }\n    }\n    setAutoDetectHighContrast(autoDetectHighContrast) {\n        this._autoDetectHighContrast = autoDetectHighContrast;\n        this._onOSSchemeChanged();\n    }\n    _updateThemeOrColorMap() {\n        const cssRules = [];\n        const hasRule = {};\n        const ruleCollector = {\n            addRule: (rule) => {\n                if (!hasRule[rule]) {\n                    cssRules.push(rule);\n                    hasRule[rule] = true;\n                }\n            }\n        };\n        themingRegistry.getThemingParticipants().forEach(p => p(this._theme, ruleCollector, this._environment));\n        const colorVariables = [];\n        for (const item of colorRegistry.getColors()) {\n            const color = this._theme.getColor(item.id, true);\n            if (color) {\n                colorVariables.push(`${asCssVariableName(item.id)}: ${color.toString()};`);\n            }\n        }\n        ruleCollector.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${colorVariables.join('\\n')} }`);\n        const colorMap = this._colorMapOverride || this._theme.tokenTheme.getColorMap();\n        ruleCollector.addRule(generateTokensCSSForColorMap(colorMap));\n        this._themeCSS = cssRules.join('\\n');\n        this._updateCSS();\n        TokenizationRegistry.setColorMap(colorMap);\n        this._onColorThemeChange.fire(this._theme);\n    }\n    _updateCSS() {\n        this._allCSS = `${this._codiconCSS}\\n${this._themeCSS}`;\n        this._styleElements.forEach(styleElement => styleElement.textContent = this._allCSS);\n    }\n    getFileIconTheme() {\n        return {\n            hasFileIcons: false,\n            hasFolderIcons: false,\n            hidesExplorerArrows: false\n        };\n    }\n    getProductIconTheme() {\n        return this._builtInProductIconTheme;\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}