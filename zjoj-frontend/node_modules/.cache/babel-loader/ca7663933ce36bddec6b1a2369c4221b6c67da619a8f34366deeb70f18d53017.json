{"ast":null,"code":"import { ref } from \"vue\";\nfunction useCursor(input) {\n  const selectionRef = ref();\n  function recordCursor() {\n    if (!input.value) return;\n    const {\n      selectionStart,\n      selectionEnd,\n      value\n    } = input.value;\n    if (selectionStart == null || selectionEnd == null) return;\n    const beforeTxt = value.slice(0, Math.max(0, selectionStart));\n    const afterTxt = value.slice(Math.max(0, selectionEnd));\n    selectionRef.value = {\n      selectionStart,\n      selectionEnd,\n      value,\n      beforeTxt,\n      afterTxt\n    };\n  }\n  function setCursor() {\n    if (!input.value || !selectionRef.value) return;\n    const {\n      value\n    } = input.value;\n    const {\n      beforeTxt,\n      afterTxt,\n      selectionStart\n    } = selectionRef.value;\n    if (!beforeTxt || !afterTxt || !selectionStart) return;\n    let startPos = value.length;\n    if (value.endsWith(afterTxt)) {\n      startPos = value.length - afterTxt.length;\n    } else if (value.startsWith(beforeTxt)) {\n      startPos = beforeTxt.length;\n    } else {\n      const beforeLastChar = beforeTxt[selectionStart - 1];\n      const newIndex = value.indexOf(beforeLastChar, selectionStart - 1);\n      if (newIndex !== -1) {\n        startPos = newIndex + 1;\n      }\n    }\n    input.value.setSelectionRange(startPos, startPos);\n  }\n  return [recordCursor, setCursor];\n}\nexport { useCursor };","map":{"version":3,"names":["ref","useCursor","input","selectionRef","recordCursor","value","selectionStart","selectionEnd","beforeTxt","slice","Math","max","afterTxt","setCursor","startPos","length","endsWith","startsWith","beforeLastChar","newIndex","indexOf","setSelectionRange"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/@arco-design/web-vue/es/_hooks/use-cursor.js"],"sourcesContent":["import { ref } from \"vue\";\nfunction useCursor(input) {\n  const selectionRef = ref();\n  function recordCursor() {\n    if (!input.value)\n      return;\n    const { selectionStart, selectionEnd, value } = input.value;\n    if (selectionStart == null || selectionEnd == null)\n      return;\n    const beforeTxt = value.slice(0, Math.max(0, selectionStart));\n    const afterTxt = value.slice(Math.max(0, selectionEnd));\n    selectionRef.value = {\n      selectionStart,\n      selectionEnd,\n      value,\n      beforeTxt,\n      afterTxt\n    };\n  }\n  function setCursor() {\n    if (!input.value || !selectionRef.value)\n      return;\n    const { value } = input.value;\n    const { beforeTxt, afterTxt, selectionStart } = selectionRef.value;\n    if (!beforeTxt || !afterTxt || !selectionStart)\n      return;\n    let startPos = value.length;\n    if (value.endsWith(afterTxt)) {\n      startPos = value.length - afterTxt.length;\n    } else if (value.startsWith(beforeTxt)) {\n      startPos = beforeTxt.length;\n    } else {\n      const beforeLastChar = beforeTxt[selectionStart - 1];\n      const newIndex = value.indexOf(beforeLastChar, selectionStart - 1);\n      if (newIndex !== -1) {\n        startPos = newIndex + 1;\n      }\n    }\n    input.value.setSelectionRange(startPos, startPos);\n  }\n  return [recordCursor, setCursor];\n}\nexport { useCursor };\n"],"mappings":"AAAA,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,SAASA,CAACC,KAAK,EAAE;EACxB,MAAMC,YAAY,GAAGH,GAAG,CAAC,CAAC;EAC1B,SAASI,YAAYA,CAAA,EAAG;IACtB,IAAI,CAACF,KAAK,CAACG,KAAK,EACd;IACF,MAAM;MAAEC,cAAc;MAAEC,YAAY;MAAEF;IAAM,CAAC,GAAGH,KAAK,CAACG,KAAK;IAC3D,IAAIC,cAAc,IAAI,IAAI,IAAIC,YAAY,IAAI,IAAI,EAChD;IACF,MAAMC,SAAS,GAAGH,KAAK,CAACI,KAAK,CAAC,CAAC,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEL,cAAc,CAAC,CAAC;IAC7D,MAAMM,QAAQ,GAAGP,KAAK,CAACI,KAAK,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEJ,YAAY,CAAC,CAAC;IACvDJ,YAAY,CAACE,KAAK,GAAG;MACnBC,cAAc;MACdC,YAAY;MACZF,KAAK;MACLG,SAAS;MACTI;IACF,CAAC;EACH;EACA,SAASC,SAASA,CAAA,EAAG;IACnB,IAAI,CAACX,KAAK,CAACG,KAAK,IAAI,CAACF,YAAY,CAACE,KAAK,EACrC;IACF,MAAM;MAAEA;IAAM,CAAC,GAAGH,KAAK,CAACG,KAAK;IAC7B,MAAM;MAAEG,SAAS;MAAEI,QAAQ;MAAEN;IAAe,CAAC,GAAGH,YAAY,CAACE,KAAK;IAClE,IAAI,CAACG,SAAS,IAAI,CAACI,QAAQ,IAAI,CAACN,cAAc,EAC5C;IACF,IAAIQ,QAAQ,GAAGT,KAAK,CAACU,MAAM;IAC3B,IAAIV,KAAK,CAACW,QAAQ,CAACJ,QAAQ,CAAC,EAAE;MAC5BE,QAAQ,GAAGT,KAAK,CAACU,MAAM,GAAGH,QAAQ,CAACG,MAAM;IAC3C,CAAC,MAAM,IAAIV,KAAK,CAACY,UAAU,CAACT,SAAS,CAAC,EAAE;MACtCM,QAAQ,GAAGN,SAAS,CAACO,MAAM;IAC7B,CAAC,MAAM;MACL,MAAMG,cAAc,GAAGV,SAAS,CAACF,cAAc,GAAG,CAAC,CAAC;MACpD,MAAMa,QAAQ,GAAGd,KAAK,CAACe,OAAO,CAACF,cAAc,EAAEZ,cAAc,GAAG,CAAC,CAAC;MAClE,IAAIa,QAAQ,KAAK,CAAC,CAAC,EAAE;QACnBL,QAAQ,GAAGK,QAAQ,GAAG,CAAC;MACzB;IACF;IACAjB,KAAK,CAACG,KAAK,CAACgB,iBAAiB,CAACP,QAAQ,EAAEA,QAAQ,CAAC;EACnD;EACA,OAAO,CAACV,YAAY,EAAES,SAAS,CAAC;AAClC;AACA,SAASZ,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}