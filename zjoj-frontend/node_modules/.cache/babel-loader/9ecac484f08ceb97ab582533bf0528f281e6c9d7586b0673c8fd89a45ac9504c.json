{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { BugIndicatingError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { autorunOpts } from '../../../../base/common/observable.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nexport function applyEdits(text, edits) {\n  const transformer = new PositionOffsetTransformer(text);\n  const offsetEdits = edits.map(e => {\n    const range = Range.lift(e.range);\n    return {\n      startOffset: transformer.getOffset(range.getStartPosition()),\n      endOffset: transformer.getOffset(range.getEndPosition()),\n      text: e.text\n    };\n  });\n  offsetEdits.sort((a, b) => b.startOffset - a.startOffset);\n  for (const edit of offsetEdits) {\n    text = text.substring(0, edit.startOffset) + edit.text + text.substring(edit.endOffset);\n  }\n  return text;\n}\nclass PositionOffsetTransformer {\n  constructor(text) {\n    this.lineStartOffsetByLineIdx = [];\n    this.lineStartOffsetByLineIdx.push(0);\n    for (let i = 0; i < text.length; i++) {\n      if (text.charAt(i) === '\\n') {\n        this.lineStartOffsetByLineIdx.push(i + 1);\n      }\n    }\n  }\n  getOffset(position) {\n    return this.lineStartOffsetByLineIdx[position.lineNumber - 1] + position.column - 1;\n  }\n}\nconst array = [];\nexport function getReadonlyEmptyArray() {\n  return array;\n}\nexport class ColumnRange {\n  constructor(startColumn, endColumnExclusive) {\n    this.startColumn = startColumn;\n    this.endColumnExclusive = endColumnExclusive;\n    if (startColumn > endColumnExclusive) {\n      throw new BugIndicatingError(`startColumn ${startColumn} cannot be after endColumnExclusive ${endColumnExclusive}`);\n    }\n  }\n  toRange(lineNumber) {\n    return new Range(lineNumber, this.startColumn, lineNumber, this.endColumnExclusive);\n  }\n  equals(other) {\n    return this.startColumn === other.startColumn && this.endColumnExclusive === other.endColumnExclusive;\n  }\n}\nexport function applyObservableDecorations(editor, decorations) {\n  const d = new DisposableStore();\n  const decorationsCollection = editor.createDecorationsCollection();\n  d.add(autorunOpts({\n    debugName: () => `Apply decorations from ${decorations.debugName}`\n  }, reader => {\n    const d = decorations.read(reader);\n    decorationsCollection.set(d);\n  }));\n  d.add({\n    dispose: () => {\n      decorationsCollection.clear();\n    }\n  });\n  return d;\n}\nexport function addPositions(pos1, pos2) {\n  return new Position(pos1.lineNumber + pos2.lineNumber - 1, pos2.lineNumber === 1 ? pos1.column + pos2.column - 1 : pos2.column);\n}\nexport function lengthOfText(text) {\n  let line = 1;\n  let column = 1;\n  for (const c of text) {\n    if (c === '\\n') {\n      line++;\n      column = 1;\n    } else {\n      column++;\n    }\n  }\n  return new Position(line, column);\n}","map":{"version":3,"names":["BugIndicatingError","DisposableStore","autorunOpts","Position","Range","applyEdits","text","edits","transformer","PositionOffsetTransformer","offsetEdits","map","e","range","lift","startOffset","getOffset","getStartPosition","endOffset","getEndPosition","sort","a","b","edit","substring","constructor","lineStartOffsetByLineIdx","push","i","length","charAt","position","lineNumber","column","array","getReadonlyEmptyArray","ColumnRange","startColumn","endColumnExclusive","toRange","equals","other","applyObservableDecorations","editor","decorations","d","decorationsCollection","createDecorationsCollection","add","debugName","reader","read","set","dispose","clear","addPositions","pos1","pos2","lengthOfText","line","c"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/utils.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { BugIndicatingError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { autorunOpts } from '../../../../base/common/observable.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nexport function applyEdits(text, edits) {\n    const transformer = new PositionOffsetTransformer(text);\n    const offsetEdits = edits.map(e => {\n        const range = Range.lift(e.range);\n        return ({\n            startOffset: transformer.getOffset(range.getStartPosition()),\n            endOffset: transformer.getOffset(range.getEndPosition()),\n            text: e.text\n        });\n    });\n    offsetEdits.sort((a, b) => b.startOffset - a.startOffset);\n    for (const edit of offsetEdits) {\n        text = text.substring(0, edit.startOffset) + edit.text + text.substring(edit.endOffset);\n    }\n    return text;\n}\nclass PositionOffsetTransformer {\n    constructor(text) {\n        this.lineStartOffsetByLineIdx = [];\n        this.lineStartOffsetByLineIdx.push(0);\n        for (let i = 0; i < text.length; i++) {\n            if (text.charAt(i) === '\\n') {\n                this.lineStartOffsetByLineIdx.push(i + 1);\n            }\n        }\n    }\n    getOffset(position) {\n        return this.lineStartOffsetByLineIdx[position.lineNumber - 1] + position.column - 1;\n    }\n}\nconst array = [];\nexport function getReadonlyEmptyArray() {\n    return array;\n}\nexport class ColumnRange {\n    constructor(startColumn, endColumnExclusive) {\n        this.startColumn = startColumn;\n        this.endColumnExclusive = endColumnExclusive;\n        if (startColumn > endColumnExclusive) {\n            throw new BugIndicatingError(`startColumn ${startColumn} cannot be after endColumnExclusive ${endColumnExclusive}`);\n        }\n    }\n    toRange(lineNumber) {\n        return new Range(lineNumber, this.startColumn, lineNumber, this.endColumnExclusive);\n    }\n    equals(other) {\n        return this.startColumn === other.startColumn\n            && this.endColumnExclusive === other.endColumnExclusive;\n    }\n}\nexport function applyObservableDecorations(editor, decorations) {\n    const d = new DisposableStore();\n    const decorationsCollection = editor.createDecorationsCollection();\n    d.add(autorunOpts({ debugName: () => `Apply decorations from ${decorations.debugName}` }, reader => {\n        const d = decorations.read(reader);\n        decorationsCollection.set(d);\n    }));\n    d.add({\n        dispose: () => {\n            decorationsCollection.clear();\n        }\n    });\n    return d;\n}\nexport function addPositions(pos1, pos2) {\n    return new Position(pos1.lineNumber + pos2.lineNumber - 1, pos2.lineNumber === 1 ? pos1.column + pos2.column - 1 : pos2.column);\n}\nexport function lengthOfText(text) {\n    let line = 1;\n    let column = 1;\n    for (const c of text) {\n        if (c === '\\n') {\n            line++;\n            column = 1;\n        }\n        else {\n            column++;\n        }\n    }\n    return new Position(line, column);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}