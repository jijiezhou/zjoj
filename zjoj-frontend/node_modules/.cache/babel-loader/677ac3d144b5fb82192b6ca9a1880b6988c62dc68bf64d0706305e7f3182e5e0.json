{"ast":null,"code":"import { defineComponent, ref, watch, onMounted, openBlock, createElementBlock, computed, nextTick, onUnmounted } from \"vue\";\nimport { Editor, getProcessor } from \"bytemd\";\nconst _sfc_main$1 = defineComponent({\n  props: {\n    value: String,\n    plugins: Array,\n    sanitize: Function,\n    remarkRehype: Object,\n    mode: String,\n    previewDebounce: Number,\n    placeholder: String,\n    editorConfig: Object,\n    locale: Object,\n    uploadImages: Function\n  },\n  emits: [\"change\"],\n  setup(props, {\n    emit\n  }) {\n    const el = ref(null);\n    const editorRef = ref(null);\n    watch(() => props, newValue => {\n      var _a;\n      const copy = {\n        ...newValue\n      };\n      for (let k in copy) {\n        if (copy[k] === void 0) {\n          delete copy[k];\n        }\n      }\n      (_a = editorRef.value) == null ? void 0 : _a.$set(copy);\n    }, {\n      deep: true\n    });\n    onMounted(() => {\n      const editor2 = new Editor({\n        target: el.value,\n        props\n      });\n      editor2.$on(\"change\", e => {\n        emit(\"change\", e.detail.value);\n      });\n      editorRef.value = editor2;\n    });\n    return {\n      el\n    };\n  }\n});\nconst _export_sfc = (sfc, props) => {\n  const target = sfc.__vccOpts || sfc;\n  for (const [key, val] of props) {\n    target[key] = val;\n  }\n  return target;\n};\nconst _hoisted_1$1 = {\n  ref: \"el\"\n};\nfunction _sfc_render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", _hoisted_1$1, null, 512);\n}\nconst editor = /* @__PURE__ */_export_sfc(_sfc_main$1, [[\"render\", _sfc_render$1]]);\nconst _sfc_main = defineComponent({\n  props: [\"value\", \"plugins\", \"sanitize\", \"remarkRehype\"],\n  setup(props, ctx) {\n    const markdownBody = ref(null);\n    const cbs = ref([]);\n    const file = computed(() => {\n      return getProcessor(props).processSync(props.value);\n    });\n    const needUpdate = computed(() => {\n      return [file, props.plugins, props.sanitize, props.remarkRehype];\n    });\n    watch(needUpdate, () => {\n      off();\n      nextTick(() => {\n        on();\n      });\n    }, {\n      deep: true\n    });\n    onMounted(() => {\n      on();\n    });\n    onUnmounted(() => {\n      off();\n    });\n    const handleClick = e => {\n      const $ = e.target;\n      if ($.tagName !== \"A\") return;\n      const href = $.getAttribute(\"href\");\n      if (!href || !href.startsWith(\"#\")) return;\n      const dest = markdownBody.value.querySelector(\"#user-content-\" + href.slice(1));\n      if (dest) dest.scrollIntoView();\n    };\n    const off = () => {\n      if (cbs.value.length) {\n        cbs.value.forEach(cb => cb && cb());\n      }\n    };\n    const on = () => {\n      if (props.plugins && file) {\n        cbs.value = props.plugins.map(({\n          viewerEffect\n        }) => viewerEffect && viewerEffect({\n          markdownBody: markdownBody.value,\n          file\n        }));\n      }\n    };\n    return {\n      markdownBody,\n      file,\n      handleClick\n    };\n  }\n});\nconst _hoisted_1 = [\"innerHTML\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    innerHTML: _ctx.file.toString(),\n    className: \"markdown-body\",\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.handleClick && _ctx.handleClick(...args)),\n    ref: \"markdownBody\"\n  }, null, 8, _hoisted_1);\n}\nconst viewer = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { editor as Editor, viewer as Viewer };","map":{"version":3,"names":["defineComponent","ref","watch","onMounted","openBlock","createElementBlock","computed","nextTick","onUnmounted","Editor","getProcessor","_sfc_main$1","props","value","String","plugins","Array","sanitize","Function","remarkRehype","Object","mode","previewDebounce","Number","placeholder","editorConfig","locale","uploadImages","emits","setup","emit","el","editorRef","newValue","_a","copy","k","$set","deep","editor2","target","$on","e","detail","_export_sfc","sfc","__vccOpts","key","val","_hoisted_1$1","_sfc_render$1","_ctx","_cache","$props","$setup","$data","$options","editor","_sfc_main","ctx","markdownBody","cbs","file","processSync","needUpdate","off","on","handleClick","$","tagName","href","getAttribute","startsWith","dest","querySelector","slice","scrollIntoView","length","forEach","cb","map","viewerEffect","_hoisted_1","_sfc_render","innerHTML","toString","className","onClick","args","viewer","Viewer"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/@bytemd/vue-next/dist/index.mjs"],"sourcesContent":["import { defineComponent, ref, watch, onMounted, openBlock, createElementBlock, computed, nextTick, onUnmounted } from \"vue\";\nimport { Editor, getProcessor } from \"bytemd\";\nconst _sfc_main$1 = defineComponent({\n  props: {\n    value: String,\n    plugins: Array,\n    sanitize: Function,\n    remarkRehype: Object,\n    mode: String,\n    previewDebounce: Number,\n    placeholder: String,\n    editorConfig: Object,\n    locale: Object,\n    uploadImages: Function\n  },\n  emits: [\"change\"],\n  setup(props, { emit }) {\n    const el = ref(null);\n    const editorRef = ref(null);\n    watch(\n      () => props,\n      (newValue) => {\n        var _a;\n        const copy = { ...newValue };\n        for (let k in copy) {\n          if (copy[k] === void 0) {\n            delete copy[k];\n          }\n        }\n        (_a = editorRef.value) == null ? void 0 : _a.$set(copy);\n      },\n      { deep: true }\n    );\n    onMounted(() => {\n      const editor2 = new Editor({\n        target: el.value,\n        props\n      });\n      editor2.$on(\"change\", (e) => {\n        emit(\"change\", e.detail.value);\n      });\n      editorRef.value = editor2;\n    });\n    return { el };\n  }\n});\nconst _export_sfc = (sfc, props) => {\n  const target = sfc.__vccOpts || sfc;\n  for (const [key, val] of props) {\n    target[key] = val;\n  }\n  return target;\n};\nconst _hoisted_1$1 = { ref: \"el\" };\nfunction _sfc_render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", _hoisted_1$1, null, 512);\n}\nconst editor = /* @__PURE__ */ _export_sfc(_sfc_main$1, [[\"render\", _sfc_render$1]]);\nconst _sfc_main = defineComponent({\n  props: [\"value\", \"plugins\", \"sanitize\", \"remarkRehype\"],\n  setup(props, ctx) {\n    const markdownBody = ref(null);\n    const cbs = ref([]);\n    const file = computed(() => {\n      return getProcessor(props).processSync(props.value);\n    });\n    const needUpdate = computed(() => {\n      return [file, props.plugins, props.sanitize, props.remarkRehype];\n    });\n    watch(\n      needUpdate,\n      () => {\n        off();\n        nextTick(() => {\n          on();\n        });\n      },\n      { deep: true }\n    );\n    onMounted(() => {\n      on();\n    });\n    onUnmounted(() => {\n      off();\n    });\n    const handleClick = (e) => {\n      const $ = e.target;\n      if ($.tagName !== \"A\")\n        return;\n      const href = $.getAttribute(\"href\");\n      if (!href || !href.startsWith(\"#\"))\n        return;\n      const dest = markdownBody.value.querySelector(\n        \"#user-content-\" + href.slice(1)\n      );\n      if (dest)\n        dest.scrollIntoView();\n    };\n    const off = () => {\n      if (cbs.value.length) {\n        cbs.value.forEach((cb) => cb && cb());\n      }\n    };\n    const on = () => {\n      if (props.plugins && file) {\n        cbs.value = props.plugins.map(\n          ({ viewerEffect }) => viewerEffect && viewerEffect({ markdownBody: markdownBody.value, file })\n        );\n      }\n    };\n    return { markdownBody, file, handleClick };\n  }\n});\nconst _hoisted_1 = [\"innerHTML\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    innerHTML: _ctx.file.toString(),\n    className: \"markdown-body\",\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.handleClick && _ctx.handleClick(...args)),\n    ref: \"markdownBody\"\n  }, null, 8, _hoisted_1);\n}\nconst viewer = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport {\n  editor as Editor,\n  viewer as Viewer\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}