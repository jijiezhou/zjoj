{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { windowOpenNoOpener } from '../../../base/browser/dom.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { AbstractCodeEditorService } from '../../browser/services/abstractCodeEditorService.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nlet StandaloneCodeEditorService = class StandaloneCodeEditorService extends AbstractCodeEditorService {\n  constructor(contextKeyService, themeService) {\n    super(themeService);\n    this._register(this.onCodeEditorAdd(() => this._checkContextKey()));\n    this._register(this.onCodeEditorRemove(() => this._checkContextKey()));\n    this._editorIsOpen = contextKeyService.createKey('editorIsOpen', false);\n    this._activeCodeEditor = null;\n    this._register(this.registerCodeEditorOpenHandler(async (input, source, sideBySide) => {\n      if (!source) {\n        return null;\n      }\n      return this.doOpenEditor(source, input);\n    }));\n  }\n  _checkContextKey() {\n    let hasCodeEditor = false;\n    for (const editor of this.listCodeEditors()) {\n      if (!editor.isSimpleWidget) {\n        hasCodeEditor = true;\n        break;\n      }\n    }\n    this._editorIsOpen.set(hasCodeEditor);\n  }\n  setActiveCodeEditor(activeCodeEditor) {\n    this._activeCodeEditor = activeCodeEditor;\n  }\n  getActiveCodeEditor() {\n    return this._activeCodeEditor;\n  }\n  doOpenEditor(editor, input) {\n    const model = this.findModel(editor, input.resource);\n    if (!model) {\n      if (input.resource) {\n        const schema = input.resource.scheme;\n        if (schema === Schemas.http || schema === Schemas.https) {\n          // This is a fully qualified http or https URL\n          windowOpenNoOpener(input.resource.toString());\n          return editor;\n        }\n      }\n      return null;\n    }\n    const selection = input.options ? input.options.selection : null;\n    if (selection) {\n      if (typeof selection.endLineNumber === 'number' && typeof selection.endColumn === 'number') {\n        editor.setSelection(selection);\n        editor.revealRangeInCenter(selection, 1 /* ScrollType.Immediate */);\n      } else {\n        const pos = {\n          lineNumber: selection.startLineNumber,\n          column: selection.startColumn\n        };\n        editor.setPosition(pos);\n        editor.revealPositionInCenter(pos, 1 /* ScrollType.Immediate */);\n      }\n    }\n    return editor;\n  }\n  findModel(editor, resource) {\n    const model = editor.getModel();\n    if (model && model.uri.toString() !== resource.toString()) {\n      return null;\n    }\n    return model;\n  }\n};\nStandaloneCodeEditorService = __decorate([__param(0, IContextKeyService), __param(1, IThemeService)], StandaloneCodeEditorService);\nexport { StandaloneCodeEditorService };\nregisterSingleton(ICodeEditorService, StandaloneCodeEditorService, 0 /* InstantiationType.Eager */);","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","windowOpenNoOpener","Schemas","AbstractCodeEditorService","ICodeEditorService","IContextKeyService","registerSingleton","IThemeService","StandaloneCodeEditorService","constructor","contextKeyService","themeService","_register","onCodeEditorAdd","_checkContextKey","onCodeEditorRemove","_editorIsOpen","createKey","_activeCodeEditor","registerCodeEditorOpenHandler","input","source","sideBySide","doOpenEditor","hasCodeEditor","editor","listCodeEditors","isSimpleWidget","set","setActiveCodeEditor","activeCodeEditor","getActiveCodeEditor","model","findModel","resource","schema","scheme","http","https","toString","selection","options","endLineNumber","endColumn","setSelection","revealRangeInCenter","pos","lineNumber","startLineNumber","column","startColumn","setPosition","revealPositionInCenter","getModel","uri"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneCodeEditorService.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { windowOpenNoOpener } from '../../../base/browser/dom.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { AbstractCodeEditorService } from '../../browser/services/abstractCodeEditorService.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nlet StandaloneCodeEditorService = class StandaloneCodeEditorService extends AbstractCodeEditorService {\n    constructor(contextKeyService, themeService) {\n        super(themeService);\n        this._register(this.onCodeEditorAdd(() => this._checkContextKey()));\n        this._register(this.onCodeEditorRemove(() => this._checkContextKey()));\n        this._editorIsOpen = contextKeyService.createKey('editorIsOpen', false);\n        this._activeCodeEditor = null;\n        this._register(this.registerCodeEditorOpenHandler(async (input, source, sideBySide) => {\n            if (!source) {\n                return null;\n            }\n            return this.doOpenEditor(source, input);\n        }));\n    }\n    _checkContextKey() {\n        let hasCodeEditor = false;\n        for (const editor of this.listCodeEditors()) {\n            if (!editor.isSimpleWidget) {\n                hasCodeEditor = true;\n                break;\n            }\n        }\n        this._editorIsOpen.set(hasCodeEditor);\n    }\n    setActiveCodeEditor(activeCodeEditor) {\n        this._activeCodeEditor = activeCodeEditor;\n    }\n    getActiveCodeEditor() {\n        return this._activeCodeEditor;\n    }\n    doOpenEditor(editor, input) {\n        const model = this.findModel(editor, input.resource);\n        if (!model) {\n            if (input.resource) {\n                const schema = input.resource.scheme;\n                if (schema === Schemas.http || schema === Schemas.https) {\n                    // This is a fully qualified http or https URL\n                    windowOpenNoOpener(input.resource.toString());\n                    return editor;\n                }\n            }\n            return null;\n        }\n        const selection = (input.options ? input.options.selection : null);\n        if (selection) {\n            if (typeof selection.endLineNumber === 'number' && typeof selection.endColumn === 'number') {\n                editor.setSelection(selection);\n                editor.revealRangeInCenter(selection, 1 /* ScrollType.Immediate */);\n            }\n            else {\n                const pos = {\n                    lineNumber: selection.startLineNumber,\n                    column: selection.startColumn\n                };\n                editor.setPosition(pos);\n                editor.revealPositionInCenter(pos, 1 /* ScrollType.Immediate */);\n            }\n        }\n        return editor;\n    }\n    findModel(editor, resource) {\n        const model = editor.getModel();\n        if (model && model.uri.toString() !== resource.toString()) {\n            return null;\n        }\n        return model;\n    }\n};\nStandaloneCodeEditorService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, IThemeService)\n], StandaloneCodeEditorService);\nexport { StandaloneCodeEditorService };\nregisterSingleton(ICodeEditorService, StandaloneCodeEditorService, 0 /* InstantiationType.Eager */);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}