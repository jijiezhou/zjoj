{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nexport class FormattingEdit {\n  static _handleEolEdits(editor, edits) {\n    let newEol = undefined;\n    const singleEdits = [];\n    for (const edit of edits) {\n      if (typeof edit.eol === 'number') {\n        newEol = edit.eol;\n      }\n      if (edit.range && typeof edit.text === 'string') {\n        singleEdits.push(edit);\n      }\n    }\n    if (typeof newEol === 'number') {\n      if (editor.hasModel()) {\n        editor.getModel().pushEOL(newEol);\n      }\n    }\n    return singleEdits;\n  }\n  static _isFullModelReplaceEdit(editor, edit) {\n    if (!editor.hasModel()) {\n      return false;\n    }\n    const model = editor.getModel();\n    const editRange = model.validateRange(edit.range);\n    const fullModelRange = model.getFullModelRange();\n    return fullModelRange.equalsRange(editRange);\n  }\n  static execute(editor, _edits, addUndoStops) {\n    if (addUndoStops) {\n      editor.pushUndoStop();\n    }\n    const scrollState = StableEditorScrollState.capture(editor);\n    const edits = FormattingEdit._handleEolEdits(editor, _edits);\n    if (edits.length === 1 && FormattingEdit._isFullModelReplaceEdit(editor, edits[0])) {\n      // We use replace semantics and hope that markers stay put...\n      editor.executeEdits('formatEditsCommand', edits.map(edit => EditOperation.replace(Range.lift(edit.range), edit.text)));\n    } else {\n      editor.executeEdits('formatEditsCommand', edits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n    }\n    if (addUndoStops) {\n      editor.pushUndoStop();\n    }\n    scrollState.restoreRelativeVerticalPositionOfCursor(editor);\n  }\n}","map":{"version":3,"names":["EditOperation","Range","StableEditorScrollState","FormattingEdit","_handleEolEdits","editor","edits","newEol","undefined","singleEdits","edit","eol","range","text","push","hasModel","getModel","pushEOL","_isFullModelReplaceEdit","model","editRange","validateRange","fullModelRange","getFullModelRange","equalsRange","execute","_edits","addUndoStops","pushUndoStop","scrollState","capture","length","executeEdits","map","replace","lift","replaceMove","restoreRelativeVerticalPositionOfCursor"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/contrib/format/browser/formattingEdit.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nexport class FormattingEdit {\n    static _handleEolEdits(editor, edits) {\n        let newEol = undefined;\n        const singleEdits = [];\n        for (const edit of edits) {\n            if (typeof edit.eol === 'number') {\n                newEol = edit.eol;\n            }\n            if (edit.range && typeof edit.text === 'string') {\n                singleEdits.push(edit);\n            }\n        }\n        if (typeof newEol === 'number') {\n            if (editor.hasModel()) {\n                editor.getModel().pushEOL(newEol);\n            }\n        }\n        return singleEdits;\n    }\n    static _isFullModelReplaceEdit(editor, edit) {\n        if (!editor.hasModel()) {\n            return false;\n        }\n        const model = editor.getModel();\n        const editRange = model.validateRange(edit.range);\n        const fullModelRange = model.getFullModelRange();\n        return fullModelRange.equalsRange(editRange);\n    }\n    static execute(editor, _edits, addUndoStops) {\n        if (addUndoStops) {\n            editor.pushUndoStop();\n        }\n        const scrollState = StableEditorScrollState.capture(editor);\n        const edits = FormattingEdit._handleEolEdits(editor, _edits);\n        if (edits.length === 1 && FormattingEdit._isFullModelReplaceEdit(editor, edits[0])) {\n            // We use replace semantics and hope that markers stay put...\n            editor.executeEdits('formatEditsCommand', edits.map(edit => EditOperation.replace(Range.lift(edit.range), edit.text)));\n        }\n        else {\n            editor.executeEdits('formatEditsCommand', edits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n        }\n        if (addUndoStops) {\n            editor.pushUndoStop();\n        }\n        scrollState.restoreRelativeVerticalPositionOfCursor(editor);\n    }\n}\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA,SAASA,aAAa,QAAQ,uCAAuC;AACrE,SAASC,KAAK,QAAQ,+BAA+B;AACrD,SAASC,uBAAuB,QAAQ,wCAAwC;AAChF,OAAO,MAAMC,cAAc,CAAC;EACxB,OAAOC,eAAeA,CAACC,MAAM,EAAEC,KAAK,EAAE;IAClC,IAAIC,MAAM,GAAGC,SAAS;IACtB,MAAMC,WAAW,GAAG,EAAE;IACtB,KAAK,MAAMC,IAAI,IAAIJ,KAAK,EAAE;MACtB,IAAI,OAAOI,IAAI,CAACC,GAAG,KAAK,QAAQ,EAAE;QAC9BJ,MAAM,GAAGG,IAAI,CAACC,GAAG;MACrB;MACA,IAAID,IAAI,CAACE,KAAK,IAAI,OAAOF,IAAI,CAACG,IAAI,KAAK,QAAQ,EAAE;QAC7CJ,WAAW,CAACK,IAAI,CAACJ,IAAI,CAAC;MAC1B;IACJ;IACA,IAAI,OAAOH,MAAM,KAAK,QAAQ,EAAE;MAC5B,IAAIF,MAAM,CAACU,QAAQ,CAAC,CAAC,EAAE;QACnBV,MAAM,CAACW,QAAQ,CAAC,CAAC,CAACC,OAAO,CAACV,MAAM,CAAC;MACrC;IACJ;IACA,OAAOE,WAAW;EACtB;EACA,OAAOS,uBAAuBA,CAACb,MAAM,EAAEK,IAAI,EAAE;IACzC,IAAI,CAACL,MAAM,CAACU,QAAQ,CAAC,CAAC,EAAE;MACpB,OAAO,KAAK;IAChB;IACA,MAAMI,KAAK,GAAGd,MAAM,CAACW,QAAQ,CAAC,CAAC;IAC/B,MAAMI,SAAS,GAAGD,KAAK,CAACE,aAAa,CAACX,IAAI,CAACE,KAAK,CAAC;IACjD,MAAMU,cAAc,GAAGH,KAAK,CAACI,iBAAiB,CAAC,CAAC;IAChD,OAAOD,cAAc,CAACE,WAAW,CAACJ,SAAS,CAAC;EAChD;EACA,OAAOK,OAAOA,CAACpB,MAAM,EAAEqB,MAAM,EAAEC,YAAY,EAAE;IACzC,IAAIA,YAAY,EAAE;MACdtB,MAAM,CAACuB,YAAY,CAAC,CAAC;IACzB;IACA,MAAMC,WAAW,GAAG3B,uBAAuB,CAAC4B,OAAO,CAACzB,MAAM,CAAC;IAC3D,MAAMC,KAAK,GAAGH,cAAc,CAACC,eAAe,CAACC,MAAM,EAAEqB,MAAM,CAAC;IAC5D,IAAIpB,KAAK,CAACyB,MAAM,KAAK,CAAC,IAAI5B,cAAc,CAACe,uBAAuB,CAACb,MAAM,EAAEC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE;MAChF;MACAD,MAAM,CAAC2B,YAAY,CAAC,oBAAoB,EAAE1B,KAAK,CAAC2B,GAAG,CAACvB,IAAI,IAAIV,aAAa,CAACkC,OAAO,CAACjC,KAAK,CAACkC,IAAI,CAACzB,IAAI,CAACE,KAAK,CAAC,EAAEF,IAAI,CAACG,IAAI,CAAC,CAAC,CAAC;IAC1H,CAAC,MACI;MACDR,MAAM,CAAC2B,YAAY,CAAC,oBAAoB,EAAE1B,KAAK,CAAC2B,GAAG,CAACvB,IAAI,IAAIV,aAAa,CAACoC,WAAW,CAACnC,KAAK,CAACkC,IAAI,CAACzB,IAAI,CAACE,KAAK,CAAC,EAAEF,IAAI,CAACG,IAAI,CAAC,CAAC,CAAC;IAC9H;IACA,IAAIc,YAAY,EAAE;MACdtB,MAAM,CAACuB,YAAY,CAAC,CAAC;IACzB;IACAC,WAAW,CAACQ,uCAAuC,CAAChC,MAAM,CAAC;EAC/D;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}