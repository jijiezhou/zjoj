{"ast":null,"code":"import { defineComponent, inject, computed, createVNode } from \"vue\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport { getOperationStyle, getOperationFixedCls, getLeafKeys, getSelectionStatus } from \"./utils.js\";\nimport Checkbox from \"../checkbox/index.js\";\nimport Radio from \"../radio/index.js\";\nimport IconPlus from \"../icon/icon-plus/index.js\";\nimport IconMinus from \"../icon/icon-minus/index.js\";\nimport IconDragDotVertical from \"../icon/icon-drag-dot-vertical/index.js\";\nimport { tableInjectionKey } from \"./context.js\";\nvar OperationTd = defineComponent({\n  name: \"OperationTd\",\n  components: {\n    Checkbox,\n    Radio,\n    IconPlus,\n    IconMinus\n  },\n  props: {\n    operationColumn: {\n      type: Object,\n      required: true\n    },\n    operations: {\n      type: Array,\n      required: true\n    },\n    record: {\n      type: Object,\n      required: true\n    },\n    hasExpand: {\n      type: Boolean,\n      default: false\n    },\n    selectedRowKeys: {\n      type: Array\n    },\n    renderExpandBtn: {\n      type: Function\n    },\n    colSpan: {\n      type: Number,\n      default: 1\n    },\n    rowSpan: {\n      type: Number,\n      default: 1\n    },\n    summary: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"select\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const prefixCls = getPrefixCls(\"table\");\n    const tableCtx = inject(tableInjectionKey, {});\n    const style = computed(() => getOperationStyle(props.operationColumn, props.operations));\n    const cls = computed(() => [`${prefixCls}-td`, `${prefixCls}-operation`, {\n      [`${prefixCls}-checkbox`]: props.operationColumn.name === \"selection-checkbox\",\n      [`${prefixCls}-radio`]: props.operationColumn.name === \"selection-radio\",\n      [`${prefixCls}-expand`]: props.operationColumn.name === \"expand\",\n      [`${prefixCls}-drag-handle`]: props.operationColumn.name === \"drag-handle\"\n    }, ...getOperationFixedCls(prefixCls, props.operationColumn)]);\n    const leafKeys = computed(() => getLeafKeys(props.record));\n    const selectionStatus = computed(() => {\n      var _a;\n      return getSelectionStatus((_a = tableCtx.currentSelectedRowKeys) != null ? _a : [], leafKeys.value);\n    });\n    const renderContent = () => {\n      var _a, _b, _c, _d, _e, _f;\n      if (props.summary) {\n        return null;\n      }\n      if (props.operationColumn.render) {\n        return props.operationColumn.render(props.record.raw);\n      }\n      if (props.operationColumn.name === \"selection-checkbox\") {\n        const value = props.record.key;\n        if (!tableCtx.checkStrictly && !props.record.isLeaf) {\n          return createVNode(Checkbox, {\n            \"modelValue\": selectionStatus.value.checked,\n            \"indeterminate\": selectionStatus.value.indeterminate,\n            \"disabled\": Boolean(props.record.disabled),\n            \"uninjectGroupContext\": true,\n            \"onChange\": checked => {\n              var _a2;\n              return (_a2 = tableCtx.onSelectAllLeafs) == null ? void 0 : _a2.call(tableCtx, props.record, checked);\n            },\n            \"onClick\": ev => ev.stopPropagation()\n          }, null);\n        }\n        return createVNode(Checkbox, {\n          \"modelValue\": (_b = (_a = props.selectedRowKeys) == null ? void 0 : _a.includes(value)) != null ? _b : false,\n          \"disabled\": Boolean(props.record.disabled),\n          \"uninjectGroupContext\": true,\n          \"onChange\": checked => {\n            var _a2;\n            return (_a2 = tableCtx.onSelect) == null ? void 0 : _a2.call(tableCtx, checked, props.record);\n          },\n          \"onClick\": ev => ev.stopPropagation()\n        }, null);\n      }\n      if (props.operationColumn.name === \"selection-radio\") {\n        const value = props.record.key;\n        return createVNode(Radio, {\n          \"modelValue\": (_d = (_c = props.selectedRowKeys) == null ? void 0 : _c.includes(value)) != null ? _d : false,\n          \"disabled\": Boolean(props.record.disabled),\n          \"uninjectGroupContext\": true,\n          \"onChange\": checked => {\n            var _a2;\n            return (_a2 = tableCtx.onSelect) == null ? void 0 : _a2.call(tableCtx, checked, props.record);\n          },\n          \"onClick\": ev => ev.stopPropagation()\n        }, null);\n      }\n      if (props.operationColumn.name === \"expand\") {\n        if (props.hasExpand && props.renderExpandBtn) {\n          return props.renderExpandBtn(props.record);\n        }\n        return null;\n      }\n      if (props.operationColumn.name === \"drag-handle\") {\n        return (_f = (_e = slots[\"drag-handle-icon\"]) == null ? void 0 : _e.call(slots)) != null ? _f : createVNode(IconDragDotVertical, null, null);\n      }\n      return null;\n    };\n    return () => createVNode(\"td\", {\n      \"class\": cls.value,\n      \"style\": style.value,\n      \"rowspan\": props.rowSpan > 1 ? props.rowSpan : void 0,\n      \"colspan\": props.colSpan > 1 ? props.colSpan : void 0\n    }, [createVNode(\"span\", {\n      \"class\": `${prefixCls}-cell`\n    }, [renderContent()])]);\n  }\n});\nexport { OperationTd as default };","map":{"version":3,"names":["defineComponent","inject","computed","createVNode","getPrefixCls","getOperationStyle","getOperationFixedCls","getLeafKeys","getSelectionStatus","Checkbox","Radio","IconPlus","IconMinus","IconDragDotVertical","tableInjectionKey","OperationTd","name","components","props","operationColumn","type","Object","required","operations","Array","record","hasExpand","Boolean","default","selectedRowKeys","renderExpandBtn","Function","colSpan","Number","rowSpan","summary","emits","setup","emit","slots","prefixCls","tableCtx","style","cls","leafKeys","selectionStatus","_a","currentSelectedRowKeys","value","renderContent","_b","_c","_d","_e","_f","render","raw","key","checkStrictly","isLeaf","checked","indeterminate","disabled","_a2","onSelectAllLeafs","call","ev","stopPropagation","includes","onSelect"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/@arco-design/web-vue/es/table/table-operation-td.js"],"sourcesContent":["import { defineComponent, inject, computed, createVNode } from \"vue\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport { getOperationStyle, getOperationFixedCls, getLeafKeys, getSelectionStatus } from \"./utils.js\";\nimport Checkbox from \"../checkbox/index.js\";\nimport Radio from \"../radio/index.js\";\nimport IconPlus from \"../icon/icon-plus/index.js\";\nimport IconMinus from \"../icon/icon-minus/index.js\";\nimport IconDragDotVertical from \"../icon/icon-drag-dot-vertical/index.js\";\nimport { tableInjectionKey } from \"./context.js\";\nvar OperationTd = defineComponent({\n  name: \"OperationTd\",\n  components: {\n    Checkbox,\n    Radio,\n    IconPlus,\n    IconMinus\n  },\n  props: {\n    operationColumn: {\n      type: Object,\n      required: true\n    },\n    operations: {\n      type: Array,\n      required: true\n    },\n    record: {\n      type: Object,\n      required: true\n    },\n    hasExpand: {\n      type: Boolean,\n      default: false\n    },\n    selectedRowKeys: {\n      type: Array\n    },\n    renderExpandBtn: {\n      type: Function\n    },\n    colSpan: {\n      type: Number,\n      default: 1\n    },\n    rowSpan: {\n      type: Number,\n      default: 1\n    },\n    summary: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"select\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const prefixCls = getPrefixCls(\"table\");\n    const tableCtx = inject(tableInjectionKey, {});\n    const style = computed(() => getOperationStyle(props.operationColumn, props.operations));\n    const cls = computed(() => [`${prefixCls}-td`, `${prefixCls}-operation`, {\n      [`${prefixCls}-checkbox`]: props.operationColumn.name === \"selection-checkbox\",\n      [`${prefixCls}-radio`]: props.operationColumn.name === \"selection-radio\",\n      [`${prefixCls}-expand`]: props.operationColumn.name === \"expand\",\n      [`${prefixCls}-drag-handle`]: props.operationColumn.name === \"drag-handle\"\n    }, ...getOperationFixedCls(prefixCls, props.operationColumn)]);\n    const leafKeys = computed(() => getLeafKeys(props.record));\n    const selectionStatus = computed(() => {\n      var _a;\n      return getSelectionStatus((_a = tableCtx.currentSelectedRowKeys) != null ? _a : [], leafKeys.value);\n    });\n    const renderContent = () => {\n      var _a, _b, _c, _d, _e, _f;\n      if (props.summary) {\n        return null;\n      }\n      if (props.operationColumn.render) {\n        return props.operationColumn.render(props.record.raw);\n      }\n      if (props.operationColumn.name === \"selection-checkbox\") {\n        const value = props.record.key;\n        if (!tableCtx.checkStrictly && !props.record.isLeaf) {\n          return createVNode(Checkbox, {\n            \"modelValue\": selectionStatus.value.checked,\n            \"indeterminate\": selectionStatus.value.indeterminate,\n            \"disabled\": Boolean(props.record.disabled),\n            \"uninjectGroupContext\": true,\n            \"onChange\": (checked) => {\n              var _a2;\n              return (_a2 = tableCtx.onSelectAllLeafs) == null ? void 0 : _a2.call(tableCtx, props.record, checked);\n            },\n            \"onClick\": (ev) => ev.stopPropagation()\n          }, null);\n        }\n        return createVNode(Checkbox, {\n          \"modelValue\": (_b = (_a = props.selectedRowKeys) == null ? void 0 : _a.includes(value)) != null ? _b : false,\n          \"disabled\": Boolean(props.record.disabled),\n          \"uninjectGroupContext\": true,\n          \"onChange\": (checked) => {\n            var _a2;\n            return (_a2 = tableCtx.onSelect) == null ? void 0 : _a2.call(tableCtx, checked, props.record);\n          },\n          \"onClick\": (ev) => ev.stopPropagation()\n        }, null);\n      }\n      if (props.operationColumn.name === \"selection-radio\") {\n        const value = props.record.key;\n        return createVNode(Radio, {\n          \"modelValue\": (_d = (_c = props.selectedRowKeys) == null ? void 0 : _c.includes(value)) != null ? _d : false,\n          \"disabled\": Boolean(props.record.disabled),\n          \"uninjectGroupContext\": true,\n          \"onChange\": (checked) => {\n            var _a2;\n            return (_a2 = tableCtx.onSelect) == null ? void 0 : _a2.call(tableCtx, checked, props.record);\n          },\n          \"onClick\": (ev) => ev.stopPropagation()\n        }, null);\n      }\n      if (props.operationColumn.name === \"expand\") {\n        if (props.hasExpand && props.renderExpandBtn) {\n          return props.renderExpandBtn(props.record);\n        }\n        return null;\n      }\n      if (props.operationColumn.name === \"drag-handle\") {\n        return (_f = (_e = slots[\"drag-handle-icon\"]) == null ? void 0 : _e.call(slots)) != null ? _f : createVNode(IconDragDotVertical, null, null);\n      }\n      return null;\n    };\n    return () => createVNode(\"td\", {\n      \"class\": cls.value,\n      \"style\": style.value,\n      \"rowspan\": props.rowSpan > 1 ? props.rowSpan : void 0,\n      \"colspan\": props.colSpan > 1 ? props.colSpan : void 0\n    }, [createVNode(\"span\", {\n      \"class\": `${prefixCls}-cell`\n    }, [renderContent()])]);\n  }\n});\nexport { OperationTd as default };\n"],"mappings":"AAAA,SAASA,eAAe,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,WAAW,QAAQ,KAAK;AACpE,SAASC,YAAY,QAAQ,4BAA4B;AACzD,SAASC,iBAAiB,EAAEC,oBAAoB,EAAEC,WAAW,EAAEC,kBAAkB,QAAQ,YAAY;AACrG,OAAOC,QAAQ,MAAM,sBAAsB;AAC3C,OAAOC,KAAK,MAAM,mBAAmB;AACrC,OAAOC,QAAQ,MAAM,4BAA4B;AACjD,OAAOC,SAAS,MAAM,6BAA6B;AACnD,OAAOC,mBAAmB,MAAM,yCAAyC;AACzE,SAASC,iBAAiB,QAAQ,cAAc;AAChD,IAAIC,WAAW,GAAGf,eAAe,CAAC;EAChCgB,IAAI,EAAE,aAAa;EACnBC,UAAU,EAAE;IACVR,QAAQ;IACRC,KAAK;IACLC,QAAQ;IACRC;EACF,CAAC;EACDM,KAAK,EAAE;IACLC,eAAe,EAAE;MACfC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACZ,CAAC;IACDC,UAAU,EAAE;MACVH,IAAI,EAAEI,KAAK;MACXF,QAAQ,EAAE;IACZ,CAAC;IACDG,MAAM,EAAE;MACNL,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACZ,CAAC;IACDI,SAAS,EAAE;MACTN,IAAI,EAAEO,OAAO;MACbC,OAAO,EAAE;IACX,CAAC;IACDC,eAAe,EAAE;MACfT,IAAI,EAAEI;IACR,CAAC;IACDM,eAAe,EAAE;MACfV,IAAI,EAAEW;IACR,CAAC;IACDC,OAAO,EAAE;MACPZ,IAAI,EAAEa,MAAM;MACZL,OAAO,EAAE;IACX,CAAC;IACDM,OAAO,EAAE;MACPd,IAAI,EAAEa,MAAM;MACZL,OAAO,EAAE;IACX,CAAC;IACDO,OAAO,EAAE;MACPf,IAAI,EAAEO,OAAO;MACbC,OAAO,EAAE;IACX;EACF,CAAC;EACDQ,KAAK,EAAE,CAAC,QAAQ,CAAC;EACjBC,KAAKA,CAACnB,KAAK,EAAE;IACXoB,IAAI;IACJC;EACF,CAAC,EAAE;IACD,MAAMC,SAAS,GAAGpC,YAAY,CAAC,OAAO,CAAC;IACvC,MAAMqC,QAAQ,GAAGxC,MAAM,CAACa,iBAAiB,EAAE,CAAC,CAAC,CAAC;IAC9C,MAAM4B,KAAK,GAAGxC,QAAQ,CAAC,MAAMG,iBAAiB,CAACa,KAAK,CAACC,eAAe,EAAED,KAAK,CAACK,UAAU,CAAC,CAAC;IACxF,MAAMoB,GAAG,GAAGzC,QAAQ,CAAC,MAAM,CAAE,GAAEsC,SAAU,KAAI,EAAG,GAAEA,SAAU,YAAW,EAAE;MACvE,CAAE,GAAEA,SAAU,WAAU,GAAGtB,KAAK,CAACC,eAAe,CAACH,IAAI,KAAK,oBAAoB;MAC9E,CAAE,GAAEwB,SAAU,QAAO,GAAGtB,KAAK,CAACC,eAAe,CAACH,IAAI,KAAK,iBAAiB;MACxE,CAAE,GAAEwB,SAAU,SAAQ,GAAGtB,KAAK,CAACC,eAAe,CAACH,IAAI,KAAK,QAAQ;MAChE,CAAE,GAAEwB,SAAU,cAAa,GAAGtB,KAAK,CAACC,eAAe,CAACH,IAAI,KAAK;IAC/D,CAAC,EAAE,GAAGV,oBAAoB,CAACkC,SAAS,EAAEtB,KAAK,CAACC,eAAe,CAAC,CAAC,CAAC;IAC9D,MAAMyB,QAAQ,GAAG1C,QAAQ,CAAC,MAAMK,WAAW,CAACW,KAAK,CAACO,MAAM,CAAC,CAAC;IAC1D,MAAMoB,eAAe,GAAG3C,QAAQ,CAAC,MAAM;MACrC,IAAI4C,EAAE;MACN,OAAOtC,kBAAkB,CAAC,CAACsC,EAAE,GAAGL,QAAQ,CAACM,sBAAsB,KAAK,IAAI,GAAGD,EAAE,GAAG,EAAE,EAAEF,QAAQ,CAACI,KAAK,CAAC;IACrG,CAAC,CAAC;IACF,MAAMC,aAAa,GAAGA,CAAA,KAAM;MAC1B,IAAIH,EAAE,EAAEI,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE;MAC1B,IAAIpC,KAAK,CAACiB,OAAO,EAAE;QACjB,OAAO,IAAI;MACb;MACA,IAAIjB,KAAK,CAACC,eAAe,CAACoC,MAAM,EAAE;QAChC,OAAOrC,KAAK,CAACC,eAAe,CAACoC,MAAM,CAACrC,KAAK,CAACO,MAAM,CAAC+B,GAAG,CAAC;MACvD;MACA,IAAItC,KAAK,CAACC,eAAe,CAACH,IAAI,KAAK,oBAAoB,EAAE;QACvD,MAAMgC,KAAK,GAAG9B,KAAK,CAACO,MAAM,CAACgC,GAAG;QAC9B,IAAI,CAAChB,QAAQ,CAACiB,aAAa,IAAI,CAACxC,KAAK,CAACO,MAAM,CAACkC,MAAM,EAAE;UACnD,OAAOxD,WAAW,CAACM,QAAQ,EAAE;YAC3B,YAAY,EAAEoC,eAAe,CAACG,KAAK,CAACY,OAAO;YAC3C,eAAe,EAAEf,eAAe,CAACG,KAAK,CAACa,aAAa;YACpD,UAAU,EAAElC,OAAO,CAACT,KAAK,CAACO,MAAM,CAACqC,QAAQ,CAAC;YAC1C,sBAAsB,EAAE,IAAI;YAC5B,UAAU,EAAGF,OAAO,IAAK;cACvB,IAAIG,GAAG;cACP,OAAO,CAACA,GAAG,GAAGtB,QAAQ,CAACuB,gBAAgB,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGD,GAAG,CAACE,IAAI,CAACxB,QAAQ,EAAEvB,KAAK,CAACO,MAAM,EAAEmC,OAAO,CAAC;YACvG,CAAC;YACD,SAAS,EAAGM,EAAE,IAAKA,EAAE,CAACC,eAAe,CAAC;UACxC,CAAC,EAAE,IAAI,CAAC;QACV;QACA,OAAOhE,WAAW,CAACM,QAAQ,EAAE;UAC3B,YAAY,EAAE,CAACyC,EAAE,GAAG,CAACJ,EAAE,GAAG5B,KAAK,CAACW,eAAe,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGiB,EAAE,CAACsB,QAAQ,CAACpB,KAAK,CAAC,KAAK,IAAI,GAAGE,EAAE,GAAG,KAAK;UAC5G,UAAU,EAAEvB,OAAO,CAACT,KAAK,CAACO,MAAM,CAACqC,QAAQ,CAAC;UAC1C,sBAAsB,EAAE,IAAI;UAC5B,UAAU,EAAGF,OAAO,IAAK;YACvB,IAAIG,GAAG;YACP,OAAO,CAACA,GAAG,GAAGtB,QAAQ,CAAC4B,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGN,GAAG,CAACE,IAAI,CAACxB,QAAQ,EAAEmB,OAAO,EAAE1C,KAAK,CAACO,MAAM,CAAC;UAC/F,CAAC;UACD,SAAS,EAAGyC,EAAE,IAAKA,EAAE,CAACC,eAAe,CAAC;QACxC,CAAC,EAAE,IAAI,CAAC;MACV;MACA,IAAIjD,KAAK,CAACC,eAAe,CAACH,IAAI,KAAK,iBAAiB,EAAE;QACpD,MAAMgC,KAAK,GAAG9B,KAAK,CAACO,MAAM,CAACgC,GAAG;QAC9B,OAAOtD,WAAW,CAACO,KAAK,EAAE;UACxB,YAAY,EAAE,CAAC0C,EAAE,GAAG,CAACD,EAAE,GAAGjC,KAAK,CAACW,eAAe,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGsB,EAAE,CAACiB,QAAQ,CAACpB,KAAK,CAAC,KAAK,IAAI,GAAGI,EAAE,GAAG,KAAK;UAC5G,UAAU,EAAEzB,OAAO,CAACT,KAAK,CAACO,MAAM,CAACqC,QAAQ,CAAC;UAC1C,sBAAsB,EAAE,IAAI;UAC5B,UAAU,EAAGF,OAAO,IAAK;YACvB,IAAIG,GAAG;YACP,OAAO,CAACA,GAAG,GAAGtB,QAAQ,CAAC4B,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGN,GAAG,CAACE,IAAI,CAACxB,QAAQ,EAAEmB,OAAO,EAAE1C,KAAK,CAACO,MAAM,CAAC;UAC/F,CAAC;UACD,SAAS,EAAGyC,EAAE,IAAKA,EAAE,CAACC,eAAe,CAAC;QACxC,CAAC,EAAE,IAAI,CAAC;MACV;MACA,IAAIjD,KAAK,CAACC,eAAe,CAACH,IAAI,KAAK,QAAQ,EAAE;QAC3C,IAAIE,KAAK,CAACQ,SAAS,IAAIR,KAAK,CAACY,eAAe,EAAE;UAC5C,OAAOZ,KAAK,CAACY,eAAe,CAACZ,KAAK,CAACO,MAAM,CAAC;QAC5C;QACA,OAAO,IAAI;MACb;MACA,IAAIP,KAAK,CAACC,eAAe,CAACH,IAAI,KAAK,aAAa,EAAE;QAChD,OAAO,CAACsC,EAAE,GAAG,CAACD,EAAE,GAAGd,KAAK,CAAC,kBAAkB,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGc,EAAE,CAACY,IAAI,CAAC1B,KAAK,CAAC,KAAK,IAAI,GAAGe,EAAE,GAAGnD,WAAW,CAACU,mBAAmB,EAAE,IAAI,EAAE,IAAI,CAAC;MAC9I;MACA,OAAO,IAAI;IACb,CAAC;IACD,OAAO,MAAMV,WAAW,CAAC,IAAI,EAAE;MAC7B,OAAO,EAAEwC,GAAG,CAACK,KAAK;MAClB,OAAO,EAAEN,KAAK,CAACM,KAAK;MACpB,SAAS,EAAE9B,KAAK,CAACgB,OAAO,GAAG,CAAC,GAAGhB,KAAK,CAACgB,OAAO,GAAG,KAAK,CAAC;MACrD,SAAS,EAAEhB,KAAK,CAACc,OAAO,GAAG,CAAC,GAAGd,KAAK,CAACc,OAAO,GAAG,KAAK;IACtD,CAAC,EAAE,CAAC7B,WAAW,CAAC,MAAM,EAAE;MACtB,OAAO,EAAG,GAAEqC,SAAU;IACxB,CAAC,EAAE,CAACS,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACzB;AACF,CAAC,CAAC;AACF,SAASlC,WAAW,IAAIa,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}