{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Selection } from '../../../common/core/selection.js';\nexport class InPlaceReplaceCommand {\n  constructor(editRange, originalSelection, text) {\n    this._editRange = editRange;\n    this._originalSelection = originalSelection;\n    this._text = text;\n  }\n  getEditOperations(model, builder) {\n    builder.addTrackedEditOperation(this._editRange, this._text);\n  }\n  computeCursorState(model, helper) {\n    const inverseEditOperations = helper.getInverseEditOperations();\n    const srcRange = inverseEditOperations[0].range;\n    if (!this._originalSelection.isEmpty()) {\n      // Preserve selection and extends to typed text\n      return new Selection(srcRange.endLineNumber, srcRange.endColumn - this._text.length, srcRange.endLineNumber, srcRange.endColumn);\n    }\n    return new Selection(srcRange.endLineNumber, Math.min(this._originalSelection.positionColumn, srcRange.endColumn), srcRange.endLineNumber, Math.min(this._originalSelection.positionColumn, srcRange.endColumn));\n  }\n}","map":{"version":3,"names":["Selection","InPlaceReplaceCommand","constructor","editRange","originalSelection","text","_editRange","_originalSelection","_text","getEditOperations","model","builder","addTrackedEditOperation","computeCursorState","helper","inverseEditOperations","getInverseEditOperations","srcRange","range","isEmpty","endLineNumber","endColumn","length","Math","min","positionColumn"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/contrib/inPlaceReplace/browser/inPlaceReplaceCommand.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Selection } from '../../../common/core/selection.js';\nexport class InPlaceReplaceCommand {\n    constructor(editRange, originalSelection, text) {\n        this._editRange = editRange;\n        this._originalSelection = originalSelection;\n        this._text = text;\n    }\n    getEditOperations(model, builder) {\n        builder.addTrackedEditOperation(this._editRange, this._text);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        const srcRange = inverseEditOperations[0].range;\n        if (!this._originalSelection.isEmpty()) {\n            // Preserve selection and extends to typed text\n            return new Selection(srcRange.endLineNumber, srcRange.endColumn - this._text.length, srcRange.endLineNumber, srcRange.endColumn);\n        }\n        return new Selection(srcRange.endLineNumber, Math.min(this._originalSelection.positionColumn, srcRange.endColumn), srcRange.endLineNumber, Math.min(this._originalSelection.positionColumn, srcRange.endColumn));\n    }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAASA,SAAS,QAAQ,mCAAmC;AAC7D,OAAO,MAAMC,qBAAqB,CAAC;EAC/BC,WAAWA,CAACC,SAAS,EAAEC,iBAAiB,EAAEC,IAAI,EAAE;IAC5C,IAAI,CAACC,UAAU,GAAGH,SAAS;IAC3B,IAAI,CAACI,kBAAkB,GAAGH,iBAAiB;IAC3C,IAAI,CAACI,KAAK,GAAGH,IAAI;EACrB;EACAI,iBAAiBA,CAACC,KAAK,EAAEC,OAAO,EAAE;IAC9BA,OAAO,CAACC,uBAAuB,CAAC,IAAI,CAACN,UAAU,EAAE,IAAI,CAACE,KAAK,CAAC;EAChE;EACAK,kBAAkBA,CAACH,KAAK,EAAEI,MAAM,EAAE;IAC9B,MAAMC,qBAAqB,GAAGD,MAAM,CAACE,wBAAwB,CAAC,CAAC;IAC/D,MAAMC,QAAQ,GAAGF,qBAAqB,CAAC,CAAC,CAAC,CAACG,KAAK;IAC/C,IAAI,CAAC,IAAI,CAACX,kBAAkB,CAACY,OAAO,CAAC,CAAC,EAAE;MACpC;MACA,OAAO,IAAInB,SAAS,CAACiB,QAAQ,CAACG,aAAa,EAAEH,QAAQ,CAACI,SAAS,GAAG,IAAI,CAACb,KAAK,CAACc,MAAM,EAAEL,QAAQ,CAACG,aAAa,EAAEH,QAAQ,CAACI,SAAS,CAAC;IACpI;IACA,OAAO,IAAIrB,SAAS,CAACiB,QAAQ,CAACG,aAAa,EAAEG,IAAI,CAACC,GAAG,CAAC,IAAI,CAACjB,kBAAkB,CAACkB,cAAc,EAAER,QAAQ,CAACI,SAAS,CAAC,EAAEJ,QAAQ,CAACG,aAAa,EAAEG,IAAI,CAACC,GAAG,CAAC,IAAI,CAACjB,kBAAkB,CAACkB,cAAc,EAAER,QAAQ,CAACI,SAAS,CAAC,CAAC;EACpN;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}