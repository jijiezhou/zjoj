{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { getDocumentRangeSemanticTokens, hasDocumentRangeSemanticTokensProvider } from '../common/getSemanticTokens.js';\nimport { isSemanticColoringEnabled, SEMANTIC_HIGHLIGHTING_SETTING_ID } from '../common/semanticTokensConfig.js';\nimport { toMultilineTokens2 } from '../../../common/services/semanticTokensProviderStyling.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ISemanticTokensStylingService } from '../../../common/services/semanticTokensStyling.js';\nlet ViewportSemanticTokensContribution = class ViewportSemanticTokensContribution extends Disposable {\n  constructor(editor, _semanticTokensStylingService, _themeService, _configurationService, languageFeatureDebounceService, languageFeaturesService) {\n    super();\n    this._semanticTokensStylingService = _semanticTokensStylingService;\n    this._themeService = _themeService;\n    this._configurationService = _configurationService;\n    this._editor = editor;\n    this._provider = languageFeaturesService.documentRangeSemanticTokensProvider;\n    this._debounceInformation = languageFeatureDebounceService.for(this._provider, 'DocumentRangeSemanticTokens', {\n      min: 100,\n      max: 500\n    });\n    this._tokenizeViewport = this._register(new RunOnceScheduler(() => this._tokenizeViewportNow(), 100));\n    this._outstandingRequests = [];\n    const scheduleTokenizeViewport = () => {\n      if (this._editor.hasModel()) {\n        this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()));\n      }\n    };\n    this._register(this._editor.onDidScrollChange(() => {\n      scheduleTokenizeViewport();\n    }));\n    this._register(this._editor.onDidChangeModel(() => {\n      this._cancelAll();\n      scheduleTokenizeViewport();\n    }));\n    this._register(this._editor.onDidChangeModelContent(e => {\n      this._cancelAll();\n      scheduleTokenizeViewport();\n    }));\n    this._register(this._provider.onDidChange(() => {\n      this._cancelAll();\n      scheduleTokenizeViewport();\n    }));\n    this._register(this._configurationService.onDidChangeConfiguration(e => {\n      if (e.affectsConfiguration(SEMANTIC_HIGHLIGHTING_SETTING_ID)) {\n        this._cancelAll();\n        scheduleTokenizeViewport();\n      }\n    }));\n    this._register(this._themeService.onDidColorThemeChange(() => {\n      this._cancelAll();\n      scheduleTokenizeViewport();\n    }));\n    scheduleTokenizeViewport();\n  }\n  _cancelAll() {\n    for (const request of this._outstandingRequests) {\n      request.cancel();\n    }\n    this._outstandingRequests = [];\n  }\n  _removeOutstandingRequest(req) {\n    for (let i = 0, len = this._outstandingRequests.length; i < len; i++) {\n      if (this._outstandingRequests[i] === req) {\n        this._outstandingRequests.splice(i, 1);\n        return;\n      }\n    }\n  }\n  _tokenizeViewportNow() {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    const model = this._editor.getModel();\n    if (model.tokenization.hasCompleteSemanticTokens()) {\n      return;\n    }\n    if (!isSemanticColoringEnabled(model, this._themeService, this._configurationService)) {\n      if (model.tokenization.hasSomeSemanticTokens()) {\n        model.tokenization.setSemanticTokens(null, false);\n      }\n      return;\n    }\n    if (!hasDocumentRangeSemanticTokensProvider(this._provider, model)) {\n      if (model.tokenization.hasSomeSemanticTokens()) {\n        model.tokenization.setSemanticTokens(null, false);\n      }\n      return;\n    }\n    const visibleRanges = this._editor.getVisibleRangesPlusViewportAboveBelow();\n    this._outstandingRequests = this._outstandingRequests.concat(visibleRanges.map(range => this._requestRange(model, range)));\n  }\n  _requestRange(model, range) {\n    const requestVersionId = model.getVersionId();\n    const request = createCancelablePromise(token => Promise.resolve(getDocumentRangeSemanticTokens(this._provider, model, range, token)));\n    const sw = new StopWatch(false);\n    request.then(r => {\n      this._debounceInformation.update(model, sw.elapsed());\n      if (!r || !r.tokens || model.isDisposed() || model.getVersionId() !== requestVersionId) {\n        return;\n      }\n      const {\n        provider,\n        tokens: result\n      } = r;\n      const styling = this._semanticTokensStylingService.getStyling(provider);\n      model.tokenization.setPartialSemanticTokens(range, toMultilineTokens2(result, styling, model.getLanguageId()));\n    }).then(() => this._removeOutstandingRequest(request), () => this._removeOutstandingRequest(request));\n    return request;\n  }\n};\nViewportSemanticTokensContribution.ID = 'editor.contrib.viewportSemanticTokens';\nViewportSemanticTokensContribution = __decorate([__param(1, ISemanticTokensStylingService), __param(2, IThemeService), __param(3, IConfigurationService), __param(4, ILanguageFeatureDebounceService), __param(5, ILanguageFeaturesService)], ViewportSemanticTokensContribution);\nexport { ViewportSemanticTokensContribution };\nregisterEditorContribution(ViewportSemanticTokensContribution.ID, ViewportSemanticTokensContribution, 1 /* EditorContributionInstantiation.AfterFirstRender */);","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","createCancelablePromise","RunOnceScheduler","Disposable","registerEditorContribution","getDocumentRangeSemanticTokens","hasDocumentRangeSemanticTokensProvider","isSemanticColoringEnabled","SEMANTIC_HIGHLIGHTING_SETTING_ID","toMultilineTokens2","IConfigurationService","IThemeService","ILanguageFeatureDebounceService","StopWatch","ILanguageFeaturesService","ISemanticTokensStylingService","ViewportSemanticTokensContribution","constructor","editor","_semanticTokensStylingService","_themeService","_configurationService","languageFeatureDebounceService","languageFeaturesService","_editor","_provider","documentRangeSemanticTokensProvider","_debounceInformation","for","min","max","_tokenizeViewport","_register","_tokenizeViewportNow","_outstandingRequests","scheduleTokenizeViewport","hasModel","schedule","get","getModel","onDidScrollChange","onDidChangeModel","_cancelAll","onDidChangeModelContent","e","onDidChange","onDidChangeConfiguration","affectsConfiguration","onDidColorThemeChange","request","cancel","_removeOutstandingRequest","req","len","splice","model","tokenization","hasCompleteSemanticTokens","hasSomeSemanticTokens","setSemanticTokens","visibleRanges","getVisibleRangesPlusViewportAboveBelow","concat","map","range","_requestRange","requestVersionId","getVersionId","token","Promise","resolve","sw","then","update","elapsed","tokens","isDisposed","provider","result","styling","getStyling","setPartialSemanticTokens","getLanguageId","ID"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/contrib/semanticTokens/browser/viewportSemanticTokens.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { getDocumentRangeSemanticTokens, hasDocumentRangeSemanticTokensProvider } from '../common/getSemanticTokens.js';\nimport { isSemanticColoringEnabled, SEMANTIC_HIGHLIGHTING_SETTING_ID } from '../common/semanticTokensConfig.js';\nimport { toMultilineTokens2 } from '../../../common/services/semanticTokensProviderStyling.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ISemanticTokensStylingService } from '../../../common/services/semanticTokensStyling.js';\nlet ViewportSemanticTokensContribution = class ViewportSemanticTokensContribution extends Disposable {\n    constructor(editor, _semanticTokensStylingService, _themeService, _configurationService, languageFeatureDebounceService, languageFeaturesService) {\n        super();\n        this._semanticTokensStylingService = _semanticTokensStylingService;\n        this._themeService = _themeService;\n        this._configurationService = _configurationService;\n        this._editor = editor;\n        this._provider = languageFeaturesService.documentRangeSemanticTokensProvider;\n        this._debounceInformation = languageFeatureDebounceService.for(this._provider, 'DocumentRangeSemanticTokens', { min: 100, max: 500 });\n        this._tokenizeViewport = this._register(new RunOnceScheduler(() => this._tokenizeViewportNow(), 100));\n        this._outstandingRequests = [];\n        const scheduleTokenizeViewport = () => {\n            if (this._editor.hasModel()) {\n                this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()));\n            }\n        };\n        this._register(this._editor.onDidScrollChange(() => {\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._editor.onDidChangeModelContent((e) => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._provider.onDidChange(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration(SEMANTIC_HIGHLIGHTING_SETTING_ID)) {\n                this._cancelAll();\n                scheduleTokenizeViewport();\n            }\n        }));\n        this._register(this._themeService.onDidColorThemeChange(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        scheduleTokenizeViewport();\n    }\n    _cancelAll() {\n        for (const request of this._outstandingRequests) {\n            request.cancel();\n        }\n        this._outstandingRequests = [];\n    }\n    _removeOutstandingRequest(req) {\n        for (let i = 0, len = this._outstandingRequests.length; i < len; i++) {\n            if (this._outstandingRequests[i] === req) {\n                this._outstandingRequests.splice(i, 1);\n                return;\n            }\n        }\n    }\n    _tokenizeViewportNow() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (model.tokenization.hasCompleteSemanticTokens()) {\n            return;\n        }\n        if (!isSemanticColoringEnabled(model, this._themeService, this._configurationService)) {\n            if (model.tokenization.hasSomeSemanticTokens()) {\n                model.tokenization.setSemanticTokens(null, false);\n            }\n            return;\n        }\n        if (!hasDocumentRangeSemanticTokensProvider(this._provider, model)) {\n            if (model.tokenization.hasSomeSemanticTokens()) {\n                model.tokenization.setSemanticTokens(null, false);\n            }\n            return;\n        }\n        const visibleRanges = this._editor.getVisibleRangesPlusViewportAboveBelow();\n        this._outstandingRequests = this._outstandingRequests.concat(visibleRanges.map(range => this._requestRange(model, range)));\n    }\n    _requestRange(model, range) {\n        const requestVersionId = model.getVersionId();\n        const request = createCancelablePromise(token => Promise.resolve(getDocumentRangeSemanticTokens(this._provider, model, range, token)));\n        const sw = new StopWatch(false);\n        request.then((r) => {\n            this._debounceInformation.update(model, sw.elapsed());\n            if (!r || !r.tokens || model.isDisposed() || model.getVersionId() !== requestVersionId) {\n                return;\n            }\n            const { provider, tokens: result } = r;\n            const styling = this._semanticTokensStylingService.getStyling(provider);\n            model.tokenization.setPartialSemanticTokens(range, toMultilineTokens2(result, styling, model.getLanguageId()));\n        }).then(() => this._removeOutstandingRequest(request), () => this._removeOutstandingRequest(request));\n        return request;\n    }\n};\nViewportSemanticTokensContribution.ID = 'editor.contrib.viewportSemanticTokens';\nViewportSemanticTokensContribution = __decorate([\n    __param(1, ISemanticTokensStylingService),\n    __param(2, IThemeService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeatureDebounceService),\n    __param(5, ILanguageFeaturesService)\n], ViewportSemanticTokensContribution);\nexport { ViewportSemanticTokensContribution };\nregisterEditorContribution(ViewportSemanticTokensContribution.ID, ViewportSemanticTokensContribution, 1 /* EditorContributionInstantiation.AfterFirstRender */);\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,IAAIA,UAAU,GAAI,IAAI,IAAI,IAAI,CAACA,UAAU,IAAK,UAAUC,UAAU,EAAEC,MAAM,EAAEC,GAAG,EAAEC,IAAI,EAAE;EACnF,IAAIC,CAAC,GAAGC,SAAS,CAACC,MAAM;IAAEC,CAAC,GAAGH,CAAC,GAAG,CAAC,GAAGH,MAAM,GAAGE,IAAI,KAAK,IAAI,GAAGA,IAAI,GAAGK,MAAM,CAACC,wBAAwB,CAACR,MAAM,EAAEC,GAAG,CAAC,GAAGC,IAAI;IAAEO,CAAC;EAC5H,IAAI,OAAOC,OAAO,KAAK,QAAQ,IAAI,OAAOA,OAAO,CAACC,QAAQ,KAAK,UAAU,EAAEL,CAAC,GAAGI,OAAO,CAACC,QAAQ,CAACZ,UAAU,EAAEC,MAAM,EAAEC,GAAG,EAAEC,IAAI,CAAC,CAAC,KAC1H,KAAK,IAAIU,CAAC,GAAGb,UAAU,CAACM,MAAM,GAAG,CAAC,EAAEO,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE,IAAIH,CAAC,GAAGV,UAAU,CAACa,CAAC,CAAC,EAAEN,CAAC,GAAG,CAACH,CAAC,GAAG,CAAC,GAAGM,CAAC,CAACH,CAAC,CAAC,GAAGH,CAAC,GAAG,CAAC,GAAGM,CAAC,CAACT,MAAM,EAAEC,GAAG,EAAEK,CAAC,CAAC,GAAGG,CAAC,CAACT,MAAM,EAAEC,GAAG,CAAC,KAAKK,CAAC;EACjJ,OAAOH,CAAC,GAAG,CAAC,IAAIG,CAAC,IAAIC,MAAM,CAACM,cAAc,CAACb,MAAM,EAAEC,GAAG,EAAEK,CAAC,CAAC,EAAEA,CAAC;AACjE,CAAC;AACD,IAAIQ,OAAO,GAAI,IAAI,IAAI,IAAI,CAACA,OAAO,IAAK,UAAUC,UAAU,EAAEC,SAAS,EAAE;EACrE,OAAO,UAAUhB,MAAM,EAAEC,GAAG,EAAE;IAAEe,SAAS,CAAChB,MAAM,EAAEC,GAAG,EAAEc,UAAU,CAAC;EAAE,CAAC;AACzE,CAAC;AACD,SAASE,uBAAuB,EAAEC,gBAAgB,QAAQ,kCAAkC;AAC5F,SAASC,UAAU,QAAQ,sCAAsC;AACjE,SAASC,0BAA0B,QAAQ,sCAAsC;AACjF,SAASC,8BAA8B,EAAEC,sCAAsC,QAAQ,gCAAgC;AACvH,SAASC,yBAAyB,EAAEC,gCAAgC,QAAQ,mCAAmC;AAC/G,SAASC,kBAAkB,QAAQ,2DAA2D;AAC9F,SAASC,qBAAqB,QAAQ,4DAA4D;AAClG,SAASC,aAAa,QAAQ,mDAAmD;AACjF,SAASC,+BAA+B,QAAQ,qDAAqD;AACrG,SAASC,SAAS,QAAQ,sCAAsC;AAChE,SAASC,wBAAwB,QAAQ,8CAA8C;AACvF,SAASC,6BAA6B,QAAQ,mDAAmD;AACjG,IAAIC,kCAAkC,GAAG,MAAMA,kCAAkC,SAASb,UAAU,CAAC;EACjGc,WAAWA,CAACC,MAAM,EAAEC,6BAA6B,EAAEC,aAAa,EAAEC,qBAAqB,EAAEC,8BAA8B,EAAEC,uBAAuB,EAAE;IAC9I,KAAK,CAAC,CAAC;IACP,IAAI,CAACJ,6BAA6B,GAAGA,6BAA6B;IAClE,IAAI,CAACC,aAAa,GAAGA,aAAa;IAClC,IAAI,CAACC,qBAAqB,GAAGA,qBAAqB;IAClD,IAAI,CAACG,OAAO,GAAGN,MAAM;IACrB,IAAI,CAACO,SAAS,GAAGF,uBAAuB,CAACG,mCAAmC;IAC5E,IAAI,CAACC,oBAAoB,GAAGL,8BAA8B,CAACM,GAAG,CAAC,IAAI,CAACH,SAAS,EAAE,6BAA6B,EAAE;MAAEI,GAAG,EAAE,GAAG;MAAEC,GAAG,EAAE;IAAI,CAAC,CAAC;IACrI,IAAI,CAACC,iBAAiB,GAAG,IAAI,CAACC,SAAS,CAAC,IAAI9B,gBAAgB,CAAC,MAAM,IAAI,CAAC+B,oBAAoB,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;IACrG,IAAI,CAACC,oBAAoB,GAAG,EAAE;IAC9B,MAAMC,wBAAwB,GAAGA,CAAA,KAAM;MACnC,IAAI,IAAI,CAACX,OAAO,CAACY,QAAQ,CAAC,CAAC,EAAE;QACzB,IAAI,CAACL,iBAAiB,CAACM,QAAQ,CAAC,IAAI,CAACV,oBAAoB,CAACW,GAAG,CAAC,IAAI,CAACd,OAAO,CAACe,QAAQ,CAAC,CAAC,CAAC,CAAC;MAC3F;IACJ,CAAC;IACD,IAAI,CAACP,SAAS,CAAC,IAAI,CAACR,OAAO,CAACgB,iBAAiB,CAAC,MAAM;MAChDL,wBAAwB,CAAC,CAAC;IAC9B,CAAC,CAAC,CAAC;IACH,IAAI,CAACH,SAAS,CAAC,IAAI,CAACR,OAAO,CAACiB,gBAAgB,CAAC,MAAM;MAC/C,IAAI,CAACC,UAAU,CAAC,CAAC;MACjBP,wBAAwB,CAAC,CAAC;IAC9B,CAAC,CAAC,CAAC;IACH,IAAI,CAACH,SAAS,CAAC,IAAI,CAACR,OAAO,CAACmB,uBAAuB,CAAEC,CAAC,IAAK;MACvD,IAAI,CAACF,UAAU,CAAC,CAAC;MACjBP,wBAAwB,CAAC,CAAC;IAC9B,CAAC,CAAC,CAAC;IACH,IAAI,CAACH,SAAS,CAAC,IAAI,CAACP,SAAS,CAACoB,WAAW,CAAC,MAAM;MAC5C,IAAI,CAACH,UAAU,CAAC,CAAC;MACjBP,wBAAwB,CAAC,CAAC;IAC9B,CAAC,CAAC,CAAC;IACH,IAAI,CAACH,SAAS,CAAC,IAAI,CAACX,qBAAqB,CAACyB,wBAAwB,CAACF,CAAC,IAAI;MACpE,IAAIA,CAAC,CAACG,oBAAoB,CAACvC,gCAAgC,CAAC,EAAE;QAC1D,IAAI,CAACkC,UAAU,CAAC,CAAC;QACjBP,wBAAwB,CAAC,CAAC;MAC9B;IACJ,CAAC,CAAC,CAAC;IACH,IAAI,CAACH,SAAS,CAAC,IAAI,CAACZ,aAAa,CAAC4B,qBAAqB,CAAC,MAAM;MAC1D,IAAI,CAACN,UAAU,CAAC,CAAC;MACjBP,wBAAwB,CAAC,CAAC;IAC9B,CAAC,CAAC,CAAC;IACHA,wBAAwB,CAAC,CAAC;EAC9B;EACAO,UAAUA,CAAA,EAAG;IACT,KAAK,MAAMO,OAAO,IAAI,IAAI,CAACf,oBAAoB,EAAE;MAC7Ce,OAAO,CAACC,MAAM,CAAC,CAAC;IACpB;IACA,IAAI,CAAChB,oBAAoB,GAAG,EAAE;EAClC;EACAiB,yBAAyBA,CAACC,GAAG,EAAE;IAC3B,KAAK,IAAIxD,CAAC,GAAG,CAAC,EAAEyD,GAAG,GAAG,IAAI,CAACnB,oBAAoB,CAAC7C,MAAM,EAAEO,CAAC,GAAGyD,GAAG,EAAEzD,CAAC,EAAE,EAAE;MAClE,IAAI,IAAI,CAACsC,oBAAoB,CAACtC,CAAC,CAAC,KAAKwD,GAAG,EAAE;QACtC,IAAI,CAAClB,oBAAoB,CAACoB,MAAM,CAAC1D,CAAC,EAAE,CAAC,CAAC;QACtC;MACJ;IACJ;EACJ;EACAqC,oBAAoBA,CAAA,EAAG;IACnB,IAAI,CAAC,IAAI,CAACT,OAAO,CAACY,QAAQ,CAAC,CAAC,EAAE;MAC1B;IACJ;IACA,MAAMmB,KAAK,GAAG,IAAI,CAAC/B,OAAO,CAACe,QAAQ,CAAC,CAAC;IACrC,IAAIgB,KAAK,CAACC,YAAY,CAACC,yBAAyB,CAAC,CAAC,EAAE;MAChD;IACJ;IACA,IAAI,CAAClD,yBAAyB,CAACgD,KAAK,EAAE,IAAI,CAACnC,aAAa,EAAE,IAAI,CAACC,qBAAqB,CAAC,EAAE;MACnF,IAAIkC,KAAK,CAACC,YAAY,CAACE,qBAAqB,CAAC,CAAC,EAAE;QAC5CH,KAAK,CAACC,YAAY,CAACG,iBAAiB,CAAC,IAAI,EAAE,KAAK,CAAC;MACrD;MACA;IACJ;IACA,IAAI,CAACrD,sCAAsC,CAAC,IAAI,CAACmB,SAAS,EAAE8B,KAAK,CAAC,EAAE;MAChE,IAAIA,KAAK,CAACC,YAAY,CAACE,qBAAqB,CAAC,CAAC,EAAE;QAC5CH,KAAK,CAACC,YAAY,CAACG,iBAAiB,CAAC,IAAI,EAAE,KAAK,CAAC;MACrD;MACA;IACJ;IACA,MAAMC,aAAa,GAAG,IAAI,CAACpC,OAAO,CAACqC,sCAAsC,CAAC,CAAC;IAC3E,IAAI,CAAC3B,oBAAoB,GAAG,IAAI,CAACA,oBAAoB,CAAC4B,MAAM,CAACF,aAAa,CAACG,GAAG,CAACC,KAAK,IAAI,IAAI,CAACC,aAAa,CAACV,KAAK,EAAES,KAAK,CAAC,CAAC,CAAC;EAC9H;EACAC,aAAaA,CAACV,KAAK,EAAES,KAAK,EAAE;IACxB,MAAME,gBAAgB,GAAGX,KAAK,CAACY,YAAY,CAAC,CAAC;IAC7C,MAAMlB,OAAO,GAAGhD,uBAAuB,CAACmE,KAAK,IAAIC,OAAO,CAACC,OAAO,CAACjE,8BAA8B,CAAC,IAAI,CAACoB,SAAS,EAAE8B,KAAK,EAAES,KAAK,EAAEI,KAAK,CAAC,CAAC,CAAC;IACtI,MAAMG,EAAE,GAAG,IAAI1D,SAAS,CAAC,KAAK,CAAC;IAC/BoC,OAAO,CAACuB,IAAI,CAAElF,CAAC,IAAK;MAChB,IAAI,CAACqC,oBAAoB,CAAC8C,MAAM,CAAClB,KAAK,EAAEgB,EAAE,CAACG,OAAO,CAAC,CAAC,CAAC;MACrD,IAAI,CAACpF,CAAC,IAAI,CAACA,CAAC,CAACqF,MAAM,IAAIpB,KAAK,CAACqB,UAAU,CAAC,CAAC,IAAIrB,KAAK,CAACY,YAAY,CAAC,CAAC,KAAKD,gBAAgB,EAAE;QACpF;MACJ;MACA,MAAM;QAAEW,QAAQ;QAAEF,MAAM,EAAEG;MAAO,CAAC,GAAGxF,CAAC;MACtC,MAAMyF,OAAO,GAAG,IAAI,CAAC5D,6BAA6B,CAAC6D,UAAU,CAACH,QAAQ,CAAC;MACvEtB,KAAK,CAACC,YAAY,CAACyB,wBAAwB,CAACjB,KAAK,EAAEvD,kBAAkB,CAACqE,MAAM,EAAEC,OAAO,EAAExB,KAAK,CAAC2B,aAAa,CAAC,CAAC,CAAC,CAAC;IAClH,CAAC,CAAC,CAACV,IAAI,CAAC,MAAM,IAAI,CAACrB,yBAAyB,CAACF,OAAO,CAAC,EAAE,MAAM,IAAI,CAACE,yBAAyB,CAACF,OAAO,CAAC,CAAC;IACrG,OAAOA,OAAO;EAClB;AACJ,CAAC;AACDjC,kCAAkC,CAACmE,EAAE,GAAG,uCAAuC;AAC/EnE,kCAAkC,GAAGlC,UAAU,CAAC,CAC5CgB,OAAO,CAAC,CAAC,EAAEiB,6BAA6B,CAAC,EACzCjB,OAAO,CAAC,CAAC,EAAEa,aAAa,CAAC,EACzBb,OAAO,CAAC,CAAC,EAAEY,qBAAqB,CAAC,EACjCZ,OAAO,CAAC,CAAC,EAAEc,+BAA+B,CAAC,EAC3Cd,OAAO,CAAC,CAAC,EAAEgB,wBAAwB,CAAC,CACvC,EAAEE,kCAAkC,CAAC;AACtC,SAASA,kCAAkC;AAC3CZ,0BAA0B,CAACY,kCAAkC,CAACmE,EAAE,EAAEnE,kCAAkC,EAAE,CAAC,CAAC,sDAAsD,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}