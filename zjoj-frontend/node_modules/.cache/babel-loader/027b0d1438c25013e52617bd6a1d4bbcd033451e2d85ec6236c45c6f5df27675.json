{"ast":null,"code":"import \"core-js/modules/es.regexp.flags.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorKeybindingCancellationTokenSource } from './keybindingCancellation.js';\nexport class EditorState {\n  constructor(editor, flags) {\n    this.flags = flags;\n    if ((this.flags & 1 /* CodeEditorStateFlag.Value */) !== 0) {\n      const model = editor.getModel();\n      this.modelVersionId = model ? strings.format('{0}#{1}', model.uri.toString(), model.getVersionId()) : null;\n    } else {\n      this.modelVersionId = null;\n    }\n    if ((this.flags & 4 /* CodeEditorStateFlag.Position */) !== 0) {\n      this.position = editor.getPosition();\n    } else {\n      this.position = null;\n    }\n    if ((this.flags & 2 /* CodeEditorStateFlag.Selection */) !== 0) {\n      this.selection = editor.getSelection();\n    } else {\n      this.selection = null;\n    }\n    if ((this.flags & 8 /* CodeEditorStateFlag.Scroll */) !== 0) {\n      this.scrollLeft = editor.getScrollLeft();\n      this.scrollTop = editor.getScrollTop();\n    } else {\n      this.scrollLeft = -1;\n      this.scrollTop = -1;\n    }\n  }\n  _equals(other) {\n    if (!(other instanceof EditorState)) {\n      return false;\n    }\n    const state = other;\n    if (this.modelVersionId !== state.modelVersionId) {\n      return false;\n    }\n    if (this.scrollLeft !== state.scrollLeft || this.scrollTop !== state.scrollTop) {\n      return false;\n    }\n    if (!this.position && state.position || this.position && !state.position || this.position && state.position && !this.position.equals(state.position)) {\n      return false;\n    }\n    if (!this.selection && state.selection || this.selection && !state.selection || this.selection && state.selection && !this.selection.equalsRange(state.selection)) {\n      return false;\n    }\n    return true;\n  }\n  validate(editor) {\n    return this._equals(new EditorState(editor, this.flags));\n  }\n}\n/**\n * A cancellation token source that cancels when the editor changes as expressed\n * by the provided flags\n * @param range If provided, changes in position and selection within this range will not trigger cancellation\n */\nexport class EditorStateCancellationTokenSource extends EditorKeybindingCancellationTokenSource {\n  constructor(editor, flags, range, parent) {\n    super(editor, parent);\n    this._listener = new DisposableStore();\n    if (flags & 4 /* CodeEditorStateFlag.Position */) {\n      this._listener.add(editor.onDidChangeCursorPosition(e => {\n        if (!range || !Range.containsPosition(range, e.position)) {\n          this.cancel();\n        }\n      }));\n    }\n    if (flags & 2 /* CodeEditorStateFlag.Selection */) {\n      this._listener.add(editor.onDidChangeCursorSelection(e => {\n        if (!range || !Range.containsRange(range, e.selection)) {\n          this.cancel();\n        }\n      }));\n    }\n    if (flags & 8 /* CodeEditorStateFlag.Scroll */) {\n      this._listener.add(editor.onDidScrollChange(_ => this.cancel()));\n    }\n    if (flags & 1 /* CodeEditorStateFlag.Value */) {\n      this._listener.add(editor.onDidChangeModel(_ => this.cancel()));\n      this._listener.add(editor.onDidChangeModelContent(_ => this.cancel()));\n    }\n  }\n  dispose() {\n    this._listener.dispose();\n    super.dispose();\n  }\n}\n/**\n * A cancellation token source that cancels when the provided model changes\n */\nexport class TextModelCancellationTokenSource extends CancellationTokenSource {\n  constructor(model, parent) {\n    super(parent);\n    this._listener = model.onDidChangeContent(() => this.cancel());\n  }\n  dispose() {\n    this._listener.dispose();\n    super.dispose();\n  }\n}","map":{"version":3,"names":["strings","Range","CancellationTokenSource","DisposableStore","EditorKeybindingCancellationTokenSource","EditorState","constructor","editor","flags","model","getModel","modelVersionId","format","uri","toString","getVersionId","position","getPosition","selection","getSelection","scrollLeft","getScrollLeft","scrollTop","getScrollTop","_equals","other","state","equals","equalsRange","validate","EditorStateCancellationTokenSource","range","parent","_listener","add","onDidChangeCursorPosition","e","containsPosition","cancel","onDidChangeCursorSelection","containsRange","onDidScrollChange","_","onDidChangeModel","onDidChangeModelContent","dispose","TextModelCancellationTokenSource","onDidChangeContent"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/contrib/editorState/browser/editorState.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorKeybindingCancellationTokenSource } from './keybindingCancellation.js';\nexport class EditorState {\n    constructor(editor, flags) {\n        this.flags = flags;\n        if ((this.flags & 1 /* CodeEditorStateFlag.Value */) !== 0) {\n            const model = editor.getModel();\n            this.modelVersionId = model ? strings.format('{0}#{1}', model.uri.toString(), model.getVersionId()) : null;\n        }\n        else {\n            this.modelVersionId = null;\n        }\n        if ((this.flags & 4 /* CodeEditorStateFlag.Position */) !== 0) {\n            this.position = editor.getPosition();\n        }\n        else {\n            this.position = null;\n        }\n        if ((this.flags & 2 /* CodeEditorStateFlag.Selection */) !== 0) {\n            this.selection = editor.getSelection();\n        }\n        else {\n            this.selection = null;\n        }\n        if ((this.flags & 8 /* CodeEditorStateFlag.Scroll */) !== 0) {\n            this.scrollLeft = editor.getScrollLeft();\n            this.scrollTop = editor.getScrollTop();\n        }\n        else {\n            this.scrollLeft = -1;\n            this.scrollTop = -1;\n        }\n    }\n    _equals(other) {\n        if (!(other instanceof EditorState)) {\n            return false;\n        }\n        const state = other;\n        if (this.modelVersionId !== state.modelVersionId) {\n            return false;\n        }\n        if (this.scrollLeft !== state.scrollLeft || this.scrollTop !== state.scrollTop) {\n            return false;\n        }\n        if (!this.position && state.position || this.position && !state.position || this.position && state.position && !this.position.equals(state.position)) {\n            return false;\n        }\n        if (!this.selection && state.selection || this.selection && !state.selection || this.selection && state.selection && !this.selection.equalsRange(state.selection)) {\n            return false;\n        }\n        return true;\n    }\n    validate(editor) {\n        return this._equals(new EditorState(editor, this.flags));\n    }\n}\n/**\n * A cancellation token source that cancels when the editor changes as expressed\n * by the provided flags\n * @param range If provided, changes in position and selection within this range will not trigger cancellation\n */\nexport class EditorStateCancellationTokenSource extends EditorKeybindingCancellationTokenSource {\n    constructor(editor, flags, range, parent) {\n        super(editor, parent);\n        this._listener = new DisposableStore();\n        if (flags & 4 /* CodeEditorStateFlag.Position */) {\n            this._listener.add(editor.onDidChangeCursorPosition(e => {\n                if (!range || !Range.containsPosition(range, e.position)) {\n                    this.cancel();\n                }\n            }));\n        }\n        if (flags & 2 /* CodeEditorStateFlag.Selection */) {\n            this._listener.add(editor.onDidChangeCursorSelection(e => {\n                if (!range || !Range.containsRange(range, e.selection)) {\n                    this.cancel();\n                }\n            }));\n        }\n        if (flags & 8 /* CodeEditorStateFlag.Scroll */) {\n            this._listener.add(editor.onDidScrollChange(_ => this.cancel()));\n        }\n        if (flags & 1 /* CodeEditorStateFlag.Value */) {\n            this._listener.add(editor.onDidChangeModel(_ => this.cancel()));\n            this._listener.add(editor.onDidChangeModelContent(_ => this.cancel()));\n        }\n    }\n    dispose() {\n        this._listener.dispose();\n        super.dispose();\n    }\n}\n/**\n * A cancellation token source that cancels when the provided model changes\n */\nexport class TextModelCancellationTokenSource extends CancellationTokenSource {\n    constructor(model, parent) {\n        super(parent);\n        this._listener = model.onDidChangeContent(() => this.cancel());\n    }\n    dispose() {\n        this._listener.dispose();\n        super.dispose();\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}