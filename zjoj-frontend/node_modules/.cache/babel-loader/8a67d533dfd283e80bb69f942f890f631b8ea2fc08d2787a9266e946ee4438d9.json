{"ast":null,"code":"import { defineComponent, ref, onMounted, onUpdated, createVNode, mergeProps, isVNode } from \"vue\";\nimport Tooltip from \"../../tooltip/index.js\";\nimport ResizeObserver from \"../resize-observer-v2.js\";\nimport { getPrefixCls } from \"../../_utils/global-config.js\";\nfunction _isSlot(s) {\n  return typeof s === \"function\" || Object.prototype.toString.call(s) === \"[object Object]\" && !isVNode(s);\n}\nvar AutoTooltip = defineComponent({\n  name: \"AutoTooltip\",\n  inheritAttrs: false,\n  props: {\n    tooltipProps: {\n      type: Object\n    }\n  },\n  setup(props, {\n    attrs,\n    slots\n  }) {\n    const prefix = getPrefixCls(\"auto-tooltip\");\n    const containerRef = ref();\n    const contentRef = ref();\n    const text = ref(\"\");\n    const showTooltip = ref(false);\n    const calTooltip = () => {\n      if (containerRef.value && contentRef.value) {\n        const _show = contentRef.value.offsetWidth > containerRef.value.offsetWidth;\n        if (_show !== showTooltip.value) {\n          showTooltip.value = _show;\n        }\n      }\n    };\n    const getText = () => {\n      var _a;\n      if (((_a = contentRef.value) == null ? void 0 : _a.textContent) && contentRef.value.textContent !== text.value) {\n        text.value = contentRef.value.textContent;\n      }\n    };\n    const onResize = () => {\n      getText();\n      calTooltip();\n    };\n    onMounted(() => {\n      getText();\n      calTooltip();\n    });\n    onUpdated(() => {\n      getText();\n      calTooltip();\n    });\n    const renderContent = () => {\n      return createVNode(\"span\", mergeProps({\n        \"ref\": containerRef,\n        \"class\": prefix\n      }, attrs), [createVNode(ResizeObserver, {\n        \"onResize\": onResize\n      }, {\n        default: () => {\n          var _a;\n          return [createVNode(\"span\", {\n            \"ref\": contentRef,\n            \"class\": `${prefix}-content`\n          }, [(_a = slots.default) == null ? void 0 : _a.call(slots)])];\n        }\n      })]);\n    };\n    return () => {\n      let _slot2;\n      if (showTooltip.value) {\n        let _slot;\n        return createVNode(Tooltip, mergeProps({\n          \"content\": text.value,\n          \"onResize\": onResize\n        }, props.tooltipProps), _isSlot(_slot = renderContent()) ? _slot : {\n          default: () => [_slot]\n        });\n      }\n      return createVNode(ResizeObserver, {\n        \"onResize\": onResize\n      }, _isSlot(_slot2 = renderContent()) ? _slot2 : {\n        default: () => [_slot2]\n      });\n    };\n  }\n});\nexport { AutoTooltip as default };","map":{"version":3,"names":["defineComponent","ref","onMounted","onUpdated","createVNode","mergeProps","isVNode","Tooltip","ResizeObserver","getPrefixCls","_isSlot","s","Object","prototype","toString","call","AutoTooltip","name","inheritAttrs","props","tooltipProps","type","setup","attrs","slots","prefix","containerRef","contentRef","text","showTooltip","calTooltip","value","_show","offsetWidth","getText","_a","textContent","onResize","renderContent","default","_slot2","_slot"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/@arco-design/web-vue/es/_components/auto-tooltip/auto-tooltip.js"],"sourcesContent":["import { defineComponent, ref, onMounted, onUpdated, createVNode, mergeProps, isVNode } from \"vue\";\nimport Tooltip from \"../../tooltip/index.js\";\nimport ResizeObserver from \"../resize-observer-v2.js\";\nimport { getPrefixCls } from \"../../_utils/global-config.js\";\nfunction _isSlot(s) {\n  return typeof s === \"function\" || Object.prototype.toString.call(s) === \"[object Object]\" && !isVNode(s);\n}\nvar AutoTooltip = defineComponent({\n  name: \"AutoTooltip\",\n  inheritAttrs: false,\n  props: {\n    tooltipProps: {\n      type: Object\n    }\n  },\n  setup(props, {\n    attrs,\n    slots\n  }) {\n    const prefix = getPrefixCls(\"auto-tooltip\");\n    const containerRef = ref();\n    const contentRef = ref();\n    const text = ref(\"\");\n    const showTooltip = ref(false);\n    const calTooltip = () => {\n      if (containerRef.value && contentRef.value) {\n        const _show = contentRef.value.offsetWidth > containerRef.value.offsetWidth;\n        if (_show !== showTooltip.value) {\n          showTooltip.value = _show;\n        }\n      }\n    };\n    const getText = () => {\n      var _a;\n      if (((_a = contentRef.value) == null ? void 0 : _a.textContent) && contentRef.value.textContent !== text.value) {\n        text.value = contentRef.value.textContent;\n      }\n    };\n    const onResize = () => {\n      getText();\n      calTooltip();\n    };\n    onMounted(() => {\n      getText();\n      calTooltip();\n    });\n    onUpdated(() => {\n      getText();\n      calTooltip();\n    });\n    const renderContent = () => {\n      return createVNode(\"span\", mergeProps({\n        \"ref\": containerRef,\n        \"class\": prefix\n      }, attrs), [createVNode(ResizeObserver, {\n        \"onResize\": onResize\n      }, {\n        default: () => {\n          var _a;\n          return [createVNode(\"span\", {\n            \"ref\": contentRef,\n            \"class\": `${prefix}-content`\n          }, [(_a = slots.default) == null ? void 0 : _a.call(slots)])];\n        }\n      })]);\n    };\n    return () => {\n      let _slot2;\n      if (showTooltip.value) {\n        let _slot;\n        return createVNode(Tooltip, mergeProps({\n          \"content\": text.value,\n          \"onResize\": onResize\n        }, props.tooltipProps), _isSlot(_slot = renderContent()) ? _slot : {\n          default: () => [_slot]\n        });\n      }\n      return createVNode(ResizeObserver, {\n        \"onResize\": onResize\n      }, _isSlot(_slot2 = renderContent()) ? _slot2 : {\n        default: () => [_slot2]\n      });\n    };\n  }\n});\nexport { AutoTooltip as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}