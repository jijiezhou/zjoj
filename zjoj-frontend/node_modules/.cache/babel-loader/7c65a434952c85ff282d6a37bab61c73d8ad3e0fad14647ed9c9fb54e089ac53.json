{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, observableValue } from '../../../../base/common/observable.js';\nexport class DiffEditorSash extends Disposable {\n  constructor(_options, _domNode, _dimensions, _sashes) {\n    super();\n    this._options = _options;\n    this._domNode = _domNode;\n    this._dimensions = _dimensions;\n    this._sashes = _sashes;\n    this._sashRatio = observableValue(this, undefined);\n    this.sashLeft = derived(this, reader => {\n      var _a;\n      const ratio = (_a = this._sashRatio.read(reader)) !== null && _a !== void 0 ? _a : this._options.splitViewDefaultRatio.read(reader);\n      return this._computeSashLeft(ratio, reader);\n    });\n    this._sash = this._register(new Sash(this._domNode, {\n      getVerticalSashTop: _sash => 0,\n      getVerticalSashLeft: _sash => this.sashLeft.get(),\n      getVerticalSashHeight: _sash => this._dimensions.height.get()\n    }, {\n      orientation: 0 /* Orientation.VERTICAL */\n    }));\n    this._startSashPosition = undefined;\n    this._register(this._sash.onDidStart(() => {\n      this._startSashPosition = this.sashLeft.get();\n    }));\n    this._register(this._sash.onDidChange(e => {\n      const contentWidth = this._dimensions.width.get();\n      const sashPosition = this._computeSashLeft((this._startSashPosition + (e.currentX - e.startX)) / contentWidth, undefined);\n      this._sashRatio.set(sashPosition / contentWidth, undefined);\n    }));\n    this._register(this._sash.onDidEnd(() => this._sash.layout()));\n    this._register(this._sash.onDidReset(() => this._sashRatio.set(undefined, undefined)));\n    this._register(autorun(reader => {\n      const sashes = this._sashes.read(reader);\n      if (sashes) {\n        this._sash.orthogonalEndSash = sashes.bottom;\n      }\n    }));\n    this._register(autorun(reader => {\n      /** @description DiffEditorSash.layoutSash */\n      const enabled = this._options.enableSplitViewResizing.read(reader);\n      this._sash.state = enabled ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n      this.sashLeft.read(reader);\n      this._dimensions.height.read(reader);\n      this._sash.layout();\n    }));\n  }\n  /** @pure */\n  _computeSashLeft(desiredRatio, reader) {\n    const contentWidth = this._dimensions.width.read(reader);\n    const midPoint = Math.floor(this._options.splitViewDefaultRatio.read(reader) * contentWidth);\n    const sashLeft = this._options.enableSplitViewResizing.read(reader) ? Math.floor(desiredRatio * contentWidth) : midPoint;\n    const MINIMUM_EDITOR_WIDTH = 100;\n    if (contentWidth <= MINIMUM_EDITOR_WIDTH * 2) {\n      return midPoint;\n    }\n    if (sashLeft < MINIMUM_EDITOR_WIDTH) {\n      return MINIMUM_EDITOR_WIDTH;\n    }\n    if (sashLeft > contentWidth - MINIMUM_EDITOR_WIDTH) {\n      return contentWidth - MINIMUM_EDITOR_WIDTH;\n    }\n    return sashLeft;\n  }\n}","map":{"version":3,"names":["Sash","Disposable","autorun","derived","observableValue","DiffEditorSash","constructor","_options","_domNode","_dimensions","_sashes","_sashRatio","undefined","sashLeft","reader","_a","ratio","read","splitViewDefaultRatio","_computeSashLeft","_sash","_register","getVerticalSashTop","getVerticalSashLeft","get","getVerticalSashHeight","height","orientation","_startSashPosition","onDidStart","onDidChange","e","contentWidth","width","sashPosition","currentX","startX","set","onDidEnd","layout","onDidReset","sashes","orthogonalEndSash","bottom","enabled","enableSplitViewResizing","state","desiredRatio","midPoint","Math","floor","MINIMUM_EDITOR_WIDTH"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorSash.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, observableValue } from '../../../../base/common/observable.js';\nexport class DiffEditorSash extends Disposable {\n    constructor(_options, _domNode, _dimensions, _sashes) {\n        super();\n        this._options = _options;\n        this._domNode = _domNode;\n        this._dimensions = _dimensions;\n        this._sashes = _sashes;\n        this._sashRatio = observableValue(this, undefined);\n        this.sashLeft = derived(this, reader => {\n            var _a;\n            const ratio = (_a = this._sashRatio.read(reader)) !== null && _a !== void 0 ? _a : this._options.splitViewDefaultRatio.read(reader);\n            return this._computeSashLeft(ratio, reader);\n        });\n        this._sash = this._register(new Sash(this._domNode, {\n            getVerticalSashTop: (_sash) => 0,\n            getVerticalSashLeft: (_sash) => this.sashLeft.get(),\n            getVerticalSashHeight: (_sash) => this._dimensions.height.get(),\n        }, { orientation: 0 /* Orientation.VERTICAL */ }));\n        this._startSashPosition = undefined;\n        this._register(this._sash.onDidStart(() => {\n            this._startSashPosition = this.sashLeft.get();\n        }));\n        this._register(this._sash.onDidChange((e) => {\n            const contentWidth = this._dimensions.width.get();\n            const sashPosition = this._computeSashLeft((this._startSashPosition + (e.currentX - e.startX)) / contentWidth, undefined);\n            this._sashRatio.set(sashPosition / contentWidth, undefined);\n        }));\n        this._register(this._sash.onDidEnd(() => this._sash.layout()));\n        this._register(this._sash.onDidReset(() => this._sashRatio.set(undefined, undefined)));\n        this._register(autorun(reader => {\n            const sashes = this._sashes.read(reader);\n            if (sashes) {\n                this._sash.orthogonalEndSash = sashes.bottom;\n            }\n        }));\n        this._register(autorun(reader => {\n            /** @description DiffEditorSash.layoutSash */\n            const enabled = this._options.enableSplitViewResizing.read(reader);\n            this._sash.state = enabled ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n            this.sashLeft.read(reader);\n            this._dimensions.height.read(reader);\n            this._sash.layout();\n        }));\n    }\n    /** @pure */\n    _computeSashLeft(desiredRatio, reader) {\n        const contentWidth = this._dimensions.width.read(reader);\n        const midPoint = Math.floor(this._options.splitViewDefaultRatio.read(reader) * contentWidth);\n        const sashLeft = this._options.enableSplitViewResizing.read(reader) ? Math.floor(desiredRatio * contentWidth) : midPoint;\n        const MINIMUM_EDITOR_WIDTH = 100;\n        if (contentWidth <= MINIMUM_EDITOR_WIDTH * 2) {\n            return midPoint;\n        }\n        if (sashLeft < MINIMUM_EDITOR_WIDTH) {\n            return MINIMUM_EDITOR_WIDTH;\n        }\n        if (sashLeft > contentWidth - MINIMUM_EDITOR_WIDTH) {\n            return contentWidth - MINIMUM_EDITOR_WIDTH;\n        }\n        return sashLeft;\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}