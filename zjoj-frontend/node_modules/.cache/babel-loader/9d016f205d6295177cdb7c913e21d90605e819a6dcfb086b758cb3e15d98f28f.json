{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './bracketMatching.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nconst overviewRulerBracketMatchForeground = registerColor('editorOverviewRuler.bracketMatchForeground', {\n  dark: '#A0A0A0',\n  light: '#A0A0A0',\n  hcDark: '#A0A0A0',\n  hcLight: '#A0A0A0'\n}, nls.localize('overviewRulerBracketMatchForeground', 'Overview ruler marker color for matching brackets.'));\nclass JumpToBracketAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.jumpToBracket',\n      label: nls.localize('smartSelect.jumpBracket', \"Go to Bracket\"),\n      alias: 'Go to Bracket',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 93 /* KeyCode.Backslash */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(accessor, editor) {\n    var _a;\n    (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.jumpToBracket();\n  }\n}\nclass SelectToBracketAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.selectToBracket',\n      label: nls.localize('smartSelect.selectToBracket', \"Select to Bracket\"),\n      alias: 'Select to Bracket',\n      precondition: undefined,\n      metadata: {\n        description: nls.localize2('smartSelect.selectToBracketDescription', \"Select the text inside and including the brackets or curly braces\"),\n        args: [{\n          name: 'args',\n          schema: {\n            type: 'object',\n            properties: {\n              'selectBrackets': {\n                type: 'boolean',\n                default: true\n              }\n            }\n          }\n        }]\n      }\n    });\n  }\n  run(accessor, editor, args) {\n    var _a;\n    let selectBrackets = true;\n    if (args && args.selectBrackets === false) {\n      selectBrackets = false;\n    }\n    (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectToBracket(selectBrackets);\n  }\n}\nclass RemoveBracketsAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.removeBrackets',\n      label: nls.localize('smartSelect.removeBrackets', \"Remove Brackets\"),\n      alias: 'Remove Brackets',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1 /* KeyCode.Backspace */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(accessor, editor) {\n    var _a;\n    (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.removeBrackets(this.id);\n  }\n}\nclass BracketsData {\n  constructor(position, brackets, options) {\n    this.position = position;\n    this.brackets = brackets;\n    this.options = options;\n  }\n}\nexport class BracketMatchingController extends Disposable {\n  static get(editor) {\n    return editor.getContribution(BracketMatchingController.ID);\n  }\n  constructor(editor) {\n    super();\n    this._editor = editor;\n    this._lastBracketsData = [];\n    this._lastVersionId = 0;\n    this._decorations = this._editor.createDecorationsCollection();\n    this._updateBracketsSoon = this._register(new RunOnceScheduler(() => this._updateBrackets(), 50));\n    this._matchBrackets = this._editor.getOption(71 /* EditorOption.matchBrackets */);\n    this._updateBracketsSoon.schedule();\n    this._register(editor.onDidChangeCursorPosition(e => {\n      if (this._matchBrackets === 'never') {\n        // Early exit if nothing needs to be done!\n        // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n        return;\n      }\n      this._updateBracketsSoon.schedule();\n    }));\n    this._register(editor.onDidChangeModelContent(e => {\n      this._updateBracketsSoon.schedule();\n    }));\n    this._register(editor.onDidChangeModel(e => {\n      this._lastBracketsData = [];\n      this._updateBracketsSoon.schedule();\n    }));\n    this._register(editor.onDidChangeModelLanguageConfiguration(e => {\n      this._lastBracketsData = [];\n      this._updateBracketsSoon.schedule();\n    }));\n    this._register(editor.onDidChangeConfiguration(e => {\n      if (e.hasChanged(71 /* EditorOption.matchBrackets */)) {\n        this._matchBrackets = this._editor.getOption(71 /* EditorOption.matchBrackets */);\n        this._decorations.clear();\n        this._lastBracketsData = [];\n        this._lastVersionId = 0;\n        this._updateBracketsSoon.schedule();\n      }\n    }));\n    this._register(editor.onDidBlurEditorWidget(() => {\n      this._updateBracketsSoon.schedule();\n    }));\n    this._register(editor.onDidFocusEditorWidget(() => {\n      this._updateBracketsSoon.schedule();\n    }));\n  }\n  jumpToBracket() {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    const model = this._editor.getModel();\n    const newSelections = this._editor.getSelections().map(selection => {\n      const position = selection.getStartPosition();\n      // find matching brackets if position is on a bracket\n      const brackets = model.bracketPairs.matchBracket(position);\n      let newCursorPosition = null;\n      if (brackets) {\n        if (brackets[0].containsPosition(position) && !brackets[1].containsPosition(position)) {\n          newCursorPosition = brackets[1].getStartPosition();\n        } else if (brackets[1].containsPosition(position)) {\n          newCursorPosition = brackets[0].getStartPosition();\n        }\n      } else {\n        // find the enclosing brackets if the position isn't on a matching bracket\n        const enclosingBrackets = model.bracketPairs.findEnclosingBrackets(position);\n        if (enclosingBrackets) {\n          newCursorPosition = enclosingBrackets[1].getStartPosition();\n        } else {\n          // no enclosing brackets, try the very first next bracket\n          const nextBracket = model.bracketPairs.findNextBracket(position);\n          if (nextBracket && nextBracket.range) {\n            newCursorPosition = nextBracket.range.getStartPosition();\n          }\n        }\n      }\n      if (newCursorPosition) {\n        return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n      }\n      return new Selection(position.lineNumber, position.column, position.lineNumber, position.column);\n    });\n    this._editor.setSelections(newSelections);\n    this._editor.revealRange(newSelections[0]);\n  }\n  selectToBracket(selectBrackets) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    const model = this._editor.getModel();\n    const newSelections = [];\n    this._editor.getSelections().forEach(selection => {\n      const position = selection.getStartPosition();\n      let brackets = model.bracketPairs.matchBracket(position);\n      if (!brackets) {\n        brackets = model.bracketPairs.findEnclosingBrackets(position);\n        if (!brackets) {\n          const nextBracket = model.bracketPairs.findNextBracket(position);\n          if (nextBracket && nextBracket.range) {\n            brackets = model.bracketPairs.matchBracket(nextBracket.range.getStartPosition());\n          }\n        }\n      }\n      let selectFrom = null;\n      let selectTo = null;\n      if (brackets) {\n        brackets.sort(Range.compareRangesUsingStarts);\n        const [open, close] = brackets;\n        selectFrom = selectBrackets ? open.getStartPosition() : open.getEndPosition();\n        selectTo = selectBrackets ? close.getEndPosition() : close.getStartPosition();\n        if (close.containsPosition(position)) {\n          // select backwards if the cursor was on the closing bracket\n          const tmp = selectFrom;\n          selectFrom = selectTo;\n          selectTo = tmp;\n        }\n      }\n      if (selectFrom && selectTo) {\n        newSelections.push(new Selection(selectFrom.lineNumber, selectFrom.column, selectTo.lineNumber, selectTo.column));\n      }\n    });\n    if (newSelections.length > 0) {\n      this._editor.setSelections(newSelections);\n      this._editor.revealRange(newSelections[0]);\n    }\n  }\n  removeBrackets(editSource) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    const model = this._editor.getModel();\n    this._editor.getSelections().forEach(selection => {\n      const position = selection.getPosition();\n      let brackets = model.bracketPairs.matchBracket(position);\n      if (!brackets) {\n        brackets = model.bracketPairs.findEnclosingBrackets(position);\n      }\n      if (brackets) {\n        this._editor.pushUndoStop();\n        this._editor.executeEdits(editSource, [{\n          range: brackets[0],\n          text: ''\n        }, {\n          range: brackets[1],\n          text: ''\n        }]);\n        this._editor.pushUndoStop();\n      }\n    });\n  }\n  _updateBrackets() {\n    if (this._matchBrackets === 'never') {\n      return;\n    }\n    this._recomputeBrackets();\n    const newDecorations = [];\n    let newDecorationsLen = 0;\n    for (const bracketData of this._lastBracketsData) {\n      const brackets = bracketData.brackets;\n      if (brackets) {\n        newDecorations[newDecorationsLen++] = {\n          range: brackets[0],\n          options: bracketData.options\n        };\n        newDecorations[newDecorationsLen++] = {\n          range: brackets[1],\n          options: bracketData.options\n        };\n      }\n    }\n    this._decorations.set(newDecorations);\n  }\n  _recomputeBrackets() {\n    if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n      // no model or no focus => no brackets!\n      this._lastBracketsData = [];\n      this._lastVersionId = 0;\n      return;\n    }\n    const selections = this._editor.getSelections();\n    if (selections.length > 100) {\n      // no bracket matching for high numbers of selections\n      this._lastBracketsData = [];\n      this._lastVersionId = 0;\n      return;\n    }\n    const model = this._editor.getModel();\n    const versionId = model.getVersionId();\n    let previousData = [];\n    if (this._lastVersionId === versionId) {\n      // use the previous data only if the model is at the same version id\n      previousData = this._lastBracketsData;\n    }\n    const positions = [];\n    let positionsLen = 0;\n    for (let i = 0, len = selections.length; i < len; i++) {\n      const selection = selections[i];\n      if (selection.isEmpty()) {\n        // will bracket match a cursor only if the selection is collapsed\n        positions[positionsLen++] = selection.getStartPosition();\n      }\n    }\n    // sort positions for `previousData` cache hits\n    if (positions.length > 1) {\n      positions.sort(Position.compare);\n    }\n    const newData = [];\n    let newDataLen = 0;\n    let previousIndex = 0;\n    const previousLen = previousData.length;\n    for (let i = 0, len = positions.length; i < len; i++) {\n      const position = positions[i];\n      while (previousIndex < previousLen && previousData[previousIndex].position.isBefore(position)) {\n        previousIndex++;\n      }\n      if (previousIndex < previousLen && previousData[previousIndex].position.equals(position)) {\n        newData[newDataLen++] = previousData[previousIndex];\n      } else {\n        let brackets = model.bracketPairs.matchBracket(position, 20 /* give at most 20ms to compute */);\n        let options = BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;\n        if (!brackets && this._matchBrackets === 'always') {\n          brackets = model.bracketPairs.findEnclosingBrackets(position, 20 /* give at most 20ms to compute */);\n          options = BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER;\n        }\n        newData[newDataLen++] = new BracketsData(position, brackets, options);\n      }\n    }\n    this._lastBracketsData = newData;\n    this._lastVersionId = versionId;\n  }\n}\nBracketMatchingController.ID = 'editor.contrib.bracketMatchingController';\nBracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER = ModelDecorationOptions.register({\n  description: 'bracket-match-overview',\n  stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n  className: 'bracket-match',\n  overviewRuler: {\n    color: themeColorFromId(overviewRulerBracketMatchForeground),\n    position: OverviewRulerLane.Center\n  }\n});\nBracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER = ModelDecorationOptions.register({\n  description: 'bracket-match-no-overview',\n  stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n  className: 'bracket-match'\n});\nregisterEditorContribution(BracketMatchingController.ID, BracketMatchingController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(SelectToBracketAction);\nregisterEditorAction(JumpToBracketAction);\nregisterEditorAction(RemoveBracketsAction);\n// Go to menu\nMenuRegistry.appendMenuItem(MenuId.MenubarGoMenu, {\n  group: '5_infile_nav',\n  command: {\n    id: 'editor.action.jumpToBracket',\n    title: nls.localize({\n      key: 'miGoToBracket',\n      comment: ['&& denotes a mnemonic']\n    }, \"Go to &&Bracket\")\n  },\n  order: 2\n});","map":{"version":3,"names":["RunOnceScheduler","Disposable","EditorAction","registerEditorAction","registerEditorContribution","Position","Range","Selection","EditorContextKeys","OverviewRulerLane","ModelDecorationOptions","nls","MenuId","MenuRegistry","registerColor","themeColorFromId","overviewRulerBracketMatchForeground","dark","light","hcDark","hcLight","localize","JumpToBracketAction","constructor","id","label","alias","precondition","undefined","kbOpts","kbExpr","editorTextFocus","primary","weight","run","accessor","editor","_a","BracketMatchingController","get","jumpToBracket","SelectToBracketAction","metadata","description","localize2","args","name","schema","type","properties","default","selectBrackets","selectToBracket","RemoveBracketsAction","removeBrackets","BracketsData","position","brackets","options","getContribution","ID","_editor","_lastBracketsData","_lastVersionId","_decorations","createDecorationsCollection","_updateBracketsSoon","_register","_updateBrackets","_matchBrackets","getOption","schedule","onDidChangeCursorPosition","e","onDidChangeModelContent","onDidChangeModel","onDidChangeModelLanguageConfiguration","onDidChangeConfiguration","hasChanged","clear","onDidBlurEditorWidget","onDidFocusEditorWidget","hasModel","model","getModel","newSelections","getSelections","map","selection","getStartPosition","bracketPairs","matchBracket","newCursorPosition","containsPosition","enclosingBrackets","findEnclosingBrackets","nextBracket","findNextBracket","range","lineNumber","column","setSelections","revealRange","forEach","selectFrom","selectTo","sort","compareRangesUsingStarts","open","close","getEndPosition","tmp","push","length","editSource","getPosition","pushUndoStop","executeEdits","text","_recomputeBrackets","newDecorations","newDecorationsLen","bracketData","set","hasWidgetFocus","selections","versionId","getVersionId","previousData","positions","positionsLen","i","len","isEmpty","compare","newData","newDataLen","previousIndex","previousLen","isBefore","equals","_DECORATION_OPTIONS_WITH_OVERVIEW_RULER","_DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER","register","stickiness","className","overviewRuler","color","Center","appendMenuItem","MenubarGoMenu","group","command","title","key","comment","order"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/contrib/bracketMatching/browser/bracketMatching.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './bracketMatching.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nconst overviewRulerBracketMatchForeground = registerColor('editorOverviewRuler.bracketMatchForeground', { dark: '#A0A0A0', light: '#A0A0A0', hcDark: '#A0A0A0', hcLight: '#A0A0A0' }, nls.localize('overviewRulerBracketMatchForeground', 'Overview ruler marker color for matching brackets.'));\nclass JumpToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.jumpToBracket',\n            label: nls.localize('smartSelect.jumpBracket', \"Go to Bracket\"),\n            alias: 'Go to Bracket',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 93 /* KeyCode.Backslash */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.jumpToBracket();\n    }\n}\nclass SelectToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectToBracket',\n            label: nls.localize('smartSelect.selectToBracket', \"Select to Bracket\"),\n            alias: 'Select to Bracket',\n            precondition: undefined,\n            metadata: {\n                description: nls.localize2('smartSelect.selectToBracketDescription', \"Select the text inside and including the brackets or curly braces\"),\n                args: [{\n                        name: 'args',\n                        schema: {\n                            type: 'object',\n                            properties: {\n                                'selectBrackets': {\n                                    type: 'boolean',\n                                    default: true\n                                }\n                            },\n                        }\n                    }]\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        let selectBrackets = true;\n        if (args && args.selectBrackets === false) {\n            selectBrackets = false;\n        }\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectToBracket(selectBrackets);\n    }\n}\nclass RemoveBracketsAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.removeBrackets',\n            label: nls.localize('smartSelect.removeBrackets', \"Remove Brackets\"),\n            alias: 'Remove Brackets',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1 /* KeyCode.Backspace */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.removeBrackets(this.id);\n    }\n}\nclass BracketsData {\n    constructor(position, brackets, options) {\n        this.position = position;\n        this.brackets = brackets;\n        this.options = options;\n    }\n}\nexport class BracketMatchingController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(BracketMatchingController.ID);\n    }\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._lastBracketsData = [];\n        this._lastVersionId = 0;\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateBracketsSoon = this._register(new RunOnceScheduler(() => this._updateBrackets(), 50));\n        this._matchBrackets = this._editor.getOption(71 /* EditorOption.matchBrackets */);\n        this._updateBracketsSoon.schedule();\n        this._register(editor.onDidChangeCursorPosition((e) => {\n            if (this._matchBrackets === 'never') {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelLanguageConfiguration((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(71 /* EditorOption.matchBrackets */)) {\n                this._matchBrackets = this._editor.getOption(71 /* EditorOption.matchBrackets */);\n                this._decorations.clear();\n                this._lastBracketsData = [];\n                this._lastVersionId = 0;\n                this._updateBracketsSoon.schedule();\n            }\n        }));\n        this._register(editor.onDidBlurEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidFocusEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n    }\n    jumpToBracket() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = this._editor.getSelections().map(selection => {\n            const position = selection.getStartPosition();\n            // find matching brackets if position is on a bracket\n            const brackets = model.bracketPairs.matchBracket(position);\n            let newCursorPosition = null;\n            if (brackets) {\n                if (brackets[0].containsPosition(position) && !brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[1].getStartPosition();\n                }\n                else if (brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[0].getStartPosition();\n                }\n            }\n            else {\n                // find the enclosing brackets if the position isn't on a matching bracket\n                const enclosingBrackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (enclosingBrackets) {\n                    newCursorPosition = enclosingBrackets[1].getStartPosition();\n                }\n                else {\n                    // no enclosing brackets, try the very first next bracket\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        newCursorPosition = nextBracket.range.getStartPosition();\n                    }\n                }\n            }\n            if (newCursorPosition) {\n                return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n            }\n            return new Selection(position.lineNumber, position.column, position.lineNumber, position.column);\n        });\n        this._editor.setSelections(newSelections);\n        this._editor.revealRange(newSelections[0]);\n    }\n    selectToBracket(selectBrackets) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = [];\n        this._editor.getSelections().forEach(selection => {\n            const position = selection.getStartPosition();\n            let brackets = model.bracketPairs.matchBracket(position);\n            if (!brackets) {\n                brackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (!brackets) {\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        brackets = model.bracketPairs.matchBracket(nextBracket.range.getStartPosition());\n                    }\n                }\n            }\n            let selectFrom = null;\n            let selectTo = null;\n            if (brackets) {\n                brackets.sort(Range.compareRangesUsingStarts);\n                const [open, close] = brackets;\n                selectFrom = selectBrackets ? open.getStartPosition() : open.getEndPosition();\n                selectTo = selectBrackets ? close.getEndPosition() : close.getStartPosition();\n                if (close.containsPosition(position)) {\n                    // select backwards if the cursor was on the closing bracket\n                    const tmp = selectFrom;\n                    selectFrom = selectTo;\n                    selectTo = tmp;\n                }\n            }\n            if (selectFrom && selectTo) {\n                newSelections.push(new Selection(selectFrom.lineNumber, selectFrom.column, selectTo.lineNumber, selectTo.column));\n            }\n        });\n        if (newSelections.length > 0) {\n            this._editor.setSelections(newSelections);\n            this._editor.revealRange(newSelections[0]);\n        }\n    }\n    removeBrackets(editSource) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        this._editor.getSelections().forEach((selection) => {\n            const position = selection.getPosition();\n            let brackets = model.bracketPairs.matchBracket(position);\n            if (!brackets) {\n                brackets = model.bracketPairs.findEnclosingBrackets(position);\n            }\n            if (brackets) {\n                this._editor.pushUndoStop();\n                this._editor.executeEdits(editSource, [\n                    { range: brackets[0], text: '' },\n                    { range: brackets[1], text: '' }\n                ]);\n                this._editor.pushUndoStop();\n            }\n        });\n    }\n    _updateBrackets() {\n        if (this._matchBrackets === 'never') {\n            return;\n        }\n        this._recomputeBrackets();\n        const newDecorations = [];\n        let newDecorationsLen = 0;\n        for (const bracketData of this._lastBracketsData) {\n            const brackets = bracketData.brackets;\n            if (brackets) {\n                newDecorations[newDecorationsLen++] = { range: brackets[0], options: bracketData.options };\n                newDecorations[newDecorationsLen++] = { range: brackets[1], options: bracketData.options };\n            }\n        }\n        this._decorations.set(newDecorations);\n    }\n    _recomputeBrackets() {\n        if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n            // no model or no focus => no brackets!\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const selections = this._editor.getSelections();\n        if (selections.length > 100) {\n            // no bracket matching for high numbers of selections\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const model = this._editor.getModel();\n        const versionId = model.getVersionId();\n        let previousData = [];\n        if (this._lastVersionId === versionId) {\n            // use the previous data only if the model is at the same version id\n            previousData = this._lastBracketsData;\n        }\n        const positions = [];\n        let positionsLen = 0;\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const selection = selections[i];\n            if (selection.isEmpty()) {\n                // will bracket match a cursor only if the selection is collapsed\n                positions[positionsLen++] = selection.getStartPosition();\n            }\n        }\n        // sort positions for `previousData` cache hits\n        if (positions.length > 1) {\n            positions.sort(Position.compare);\n        }\n        const newData = [];\n        let newDataLen = 0;\n        let previousIndex = 0;\n        const previousLen = previousData.length;\n        for (let i = 0, len = positions.length; i < len; i++) {\n            const position = positions[i];\n            while (previousIndex < previousLen && previousData[previousIndex].position.isBefore(position)) {\n                previousIndex++;\n            }\n            if (previousIndex < previousLen && previousData[previousIndex].position.equals(position)) {\n                newData[newDataLen++] = previousData[previousIndex];\n            }\n            else {\n                let brackets = model.bracketPairs.matchBracket(position, 20 /* give at most 20ms to compute */);\n                let options = BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;\n                if (!brackets && this._matchBrackets === 'always') {\n                    brackets = model.bracketPairs.findEnclosingBrackets(position, 20 /* give at most 20ms to compute */);\n                    options = BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER;\n                }\n                newData[newDataLen++] = new BracketsData(position, brackets, options);\n            }\n        }\n        this._lastBracketsData = newData;\n        this._lastVersionId = versionId;\n    }\n}\nBracketMatchingController.ID = 'editor.contrib.bracketMatchingController';\nBracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerBracketMatchForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nBracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-no-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match'\n});\nregisterEditorContribution(BracketMatchingController.ID, BracketMatchingController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(SelectToBracketAction);\nregisterEditorAction(JumpToBracketAction);\nregisterEditorAction(RemoveBracketsAction);\n// Go to menu\nMenuRegistry.appendMenuItem(MenuId.MenubarGoMenu, {\n    group: '5_infile_nav',\n    command: {\n        id: 'editor.action.jumpToBracket',\n        title: nls.localize({ key: 'miGoToBracket', comment: ['&& denotes a mnemonic'] }, \"Go to &&Bracket\")\n    },\n    order: 2\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}