{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport './findOptionsWidget.css';\nimport { CaseSensitiveToggle, RegexToggle, WholeWordsToggle } from '../../../../base/browser/ui/findinput/findInputToggles.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { FIND_IDS } from './findModel.js';\nimport { asCssVariable, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground } from '../../../../platform/theme/common/colorRegistry.js';\nexport class FindOptionsWidget extends Widget {\n  constructor(editor, state, keybindingService) {\n    super();\n    this._hideSoon = this._register(new RunOnceScheduler(() => this._hide(), 2000));\n    this._isVisible = false;\n    this._editor = editor;\n    this._state = state;\n    this._keybindingService = keybindingService;\n    this._domNode = document.createElement('div');\n    this._domNode.className = 'findOptionsWidget';\n    this._domNode.style.display = 'none';\n    this._domNode.style.top = '10px';\n    this._domNode.style.zIndex = '12';\n    this._domNode.setAttribute('role', 'presentation');\n    this._domNode.setAttribute('aria-hidden', 'true');\n    const toggleStyles = {\n      inputActiveOptionBorder: asCssVariable(inputActiveOptionBorder),\n      inputActiveOptionForeground: asCssVariable(inputActiveOptionForeground),\n      inputActiveOptionBackground: asCssVariable(inputActiveOptionBackground)\n    };\n    this.caseSensitive = this._register(new CaseSensitiveToggle({\n      appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\n      isChecked: this._state.matchCase,\n      ...toggleStyles\n    }));\n    this._domNode.appendChild(this.caseSensitive.domNode);\n    this._register(this.caseSensitive.onChange(() => {\n      this._state.change({\n        matchCase: this.caseSensitive.checked\n      }, false);\n    }));\n    this.wholeWords = this._register(new WholeWordsToggle({\n      appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\n      isChecked: this._state.wholeWord,\n      ...toggleStyles\n    }));\n    this._domNode.appendChild(this.wholeWords.domNode);\n    this._register(this.wholeWords.onChange(() => {\n      this._state.change({\n        wholeWord: this.wholeWords.checked\n      }, false);\n    }));\n    this.regex = this._register(new RegexToggle({\n      appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\n      isChecked: this._state.isRegex,\n      ...toggleStyles\n    }));\n    this._domNode.appendChild(this.regex.domNode);\n    this._register(this.regex.onChange(() => {\n      this._state.change({\n        isRegex: this.regex.checked\n      }, false);\n    }));\n    this._editor.addOverlayWidget(this);\n    this._register(this._state.onFindReplaceStateChange(e => {\n      let somethingChanged = false;\n      if (e.isRegex) {\n        this.regex.checked = this._state.isRegex;\n        somethingChanged = true;\n      }\n      if (e.wholeWord) {\n        this.wholeWords.checked = this._state.wholeWord;\n        somethingChanged = true;\n      }\n      if (e.matchCase) {\n        this.caseSensitive.checked = this._state.matchCase;\n        somethingChanged = true;\n      }\n      if (!this._state.isRevealed && somethingChanged) {\n        this._revealTemporarily();\n      }\n    }));\n    this._register(dom.addDisposableListener(this._domNode, dom.EventType.MOUSE_LEAVE, e => this._onMouseLeave()));\n    this._register(dom.addDisposableListener(this._domNode, 'mouseover', e => this._onMouseOver()));\n  }\n  _keybindingLabelFor(actionId) {\n    const kb = this._keybindingService.lookupKeybinding(actionId);\n    if (!kb) {\n      return '';\n    }\n    return ` (${kb.getLabel()})`;\n  }\n  dispose() {\n    this._editor.removeOverlayWidget(this);\n    super.dispose();\n  }\n  // ----- IOverlayWidget API\n  getId() {\n    return FindOptionsWidget.ID;\n  }\n  getDomNode() {\n    return this._domNode;\n  }\n  getPosition() {\n    return {\n      preference: 0 /* OverlayWidgetPositionPreference.TOP_RIGHT_CORNER */\n    };\n  }\n  highlightFindOptions() {\n    this._revealTemporarily();\n  }\n  _revealTemporarily() {\n    this._show();\n    this._hideSoon.schedule();\n  }\n  _onMouseLeave() {\n    this._hideSoon.schedule();\n  }\n  _onMouseOver() {\n    this._hideSoon.cancel();\n  }\n  _show() {\n    if (this._isVisible) {\n      return;\n    }\n    this._isVisible = true;\n    this._domNode.style.display = 'block';\n  }\n  _hide() {\n    if (!this._isVisible) {\n      return;\n    }\n    this._isVisible = false;\n    this._domNode.style.display = 'none';\n  }\n}\nFindOptionsWidget.ID = 'editor.contrib.findOptionsWidget';","map":{"version":3,"names":["dom","CaseSensitiveToggle","RegexToggle","WholeWordsToggle","Widget","RunOnceScheduler","FIND_IDS","asCssVariable","inputActiveOptionBackground","inputActiveOptionBorder","inputActiveOptionForeground","FindOptionsWidget","constructor","editor","state","keybindingService","_hideSoon","_register","_hide","_isVisible","_editor","_state","_keybindingService","_domNode","document","createElement","className","style","display","top","zIndex","setAttribute","toggleStyles","caseSensitive","appendTitle","_keybindingLabelFor","ToggleCaseSensitiveCommand","isChecked","matchCase","appendChild","domNode","onChange","change","checked","wholeWords","ToggleWholeWordCommand","wholeWord","regex","ToggleRegexCommand","isRegex","addOverlayWidget","onFindReplaceStateChange","e","somethingChanged","isRevealed","_revealTemporarily","addDisposableListener","EventType","MOUSE_LEAVE","_onMouseLeave","_onMouseOver","actionId","kb","lookupKeybinding","getLabel","dispose","removeOverlayWidget","getId","ID","getDomNode","getPosition","preference","highlightFindOptions","_show","schedule","cancel"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findOptionsWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport './findOptionsWidget.css';\nimport { CaseSensitiveToggle, RegexToggle, WholeWordsToggle } from '../../../../base/browser/ui/findinput/findInputToggles.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { FIND_IDS } from './findModel.js';\nimport { asCssVariable, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground } from '../../../../platform/theme/common/colorRegistry.js';\nexport class FindOptionsWidget extends Widget {\n    constructor(editor, state, keybindingService) {\n        super();\n        this._hideSoon = this._register(new RunOnceScheduler(() => this._hide(), 2000));\n        this._isVisible = false;\n        this._editor = editor;\n        this._state = state;\n        this._keybindingService = keybindingService;\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'findOptionsWidget';\n        this._domNode.style.display = 'none';\n        this._domNode.style.top = '10px';\n        this._domNode.style.zIndex = '12';\n        this._domNode.setAttribute('role', 'presentation');\n        this._domNode.setAttribute('aria-hidden', 'true');\n        const toggleStyles = {\n            inputActiveOptionBorder: asCssVariable(inputActiveOptionBorder),\n            inputActiveOptionForeground: asCssVariable(inputActiveOptionForeground),\n            inputActiveOptionBackground: asCssVariable(inputActiveOptionBackground),\n        };\n        this.caseSensitive = this._register(new CaseSensitiveToggle({\n            appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\n            isChecked: this._state.matchCase,\n            ...toggleStyles\n        }));\n        this._domNode.appendChild(this.caseSensitive.domNode);\n        this._register(this.caseSensitive.onChange(() => {\n            this._state.change({\n                matchCase: this.caseSensitive.checked\n            }, false);\n        }));\n        this.wholeWords = this._register(new WholeWordsToggle({\n            appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\n            isChecked: this._state.wholeWord,\n            ...toggleStyles\n        }));\n        this._domNode.appendChild(this.wholeWords.domNode);\n        this._register(this.wholeWords.onChange(() => {\n            this._state.change({\n                wholeWord: this.wholeWords.checked\n            }, false);\n        }));\n        this.regex = this._register(new RegexToggle({\n            appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\n            isChecked: this._state.isRegex,\n            ...toggleStyles\n        }));\n        this._domNode.appendChild(this.regex.domNode);\n        this._register(this.regex.onChange(() => {\n            this._state.change({\n                isRegex: this.regex.checked\n            }, false);\n        }));\n        this._editor.addOverlayWidget(this);\n        this._register(this._state.onFindReplaceStateChange((e) => {\n            let somethingChanged = false;\n            if (e.isRegex) {\n                this.regex.checked = this._state.isRegex;\n                somethingChanged = true;\n            }\n            if (e.wholeWord) {\n                this.wholeWords.checked = this._state.wholeWord;\n                somethingChanged = true;\n            }\n            if (e.matchCase) {\n                this.caseSensitive.checked = this._state.matchCase;\n                somethingChanged = true;\n            }\n            if (!this._state.isRevealed && somethingChanged) {\n                this._revealTemporarily();\n            }\n        }));\n        this._register(dom.addDisposableListener(this._domNode, dom.EventType.MOUSE_LEAVE, (e) => this._onMouseLeave()));\n        this._register(dom.addDisposableListener(this._domNode, 'mouseover', (e) => this._onMouseOver()));\n    }\n    _keybindingLabelFor(actionId) {\n        const kb = this._keybindingService.lookupKeybinding(actionId);\n        if (!kb) {\n            return '';\n        }\n        return ` (${kb.getLabel()})`;\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return FindOptionsWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            preference: 0 /* OverlayWidgetPositionPreference.TOP_RIGHT_CORNER */\n        };\n    }\n    highlightFindOptions() {\n        this._revealTemporarily();\n    }\n    _revealTemporarily() {\n        this._show();\n        this._hideSoon.schedule();\n    }\n    _onMouseLeave() {\n        this._hideSoon.schedule();\n    }\n    _onMouseOver() {\n        this._hideSoon.cancel();\n    }\n    _show() {\n        if (this._isVisible) {\n            return;\n        }\n        this._isVisible = true;\n        this._domNode.style.display = 'block';\n    }\n    _hide() {\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this._domNode.style.display = 'none';\n    }\n}\nFindOptionsWidget.ID = 'editor.contrib.findOptionsWidget';\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}