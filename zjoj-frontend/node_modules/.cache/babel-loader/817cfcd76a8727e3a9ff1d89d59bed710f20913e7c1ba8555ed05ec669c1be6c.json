{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './rulers.css';\nimport { createFastDomNode } from '../../../../base/browser/fastDomNode.js';\nimport { ViewPart } from '../../view/viewPart.js';\nexport class Rulers extends ViewPart {\n  constructor(context) {\n    super(context);\n    this.domNode = createFastDomNode(document.createElement('div'));\n    this.domNode.setAttribute('role', 'presentation');\n    this.domNode.setAttribute('aria-hidden', 'true');\n    this.domNode.setClassName('view-rulers');\n    this._renderedRulers = [];\n    const options = this._context.configuration.options;\n    this._rulers = options.get(101 /* EditorOption.rulers */);\n    this._typicalHalfwidthCharacterWidth = options.get(50 /* EditorOption.fontInfo */).typicalHalfwidthCharacterWidth;\n  }\n  dispose() {\n    super.dispose();\n  }\n  // --- begin event handlers\n  onConfigurationChanged(e) {\n    const options = this._context.configuration.options;\n    this._rulers = options.get(101 /* EditorOption.rulers */);\n    this._typicalHalfwidthCharacterWidth = options.get(50 /* EditorOption.fontInfo */).typicalHalfwidthCharacterWidth;\n    return true;\n  }\n  onScrollChanged(e) {\n    return e.scrollHeightChanged;\n  }\n  // --- end event handlers\n  prepareRender(ctx) {\n    // Nothing to read\n  }\n  _ensureRulersCount() {\n    const currentCount = this._renderedRulers.length;\n    const desiredCount = this._rulers.length;\n    if (currentCount === desiredCount) {\n      // Nothing to do\n      return;\n    }\n    if (currentCount < desiredCount) {\n      const {\n        tabSize\n      } = this._context.viewModel.model.getOptions();\n      const rulerWidth = tabSize;\n      let addCount = desiredCount - currentCount;\n      while (addCount > 0) {\n        const node = createFastDomNode(document.createElement('div'));\n        node.setClassName('view-ruler');\n        node.setWidth(rulerWidth);\n        this.domNode.appendChild(node);\n        this._renderedRulers.push(node);\n        addCount--;\n      }\n      return;\n    }\n    let removeCount = currentCount - desiredCount;\n    while (removeCount > 0) {\n      const node = this._renderedRulers.pop();\n      this.domNode.removeChild(node);\n      removeCount--;\n    }\n  }\n  render(ctx) {\n    this._ensureRulersCount();\n    for (let i = 0, len = this._rulers.length; i < len; i++) {\n      const node = this._renderedRulers[i];\n      const ruler = this._rulers[i];\n      node.setBoxShadow(ruler.color ? `1px 0 0 0 ${ruler.color} inset` : ``);\n      node.setHeight(Math.min(ctx.scrollHeight, 1000000));\n      node.setLeft(ruler.column * this._typicalHalfwidthCharacterWidth);\n    }\n  }\n}","map":{"version":3,"names":["createFastDomNode","ViewPart","Rulers","constructor","context","domNode","document","createElement","setAttribute","setClassName","_renderedRulers","options","_context","configuration","_rulers","get","_typicalHalfwidthCharacterWidth","typicalHalfwidthCharacterWidth","dispose","onConfigurationChanged","e","onScrollChanged","scrollHeightChanged","prepareRender","ctx","_ensureRulersCount","currentCount","length","desiredCount","tabSize","viewModel","model","getOptions","rulerWidth","addCount","node","setWidth","appendChild","push","removeCount","pop","removeChild","render","i","len","ruler","setBoxShadow","color","setHeight","Math","min","scrollHeight","setLeft","column"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/rulers/rulers.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './rulers.css';\nimport { createFastDomNode } from '../../../../base/browser/fastDomNode.js';\nimport { ViewPart } from '../../view/viewPart.js';\nexport class Rulers extends ViewPart {\n    constructor(context) {\n        super(context);\n        this.domNode = createFastDomNode(document.createElement('div'));\n        this.domNode.setAttribute('role', 'presentation');\n        this.domNode.setAttribute('aria-hidden', 'true');\n        this.domNode.setClassName('view-rulers');\n        this._renderedRulers = [];\n        const options = this._context.configuration.options;\n        this._rulers = options.get(101 /* EditorOption.rulers */);\n        this._typicalHalfwidthCharacterWidth = options.get(50 /* EditorOption.fontInfo */).typicalHalfwidthCharacterWidth;\n    }\n    dispose() {\n        super.dispose();\n    }\n    // --- begin event handlers\n    onConfigurationChanged(e) {\n        const options = this._context.configuration.options;\n        this._rulers = options.get(101 /* EditorOption.rulers */);\n        this._typicalHalfwidthCharacterWidth = options.get(50 /* EditorOption.fontInfo */).typicalHalfwidthCharacterWidth;\n        return true;\n    }\n    onScrollChanged(e) {\n        return e.scrollHeightChanged;\n    }\n    // --- end event handlers\n    prepareRender(ctx) {\n        // Nothing to read\n    }\n    _ensureRulersCount() {\n        const currentCount = this._renderedRulers.length;\n        const desiredCount = this._rulers.length;\n        if (currentCount === desiredCount) {\n            // Nothing to do\n            return;\n        }\n        if (currentCount < desiredCount) {\n            const { tabSize } = this._context.viewModel.model.getOptions();\n            const rulerWidth = tabSize;\n            let addCount = desiredCount - currentCount;\n            while (addCount > 0) {\n                const node = createFastDomNode(document.createElement('div'));\n                node.setClassName('view-ruler');\n                node.setWidth(rulerWidth);\n                this.domNode.appendChild(node);\n                this._renderedRulers.push(node);\n                addCount--;\n            }\n            return;\n        }\n        let removeCount = currentCount - desiredCount;\n        while (removeCount > 0) {\n            const node = this._renderedRulers.pop();\n            this.domNode.removeChild(node);\n            removeCount--;\n        }\n    }\n    render(ctx) {\n        this._ensureRulersCount();\n        for (let i = 0, len = this._rulers.length; i < len; i++) {\n            const node = this._renderedRulers[i];\n            const ruler = this._rulers[i];\n            node.setBoxShadow(ruler.color ? `1px 0 0 0 ${ruler.color} inset` : ``);\n            node.setHeight(Math.min(ctx.scrollHeight, 1000000));\n            node.setLeft(ruler.column * this._typicalHalfwidthCharacterWidth);\n        }\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}