{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, append, getWindow, scheduleAtNextAnimationFrame } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { Sash } from '../sash/sash.js';\nimport { SmoothScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { pushToEnd, pushToStart, range } from '../../../common/arrays.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { combinedDisposable, Disposable, dispose, toDisposable } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport * as types from '../../../common/types.js';\nimport './splitview.css';\nconst defaultStyles = {\n  separatorBorder: Color.transparent\n};\nclass ViewItem {\n  set size(size) {\n    this._size = size;\n  }\n  get size() {\n    return this._size;\n  }\n  get visible() {\n    return typeof this._cachedVisibleSize === 'undefined';\n  }\n  setVisible(visible, size) {\n    var _a, _b;\n    if (visible === this.visible) {\n      return;\n    }\n    if (visible) {\n      this.size = clamp(this._cachedVisibleSize, this.viewMinimumSize, this.viewMaximumSize);\n      this._cachedVisibleSize = undefined;\n    } else {\n      this._cachedVisibleSize = typeof size === 'number' ? size : this.size;\n      this.size = 0;\n    }\n    this.container.classList.toggle('visible', visible);\n    try {\n      (_b = (_a = this.view).setVisible) === null || _b === void 0 ? void 0 : _b.call(_a, visible);\n    } catch (e) {\n      console.error('Splitview: Failed to set visible view');\n      console.error(e);\n    }\n  }\n  get minimumSize() {\n    return this.visible ? this.view.minimumSize : 0;\n  }\n  get viewMinimumSize() {\n    return this.view.minimumSize;\n  }\n  get maximumSize() {\n    return this.visible ? this.view.maximumSize : 0;\n  }\n  get viewMaximumSize() {\n    return this.view.maximumSize;\n  }\n  get priority() {\n    return this.view.priority;\n  }\n  get proportionalLayout() {\n    var _a;\n    return (_a = this.view.proportionalLayout) !== null && _a !== void 0 ? _a : true;\n  }\n  get snap() {\n    return !!this.view.snap;\n  }\n  set enabled(enabled) {\n    this.container.style.pointerEvents = enabled ? '' : 'none';\n  }\n  constructor(container, view, size, disposable) {\n    this.container = container;\n    this.view = view;\n    this.disposable = disposable;\n    this._cachedVisibleSize = undefined;\n    if (typeof size === 'number') {\n      this._size = size;\n      this._cachedVisibleSize = undefined;\n      container.classList.add('visible');\n    } else {\n      this._size = 0;\n      this._cachedVisibleSize = size.cachedVisibleSize;\n    }\n  }\n  layout(offset, layoutContext) {\n    this.layoutContainer(offset);\n    try {\n      this.view.layout(this.size, offset, layoutContext);\n    } catch (e) {\n      console.error('Splitview: Failed to layout view');\n      console.error(e);\n    }\n  }\n  dispose() {\n    this.disposable.dispose();\n  }\n}\nclass VerticalViewItem extends ViewItem {\n  layoutContainer(offset) {\n    this.container.style.top = `${offset}px`;\n    this.container.style.height = `${this.size}px`;\n  }\n}\nclass HorizontalViewItem extends ViewItem {\n  layoutContainer(offset) {\n    this.container.style.left = `${offset}px`;\n    this.container.style.width = `${this.size}px`;\n  }\n}\nvar State;\n(function (State) {\n  State[State[\"Idle\"] = 0] = \"Idle\";\n  State[State[\"Busy\"] = 1] = \"Busy\";\n})(State || (State = {}));\nexport var Sizing;\n(function (Sizing) {\n  /**\n   * When adding or removing views, distribute the delta space among\n   * all other views.\n   */\n  Sizing.Distribute = {\n    type: 'distribute'\n  };\n  /**\n   * When adding or removing views, split the delta space with another\n   * specific view, indexed by the provided `index`.\n   */\n  function Split(index) {\n    return {\n      type: 'split',\n      index\n    };\n  }\n  Sizing.Split = Split;\n  /**\n   * When adding a view, use DistributeSizing when all pre-existing views are\n   * distributed evenly, otherwise use SplitSizing.\n   */\n  function Auto(index) {\n    return {\n      type: 'auto',\n      index\n    };\n  }\n  Sizing.Auto = Auto;\n  /**\n   * When adding or removing views, assume the view is invisible.\n   */\n  function Invisible(cachedVisibleSize) {\n    return {\n      type: 'invisible',\n      cachedVisibleSize\n    };\n  }\n  Sizing.Invisible = Invisible;\n})(Sizing || (Sizing = {}));\n/**\n * The {@link SplitView} is the UI component which implements a one dimensional\n * flex-like layout algorithm for a collection of {@link IView} instances, which\n * are essentially HTMLElement instances with the following size constraints:\n *\n * - {@link IView.minimumSize}\n * - {@link IView.maximumSize}\n * - {@link IView.priority}\n * - {@link IView.snap}\n *\n * In case the SplitView doesn't have enough size to fit all views, it will overflow\n * its content with a scrollbar.\n *\n * In between each pair of views there will be a {@link Sash} allowing the user\n * to resize the views, making sure the constraints are respected.\n *\n * An optional {@link TLayoutContext layout context type} may be used in order to\n * pass along layout contextual data from the {@link SplitView.layout} method down\n * to each view's {@link IView.layout} calls.\n *\n * Features:\n * - Flex-like layout algorithm\n * - Snap support\n * - Orthogonal sash support, for corner sashes\n * - View hide/show support\n * - View swap/move support\n * - Alt key modifier behavior, macOS style\n */\nexport class SplitView extends Disposable {\n  get orthogonalStartSash() {\n    return this._orthogonalStartSash;\n  }\n  get orthogonalEndSash() {\n    return this._orthogonalEndSash;\n  }\n  get startSnappingEnabled() {\n    return this._startSnappingEnabled;\n  }\n  get endSnappingEnabled() {\n    return this._endSnappingEnabled;\n  }\n  /**\n   * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n   * located at the left- or top-most side of the SplitView.\n   * Corner sashes will be created automatically at the intersections.\n   */\n  set orthogonalStartSash(sash) {\n    for (const sashItem of this.sashItems) {\n      sashItem.sash.orthogonalStartSash = sash;\n    }\n    this._orthogonalStartSash = sash;\n  }\n  /**\n   * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n   * located at the right- or bottom-most side of the SplitView.\n   * Corner sashes will be created automatically at the intersections.\n   */\n  set orthogonalEndSash(sash) {\n    for (const sashItem of this.sashItems) {\n      sashItem.sash.orthogonalEndSash = sash;\n    }\n    this._orthogonalEndSash = sash;\n  }\n  /**\n   * Enable/disable snapping at the beginning of this {@link SplitView}.\n   */\n  set startSnappingEnabled(startSnappingEnabled) {\n    if (this._startSnappingEnabled === startSnappingEnabled) {\n      return;\n    }\n    this._startSnappingEnabled = startSnappingEnabled;\n    this.updateSashEnablement();\n  }\n  /**\n   * Enable/disable snapping at the end of this {@link SplitView}.\n   */\n  set endSnappingEnabled(endSnappingEnabled) {\n    if (this._endSnappingEnabled === endSnappingEnabled) {\n      return;\n    }\n    this._endSnappingEnabled = endSnappingEnabled;\n    this.updateSashEnablement();\n  }\n  /**\n   * Create a new {@link SplitView} instance.\n   */\n  constructor(container, options = {}) {\n    var _a, _b, _c, _d, _e;\n    super();\n    this.size = 0;\n    this._contentSize = 0;\n    this.proportions = undefined;\n    this.viewItems = [];\n    this.sashItems = []; // used in tests\n    this.state = State.Idle;\n    this._onDidSashChange = this._register(new Emitter());\n    this._onDidSashReset = this._register(new Emitter());\n    this._startSnappingEnabled = true;\n    this._endSnappingEnabled = true;\n    /**\n     * Fires whenever the user resizes a {@link Sash sash}.\n     */\n    this.onDidSashChange = this._onDidSashChange.event;\n    /**\n     * Fires whenever the user double clicks a {@link Sash sash}.\n     */\n    this.onDidSashReset = this._onDidSashReset.event;\n    this.orientation = (_a = options.orientation) !== null && _a !== void 0 ? _a : 0 /* Orientation.VERTICAL */;\n    this.inverseAltBehavior = (_b = options.inverseAltBehavior) !== null && _b !== void 0 ? _b : false;\n    this.proportionalLayout = (_c = options.proportionalLayout) !== null && _c !== void 0 ? _c : true;\n    this.getSashOrthogonalSize = options.getSashOrthogonalSize;\n    this.el = document.createElement('div');\n    this.el.classList.add('monaco-split-view2');\n    this.el.classList.add(this.orientation === 0 /* Orientation.VERTICAL */ ? 'vertical' : 'horizontal');\n    container.appendChild(this.el);\n    this.sashContainer = append(this.el, $('.sash-container'));\n    this.viewContainer = $('.split-view-container');\n    this.scrollable = this._register(new Scrollable({\n      forceIntegerValues: true,\n      smoothScrollDuration: 125,\n      scheduleAtNextAnimationFrame: callback => scheduleAtNextAnimationFrame(getWindow(this.el), callback)\n    }));\n    this.scrollableElement = this._register(new SmoothScrollableElement(this.viewContainer, {\n      vertical: this.orientation === 0 /* Orientation.VERTICAL */ ? (_d = options.scrollbarVisibility) !== null && _d !== void 0 ? _d : 1 /* ScrollbarVisibility.Auto */ : 2 /* ScrollbarVisibility.Hidden */,\n      horizontal: this.orientation === 1 /* Orientation.HORIZONTAL */ ? (_e = options.scrollbarVisibility) !== null && _e !== void 0 ? _e : 1 /* ScrollbarVisibility.Auto */ : 2 /* ScrollbarVisibility.Hidden */\n    }, this.scrollable));\n    // https://github.com/microsoft/vscode/issues/157737\n    const onDidScrollViewContainer = this._register(new DomEmitter(this.viewContainer, 'scroll')).event;\n    this._register(onDidScrollViewContainer(_ => {\n      const position = this.scrollableElement.getScrollPosition();\n      const scrollLeft = Math.abs(this.viewContainer.scrollLeft - position.scrollLeft) <= 1 ? undefined : this.viewContainer.scrollLeft;\n      const scrollTop = Math.abs(this.viewContainer.scrollTop - position.scrollTop) <= 1 ? undefined : this.viewContainer.scrollTop;\n      if (scrollLeft !== undefined || scrollTop !== undefined) {\n        this.scrollableElement.setScrollPosition({\n          scrollLeft,\n          scrollTop\n        });\n      }\n    }));\n    this.onDidScroll = this.scrollableElement.onScroll;\n    this._register(this.onDidScroll(e => {\n      if (e.scrollTopChanged) {\n        this.viewContainer.scrollTop = e.scrollTop;\n      }\n      if (e.scrollLeftChanged) {\n        this.viewContainer.scrollLeft = e.scrollLeft;\n      }\n    }));\n    append(this.el, this.scrollableElement.getDomNode());\n    this.style(options.styles || defaultStyles);\n    // We have an existing set of view, add them now\n    if (options.descriptor) {\n      this.size = options.descriptor.size;\n      options.descriptor.views.forEach((viewDescriptor, index) => {\n        const sizing = types.isUndefined(viewDescriptor.visible) || viewDescriptor.visible ? viewDescriptor.size : {\n          type: 'invisible',\n          cachedVisibleSize: viewDescriptor.size\n        };\n        const view = viewDescriptor.view;\n        this.doAddView(view, sizing, index, true);\n      });\n      // Initialize content size and proportions for first layout\n      this._contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n      this.saveProportions();\n    }\n  }\n  style(styles) {\n    if (styles.separatorBorder.isTransparent()) {\n      this.el.classList.remove('separator-border');\n      this.el.style.removeProperty('--separator-border');\n    } else {\n      this.el.classList.add('separator-border');\n      this.el.style.setProperty('--separator-border', styles.separatorBorder.toString());\n    }\n  }\n  /**\n   * Add a {@link IView view} to this {@link SplitView}.\n   *\n   * @param view The view to add.\n   * @param size Either a fixed size, or a dynamic {@link Sizing} strategy.\n   * @param index The index to insert the view on.\n   * @param skipLayout Whether layout should be skipped.\n   */\n  addView(view, size, index = this.viewItems.length, skipLayout) {\n    this.doAddView(view, size, index, skipLayout);\n  }\n  /**\n   * Layout the {@link SplitView}.\n   *\n   * @param size The entire size of the {@link SplitView}.\n   * @param layoutContext An optional layout context to pass along to {@link IView views}.\n   */\n  layout(size, layoutContext) {\n    const previousSize = Math.max(this.size, this._contentSize);\n    this.size = size;\n    this.layoutContext = layoutContext;\n    if (!this.proportions) {\n      const indexes = range(this.viewItems.length);\n      const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n      const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n      this.resize(this.viewItems.length - 1, size - previousSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n    } else {\n      let total = 0;\n      for (let i = 0; i < this.viewItems.length; i++) {\n        const item = this.viewItems[i];\n        const proportion = this.proportions[i];\n        if (typeof proportion === 'number') {\n          total += proportion;\n        } else {\n          size -= item.size;\n        }\n      }\n      for (let i = 0; i < this.viewItems.length; i++) {\n        const item = this.viewItems[i];\n        const proportion = this.proportions[i];\n        if (typeof proportion === 'number' && total > 0) {\n          item.size = clamp(Math.round(proportion * size / total), item.minimumSize, item.maximumSize);\n        }\n      }\n    }\n    this.distributeEmptySpace();\n    this.layoutViews();\n  }\n  saveProportions() {\n    if (this.proportionalLayout && this._contentSize > 0) {\n      this.proportions = this.viewItems.map(v => v.proportionalLayout && v.visible ? v.size / this._contentSize : undefined);\n    }\n  }\n  onSashStart({\n    sash,\n    start,\n    alt\n  }) {\n    for (const item of this.viewItems) {\n      item.enabled = false;\n    }\n    const index = this.sashItems.findIndex(item => item.sash === sash);\n    // This way, we can press Alt while we resize a sash, macOS style!\n    const disposable = combinedDisposable(addDisposableListener(this.el.ownerDocument.body, 'keydown', e => resetSashDragState(this.sashDragState.current, e.altKey)), addDisposableListener(this.el.ownerDocument.body, 'keyup', () => resetSashDragState(this.sashDragState.current, false)));\n    const resetSashDragState = (start, alt) => {\n      const sizes = this.viewItems.map(i => i.size);\n      let minDelta = Number.NEGATIVE_INFINITY;\n      let maxDelta = Number.POSITIVE_INFINITY;\n      if (this.inverseAltBehavior) {\n        alt = !alt;\n      }\n      if (alt) {\n        // When we're using the last sash with Alt, we're resizing\n        // the view to the left/up, instead of right/down as usual\n        // Thus, we must do the inverse of the usual\n        const isLastSash = index === this.sashItems.length - 1;\n        if (isLastSash) {\n          const viewItem = this.viewItems[index];\n          minDelta = (viewItem.minimumSize - viewItem.size) / 2;\n          maxDelta = (viewItem.maximumSize - viewItem.size) / 2;\n        } else {\n          const viewItem = this.viewItems[index + 1];\n          minDelta = (viewItem.size - viewItem.maximumSize) / 2;\n          maxDelta = (viewItem.size - viewItem.minimumSize) / 2;\n        }\n      }\n      let snapBefore;\n      let snapAfter;\n      if (!alt) {\n        const upIndexes = range(index, -1);\n        const downIndexes = range(index + 1, this.viewItems.length);\n        const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n        const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].viewMaximumSize - sizes[i]), 0);\n        const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n        const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].viewMaximumSize), 0);\n        const minDelta = Math.max(minDeltaUp, minDeltaDown);\n        const maxDelta = Math.min(maxDeltaDown, maxDeltaUp);\n        const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n        const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n        if (typeof snapBeforeIndex === 'number') {\n          const viewItem = this.viewItems[snapBeforeIndex];\n          const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n          snapBefore = {\n            index: snapBeforeIndex,\n            limitDelta: viewItem.visible ? minDelta - halfSize : minDelta + halfSize,\n            size: viewItem.size\n          };\n        }\n        if (typeof snapAfterIndex === 'number') {\n          const viewItem = this.viewItems[snapAfterIndex];\n          const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n          snapAfter = {\n            index: snapAfterIndex,\n            limitDelta: viewItem.visible ? maxDelta + halfSize : maxDelta - halfSize,\n            size: viewItem.size\n          };\n        }\n      }\n      this.sashDragState = {\n        start,\n        current: start,\n        index,\n        sizes,\n        minDelta,\n        maxDelta,\n        alt,\n        snapBefore,\n        snapAfter,\n        disposable\n      };\n    };\n    resetSashDragState(start, alt);\n  }\n  onSashChange({\n    current\n  }) {\n    const {\n      index,\n      start,\n      sizes,\n      alt,\n      minDelta,\n      maxDelta,\n      snapBefore,\n      snapAfter\n    } = this.sashDragState;\n    this.sashDragState.current = current;\n    const delta = current - start;\n    const newDelta = this.resize(index, delta, sizes, undefined, undefined, minDelta, maxDelta, snapBefore, snapAfter);\n    if (alt) {\n      const isLastSash = index === this.sashItems.length - 1;\n      const newSizes = this.viewItems.map(i => i.size);\n      const viewItemIndex = isLastSash ? index : index + 1;\n      const viewItem = this.viewItems[viewItemIndex];\n      const newMinDelta = viewItem.size - viewItem.maximumSize;\n      const newMaxDelta = viewItem.size - viewItem.minimumSize;\n      const resizeIndex = isLastSash ? index - 1 : index + 1;\n      this.resize(resizeIndex, -newDelta, newSizes, undefined, undefined, newMinDelta, newMaxDelta);\n    }\n    this.distributeEmptySpace();\n    this.layoutViews();\n  }\n  onSashEnd(index) {\n    this._onDidSashChange.fire(index);\n    this.sashDragState.disposable.dispose();\n    this.saveProportions();\n    for (const item of this.viewItems) {\n      item.enabled = true;\n    }\n  }\n  onViewChange(item, size) {\n    const index = this.viewItems.indexOf(item);\n    if (index < 0 || index >= this.viewItems.length) {\n      return;\n    }\n    size = typeof size === 'number' ? size : item.size;\n    size = clamp(size, item.minimumSize, item.maximumSize);\n    if (this.inverseAltBehavior && index > 0) {\n      // In this case, we want the view to grow or shrink both sides equally\n      // so we just resize the \"left\" side by half and let `resize` do the clamping magic\n      this.resize(index - 1, Math.floor((item.size - size) / 2));\n      this.distributeEmptySpace();\n      this.layoutViews();\n    } else {\n      item.size = size;\n      this.relayout([index], undefined);\n    }\n  }\n  /**\n   * Resize a {@link IView view} within the {@link SplitView}.\n   *\n   * @param index The {@link IView view} index.\n   * @param size The {@link IView view} size.\n   */\n  resizeView(index, size) {\n    if (index < 0 || index >= this.viewItems.length) {\n      return;\n    }\n    if (this.state !== State.Idle) {\n      throw new Error('Cant modify splitview');\n    }\n    this.state = State.Busy;\n    try {\n      const indexes = range(this.viewItems.length).filter(i => i !== index);\n      const lowPriorityIndexes = [...indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */), index];\n      const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n      const item = this.viewItems[index];\n      size = Math.round(size);\n      size = clamp(size, item.minimumSize, Math.min(item.maximumSize, this.size));\n      item.size = size;\n      this.relayout(lowPriorityIndexes, highPriorityIndexes);\n    } finally {\n      this.state = State.Idle;\n    }\n  }\n  /**\n   * Distribute the entire {@link SplitView} size among all {@link IView views}.\n   */\n  distributeViewSizes() {\n    const flexibleViewItems = [];\n    let flexibleSize = 0;\n    for (const item of this.viewItems) {\n      if (item.maximumSize - item.minimumSize > 0) {\n        flexibleViewItems.push(item);\n        flexibleSize += item.size;\n      }\n    }\n    const size = Math.floor(flexibleSize / flexibleViewItems.length);\n    for (const item of flexibleViewItems) {\n      item.size = clamp(size, item.minimumSize, item.maximumSize);\n    }\n    const indexes = range(this.viewItems.length);\n    const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n    const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n    this.relayout(lowPriorityIndexes, highPriorityIndexes);\n  }\n  /**\n   * Returns the size of a {@link IView view}.\n   */\n  getViewSize(index) {\n    if (index < 0 || index >= this.viewItems.length) {\n      return -1;\n    }\n    return this.viewItems[index].size;\n  }\n  doAddView(view, size, index = this.viewItems.length, skipLayout) {\n    if (this.state !== State.Idle) {\n      throw new Error('Cant modify splitview');\n    }\n    this.state = State.Busy;\n    try {\n      // Add view\n      const container = $('.split-view-view');\n      if (index === this.viewItems.length) {\n        this.viewContainer.appendChild(container);\n      } else {\n        this.viewContainer.insertBefore(container, this.viewContainer.children.item(index));\n      }\n      const onChangeDisposable = view.onDidChange(size => this.onViewChange(item, size));\n      const containerDisposable = toDisposable(() => this.viewContainer.removeChild(container));\n      const disposable = combinedDisposable(onChangeDisposable, containerDisposable);\n      let viewSize;\n      if (typeof size === 'number') {\n        viewSize = size;\n      } else {\n        if (size.type === 'auto') {\n          if (this.areViewsDistributed()) {\n            size = {\n              type: 'distribute'\n            };\n          } else {\n            size = {\n              type: 'split',\n              index: size.index\n            };\n          }\n        }\n        if (size.type === 'split') {\n          viewSize = this.getViewSize(size.index) / 2;\n        } else if (size.type === 'invisible') {\n          viewSize = {\n            cachedVisibleSize: size.cachedVisibleSize\n          };\n        } else {\n          viewSize = view.minimumSize;\n        }\n      }\n      const item = this.orientation === 0 /* Orientation.VERTICAL */ ? new VerticalViewItem(container, view, viewSize, disposable) : new HorizontalViewItem(container, view, viewSize, disposable);\n      this.viewItems.splice(index, 0, item);\n      // Add sash\n      if (this.viewItems.length > 1) {\n        const opts = {\n          orthogonalStartSash: this.orthogonalStartSash,\n          orthogonalEndSash: this.orthogonalEndSash\n        };\n        const sash = this.orientation === 0 /* Orientation.VERTICAL */ ? new Sash(this.sashContainer, {\n          getHorizontalSashTop: s => this.getSashPosition(s),\n          getHorizontalSashWidth: this.getSashOrthogonalSize\n        }, {\n          ...opts,\n          orientation: 1 /* Orientation.HORIZONTAL */\n        }) : new Sash(this.sashContainer, {\n          getVerticalSashLeft: s => this.getSashPosition(s),\n          getVerticalSashHeight: this.getSashOrthogonalSize\n        }, {\n          ...opts,\n          orientation: 0 /* Orientation.VERTICAL */\n        });\n        const sashEventMapper = this.orientation === 0 /* Orientation.VERTICAL */ ? e => ({\n          sash,\n          start: e.startY,\n          current: e.currentY,\n          alt: e.altKey\n        }) : e => ({\n          sash,\n          start: e.startX,\n          current: e.currentX,\n          alt: e.altKey\n        });\n        const onStart = Event.map(sash.onDidStart, sashEventMapper);\n        const onStartDisposable = onStart(this.onSashStart, this);\n        const onChange = Event.map(sash.onDidChange, sashEventMapper);\n        const onChangeDisposable = onChange(this.onSashChange, this);\n        const onEnd = Event.map(sash.onDidEnd, () => this.sashItems.findIndex(item => item.sash === sash));\n        const onEndDisposable = onEnd(this.onSashEnd, this);\n        const onDidResetDisposable = sash.onDidReset(() => {\n          const index = this.sashItems.findIndex(item => item.sash === sash);\n          const upIndexes = range(index, -1);\n          const downIndexes = range(index + 1, this.viewItems.length);\n          const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n          const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n          if (typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible) {\n            return;\n          }\n          if (typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible) {\n            return;\n          }\n          this._onDidSashReset.fire(index);\n        });\n        const disposable = combinedDisposable(onStartDisposable, onChangeDisposable, onEndDisposable, onDidResetDisposable, sash);\n        const sashItem = {\n          sash,\n          disposable\n        };\n        this.sashItems.splice(index - 1, 0, sashItem);\n      }\n      container.appendChild(view.element);\n      let highPriorityIndexes;\n      if (typeof size !== 'number' && size.type === 'split') {\n        highPriorityIndexes = [size.index];\n      }\n      if (!skipLayout) {\n        this.relayout([index], highPriorityIndexes);\n      }\n      if (!skipLayout && typeof size !== 'number' && size.type === 'distribute') {\n        this.distributeViewSizes();\n      }\n    } finally {\n      this.state = State.Idle;\n    }\n  }\n  relayout(lowPriorityIndexes, highPriorityIndexes) {\n    const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n    this.resize(this.viewItems.length - 1, this.size - contentSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n    this.distributeEmptySpace();\n    this.layoutViews();\n    this.saveProportions();\n  }\n  resize(index, delta, sizes = this.viewItems.map(i => i.size), lowPriorityIndexes, highPriorityIndexes, overloadMinDelta = Number.NEGATIVE_INFINITY, overloadMaxDelta = Number.POSITIVE_INFINITY, snapBefore, snapAfter) {\n    if (index < 0 || index >= this.viewItems.length) {\n      return 0;\n    }\n    const upIndexes = range(index, -1);\n    const downIndexes = range(index + 1, this.viewItems.length);\n    if (highPriorityIndexes) {\n      for (const index of highPriorityIndexes) {\n        pushToStart(upIndexes, index);\n        pushToStart(downIndexes, index);\n      }\n    }\n    if (lowPriorityIndexes) {\n      for (const index of lowPriorityIndexes) {\n        pushToEnd(upIndexes, index);\n        pushToEnd(downIndexes, index);\n      }\n    }\n    const upItems = upIndexes.map(i => this.viewItems[i]);\n    const upSizes = upIndexes.map(i => sizes[i]);\n    const downItems = downIndexes.map(i => this.viewItems[i]);\n    const downSizes = downIndexes.map(i => sizes[i]);\n    const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n    const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].maximumSize - sizes[i]), 0);\n    const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n    const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].maximumSize), 0);\n    const minDelta = Math.max(minDeltaUp, minDeltaDown, overloadMinDelta);\n    const maxDelta = Math.min(maxDeltaDown, maxDeltaUp, overloadMaxDelta);\n    let snapped = false;\n    if (snapBefore) {\n      const snapView = this.viewItems[snapBefore.index];\n      const visible = delta >= snapBefore.limitDelta;\n      snapped = visible !== snapView.visible;\n      snapView.setVisible(visible, snapBefore.size);\n    }\n    if (!snapped && snapAfter) {\n      const snapView = this.viewItems[snapAfter.index];\n      const visible = delta < snapAfter.limitDelta;\n      snapped = visible !== snapView.visible;\n      snapView.setVisible(visible, snapAfter.size);\n    }\n    if (snapped) {\n      return this.resize(index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta);\n    }\n    delta = clamp(delta, minDelta, maxDelta);\n    for (let i = 0, deltaUp = delta; i < upItems.length; i++) {\n      const item = upItems[i];\n      const size = clamp(upSizes[i] + deltaUp, item.minimumSize, item.maximumSize);\n      const viewDelta = size - upSizes[i];\n      deltaUp -= viewDelta;\n      item.size = size;\n    }\n    for (let i = 0, deltaDown = delta; i < downItems.length; i++) {\n      const item = downItems[i];\n      const size = clamp(downSizes[i] - deltaDown, item.minimumSize, item.maximumSize);\n      const viewDelta = size - downSizes[i];\n      deltaDown += viewDelta;\n      item.size = size;\n    }\n    return delta;\n  }\n  distributeEmptySpace(lowPriorityIndex) {\n    const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n    let emptyDelta = this.size - contentSize;\n    const indexes = range(this.viewItems.length - 1, -1);\n    const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n    const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n    for (const index of highPriorityIndexes) {\n      pushToStart(indexes, index);\n    }\n    for (const index of lowPriorityIndexes) {\n      pushToEnd(indexes, index);\n    }\n    if (typeof lowPriorityIndex === 'number') {\n      pushToEnd(indexes, lowPriorityIndex);\n    }\n    for (let i = 0; emptyDelta !== 0 && i < indexes.length; i++) {\n      const item = this.viewItems[indexes[i]];\n      const size = clamp(item.size + emptyDelta, item.minimumSize, item.maximumSize);\n      const viewDelta = size - item.size;\n      emptyDelta -= viewDelta;\n      item.size = size;\n    }\n  }\n  layoutViews() {\n    // Save new content size\n    this._contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n    // Layout views\n    let offset = 0;\n    for (const viewItem of this.viewItems) {\n      viewItem.layout(offset, this.layoutContext);\n      offset += viewItem.size;\n    }\n    // Layout sashes\n    this.sashItems.forEach(item => item.sash.layout());\n    this.updateSashEnablement();\n    this.updateScrollableElement();\n  }\n  updateScrollableElement() {\n    if (this.orientation === 0 /* Orientation.VERTICAL */) {\n      this.scrollableElement.setScrollDimensions({\n        height: this.size,\n        scrollHeight: this._contentSize\n      });\n    } else {\n      this.scrollableElement.setScrollDimensions({\n        width: this.size,\n        scrollWidth: this._contentSize\n      });\n    }\n  }\n  updateSashEnablement() {\n    let previous = false;\n    const collapsesDown = this.viewItems.map(i => previous = i.size - i.minimumSize > 0 || previous);\n    previous = false;\n    const expandsDown = this.viewItems.map(i => previous = i.maximumSize - i.size > 0 || previous);\n    const reverseViews = [...this.viewItems].reverse();\n    previous = false;\n    const collapsesUp = reverseViews.map(i => previous = i.size - i.minimumSize > 0 || previous).reverse();\n    previous = false;\n    const expandsUp = reverseViews.map(i => previous = i.maximumSize - i.size > 0 || previous).reverse();\n    let position = 0;\n    for (let index = 0; index < this.sashItems.length; index++) {\n      const {\n        sash\n      } = this.sashItems[index];\n      const viewItem = this.viewItems[index];\n      position += viewItem.size;\n      const min = !(collapsesDown[index] && expandsUp[index + 1]);\n      const max = !(expandsDown[index] && collapsesUp[index + 1]);\n      if (min && max) {\n        const upIndexes = range(index, -1);\n        const downIndexes = range(index + 1, this.viewItems.length);\n        const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n        const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n        const snappedBefore = typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible;\n        const snappedAfter = typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible;\n        if (snappedBefore && collapsesUp[index] && (position > 0 || this.startSnappingEnabled)) {\n          sash.state = 1 /* SashState.AtMinimum */;\n        } else if (snappedAfter && collapsesDown[index] && (position < this._contentSize || this.endSnappingEnabled)) {\n          sash.state = 2 /* SashState.AtMaximum */;\n        } else {\n          sash.state = 0 /* SashState.Disabled */;\n        }\n      } else if (min && !max) {\n        sash.state = 1 /* SashState.AtMinimum */;\n      } else if (!min && max) {\n        sash.state = 2 /* SashState.AtMaximum */;\n      } else {\n        sash.state = 3 /* SashState.Enabled */;\n      }\n    }\n  }\n  getSashPosition(sash) {\n    let position = 0;\n    for (let i = 0; i < this.sashItems.length; i++) {\n      position += this.viewItems[i].size;\n      if (this.sashItems[i].sash === sash) {\n        return position;\n      }\n    }\n    return 0;\n  }\n  findFirstSnapIndex(indexes) {\n    // visible views first\n    for (const index of indexes) {\n      const viewItem = this.viewItems[index];\n      if (!viewItem.visible) {\n        continue;\n      }\n      if (viewItem.snap) {\n        return index;\n      }\n    }\n    // then, hidden views\n    for (const index of indexes) {\n      const viewItem = this.viewItems[index];\n      if (viewItem.visible && viewItem.maximumSize - viewItem.minimumSize > 0) {\n        return undefined;\n      }\n      if (!viewItem.visible && viewItem.snap) {\n        return index;\n      }\n    }\n    return undefined;\n  }\n  areViewsDistributed() {\n    let min = undefined,\n      max = undefined;\n    for (const view of this.viewItems) {\n      min = min === undefined ? view.size : Math.min(min, view.size);\n      max = max === undefined ? view.size : Math.max(max, view.size);\n      if (max - min > 2) {\n        return false;\n      }\n    }\n    return true;\n  }\n  dispose() {\n    var _a;\n    (_a = this.sashDragState) === null || _a === void 0 ? void 0 : _a.disposable.dispose();\n    dispose(this.viewItems);\n    this.viewItems = [];\n    this.sashItems.forEach(i => i.disposable.dispose());\n    this.sashItems = [];\n    super.dispose();\n  }\n}","map":{"version":3,"names":["$","addDisposableListener","append","getWindow","scheduleAtNextAnimationFrame","DomEmitter","Sash","SmoothScrollableElement","pushToEnd","pushToStart","range","Color","Emitter","Event","combinedDisposable","Disposable","dispose","toDisposable","clamp","Scrollable","types","defaultStyles","separatorBorder","transparent","ViewItem","size","_size","visible","_cachedVisibleSize","setVisible","_a","_b","viewMinimumSize","viewMaximumSize","undefined","container","classList","toggle","view","call","e","console","error","minimumSize","maximumSize","priority","proportionalLayout","snap","enabled","style","pointerEvents","constructor","disposable","add","cachedVisibleSize","layout","offset","layoutContext","layoutContainer","VerticalViewItem","top","height","HorizontalViewItem","left","width","State","Sizing","Distribute","type","Split","index","Auto","Invisible","SplitView","orthogonalStartSash","_orthogonalStartSash","orthogonalEndSash","_orthogonalEndSash","startSnappingEnabled","_startSnappingEnabled","endSnappingEnabled","_endSnappingEnabled","sash","sashItem","sashItems","updateSashEnablement","options","_c","_d","_e","_contentSize","proportions","viewItems","state","Idle","_onDidSashChange","_register","_onDidSashReset","onDidSashChange","event","onDidSashReset","orientation","inverseAltBehavior","getSashOrthogonalSize","el","document","createElement","appendChild","sashContainer","viewContainer","scrollable","forceIntegerValues","smoothScrollDuration","callback","scrollableElement","vertical","scrollbarVisibility","horizontal","onDidScrollViewContainer","_","position","getScrollPosition","scrollLeft","Math","abs","scrollTop","setScrollPosition","onDidScroll","onScroll","scrollTopChanged","scrollLeftChanged","getDomNode","styles","descriptor","views","forEach","viewDescriptor","sizing","isUndefined","doAddView","reduce","r","i","saveProportions","isTransparent","remove","removeProperty","setProperty","toString","addView","length","skipLayout","previousSize","max","indexes","lowPriorityIndexes","filter","highPriorityIndexes","resize","total","item","proportion","round","distributeEmptySpace","layoutViews","map","v","onSashStart","start","alt","findIndex","ownerDocument","body","resetSashDragState","sashDragState","current","altKey","sizes","minDelta","Number","NEGATIVE_INFINITY","maxDelta","POSITIVE_INFINITY","isLastSash","viewItem","snapBefore","snapAfter","upIndexes","downIndexes","minDeltaUp","maxDeltaUp","maxDeltaDown","minDeltaDown","min","snapBeforeIndex","findFirstSnapIndex","snapAfterIndex","halfSize","floor","limitDelta","onSashChange","delta","newDelta","newSizes","viewItemIndex","newMinDelta","newMaxDelta","resizeIndex","onSashEnd","fire","onViewChange","indexOf","relayout","resizeView","Error","Busy","distributeViewSizes","flexibleViewItems","flexibleSize","push","getViewSize","insertBefore","children","onChangeDisposable","onDidChange","containerDisposable","removeChild","viewSize","areViewsDistributed","splice","opts","getHorizontalSashTop","s","getSashPosition","getHorizontalSashWidth","getVerticalSashLeft","getVerticalSashHeight","sashEventMapper","startY","currentY","startX","currentX","onStart","onDidStart","onStartDisposable","onChange","onEnd","onDidEnd","onEndDisposable","onDidResetDisposable","onDidReset","element","contentSize","overloadMinDelta","overloadMaxDelta","upItems","upSizes","downItems","downSizes","snapped","snapView","deltaUp","viewDelta","deltaDown","lowPriorityIndex","emptyDelta","updateScrollableElement","setScrollDimensions","scrollHeight","scrollWidth","previous","collapsesDown","expandsDown","reverseViews","reverse","collapsesUp","expandsUp","snappedBefore","snappedAfter"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, append, getWindow, scheduleAtNextAnimationFrame } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { Sash } from '../sash/sash.js';\nimport { SmoothScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { pushToEnd, pushToStart, range } from '../../../common/arrays.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { combinedDisposable, Disposable, dispose, toDisposable } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport * as types from '../../../common/types.js';\nimport './splitview.css';\nconst defaultStyles = {\n    separatorBorder: Color.transparent\n};\nclass ViewItem {\n    set size(size) {\n        this._size = size;\n    }\n    get size() {\n        return this._size;\n    }\n    get visible() {\n        return typeof this._cachedVisibleSize === 'undefined';\n    }\n    setVisible(visible, size) {\n        var _a, _b;\n        if (visible === this.visible) {\n            return;\n        }\n        if (visible) {\n            this.size = clamp(this._cachedVisibleSize, this.viewMinimumSize, this.viewMaximumSize);\n            this._cachedVisibleSize = undefined;\n        }\n        else {\n            this._cachedVisibleSize = typeof size === 'number' ? size : this.size;\n            this.size = 0;\n        }\n        this.container.classList.toggle('visible', visible);\n        try {\n            (_b = (_a = this.view).setVisible) === null || _b === void 0 ? void 0 : _b.call(_a, visible);\n        }\n        catch (e) {\n            console.error('Splitview: Failed to set visible view');\n            console.error(e);\n        }\n    }\n    get minimumSize() { return this.visible ? this.view.minimumSize : 0; }\n    get viewMinimumSize() { return this.view.minimumSize; }\n    get maximumSize() { return this.visible ? this.view.maximumSize : 0; }\n    get viewMaximumSize() { return this.view.maximumSize; }\n    get priority() { return this.view.priority; }\n    get proportionalLayout() { var _a; return (_a = this.view.proportionalLayout) !== null && _a !== void 0 ? _a : true; }\n    get snap() { return !!this.view.snap; }\n    set enabled(enabled) {\n        this.container.style.pointerEvents = enabled ? '' : 'none';\n    }\n    constructor(container, view, size, disposable) {\n        this.container = container;\n        this.view = view;\n        this.disposable = disposable;\n        this._cachedVisibleSize = undefined;\n        if (typeof size === 'number') {\n            this._size = size;\n            this._cachedVisibleSize = undefined;\n            container.classList.add('visible');\n        }\n        else {\n            this._size = 0;\n            this._cachedVisibleSize = size.cachedVisibleSize;\n        }\n    }\n    layout(offset, layoutContext) {\n        this.layoutContainer(offset);\n        try {\n            this.view.layout(this.size, offset, layoutContext);\n        }\n        catch (e) {\n            console.error('Splitview: Failed to layout view');\n            console.error(e);\n        }\n    }\n    dispose() {\n        this.disposable.dispose();\n    }\n}\nclass VerticalViewItem extends ViewItem {\n    layoutContainer(offset) {\n        this.container.style.top = `${offset}px`;\n        this.container.style.height = `${this.size}px`;\n    }\n}\nclass HorizontalViewItem extends ViewItem {\n    layoutContainer(offset) {\n        this.container.style.left = `${offset}px`;\n        this.container.style.width = `${this.size}px`;\n    }\n}\nvar State;\n(function (State) {\n    State[State[\"Idle\"] = 0] = \"Idle\";\n    State[State[\"Busy\"] = 1] = \"Busy\";\n})(State || (State = {}));\nexport var Sizing;\n(function (Sizing) {\n    /**\n     * When adding or removing views, distribute the delta space among\n     * all other views.\n     */\n    Sizing.Distribute = { type: 'distribute' };\n    /**\n     * When adding or removing views, split the delta space with another\n     * specific view, indexed by the provided `index`.\n     */\n    function Split(index) { return { type: 'split', index }; }\n    Sizing.Split = Split;\n    /**\n     * When adding a view, use DistributeSizing when all pre-existing views are\n     * distributed evenly, otherwise use SplitSizing.\n     */\n    function Auto(index) { return { type: 'auto', index }; }\n    Sizing.Auto = Auto;\n    /**\n     * When adding or removing views, assume the view is invisible.\n     */\n    function Invisible(cachedVisibleSize) { return { type: 'invisible', cachedVisibleSize }; }\n    Sizing.Invisible = Invisible;\n})(Sizing || (Sizing = {}));\n/**\n * The {@link SplitView} is the UI component which implements a one dimensional\n * flex-like layout algorithm for a collection of {@link IView} instances, which\n * are essentially HTMLElement instances with the following size constraints:\n *\n * - {@link IView.minimumSize}\n * - {@link IView.maximumSize}\n * - {@link IView.priority}\n * - {@link IView.snap}\n *\n * In case the SplitView doesn't have enough size to fit all views, it will overflow\n * its content with a scrollbar.\n *\n * In between each pair of views there will be a {@link Sash} allowing the user\n * to resize the views, making sure the constraints are respected.\n *\n * An optional {@link TLayoutContext layout context type} may be used in order to\n * pass along layout contextual data from the {@link SplitView.layout} method down\n * to each view's {@link IView.layout} calls.\n *\n * Features:\n * - Flex-like layout algorithm\n * - Snap support\n * - Orthogonal sash support, for corner sashes\n * - View hide/show support\n * - View swap/move support\n * - Alt key modifier behavior, macOS style\n */\nexport class SplitView extends Disposable {\n    get orthogonalStartSash() { return this._orthogonalStartSash; }\n    get orthogonalEndSash() { return this._orthogonalEndSash; }\n    get startSnappingEnabled() { return this._startSnappingEnabled; }\n    get endSnappingEnabled() { return this._endSnappingEnabled; }\n    /**\n     * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n     * located at the left- or top-most side of the SplitView.\n     * Corner sashes will be created automatically at the intersections.\n     */\n    set orthogonalStartSash(sash) {\n        for (const sashItem of this.sashItems) {\n            sashItem.sash.orthogonalStartSash = sash;\n        }\n        this._orthogonalStartSash = sash;\n    }\n    /**\n     * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n     * located at the right- or bottom-most side of the SplitView.\n     * Corner sashes will be created automatically at the intersections.\n     */\n    set orthogonalEndSash(sash) {\n        for (const sashItem of this.sashItems) {\n            sashItem.sash.orthogonalEndSash = sash;\n        }\n        this._orthogonalEndSash = sash;\n    }\n    /**\n     * Enable/disable snapping at the beginning of this {@link SplitView}.\n     */\n    set startSnappingEnabled(startSnappingEnabled) {\n        if (this._startSnappingEnabled === startSnappingEnabled) {\n            return;\n        }\n        this._startSnappingEnabled = startSnappingEnabled;\n        this.updateSashEnablement();\n    }\n    /**\n     * Enable/disable snapping at the end of this {@link SplitView}.\n     */\n    set endSnappingEnabled(endSnappingEnabled) {\n        if (this._endSnappingEnabled === endSnappingEnabled) {\n            return;\n        }\n        this._endSnappingEnabled = endSnappingEnabled;\n        this.updateSashEnablement();\n    }\n    /**\n     * Create a new {@link SplitView} instance.\n     */\n    constructor(container, options = {}) {\n        var _a, _b, _c, _d, _e;\n        super();\n        this.size = 0;\n        this._contentSize = 0;\n        this.proportions = undefined;\n        this.viewItems = [];\n        this.sashItems = []; // used in tests\n        this.state = State.Idle;\n        this._onDidSashChange = this._register(new Emitter());\n        this._onDidSashReset = this._register(new Emitter());\n        this._startSnappingEnabled = true;\n        this._endSnappingEnabled = true;\n        /**\n         * Fires whenever the user resizes a {@link Sash sash}.\n         */\n        this.onDidSashChange = this._onDidSashChange.event;\n        /**\n         * Fires whenever the user double clicks a {@link Sash sash}.\n         */\n        this.onDidSashReset = this._onDidSashReset.event;\n        this.orientation = (_a = options.orientation) !== null && _a !== void 0 ? _a : 0 /* Orientation.VERTICAL */;\n        this.inverseAltBehavior = (_b = options.inverseAltBehavior) !== null && _b !== void 0 ? _b : false;\n        this.proportionalLayout = (_c = options.proportionalLayout) !== null && _c !== void 0 ? _c : true;\n        this.getSashOrthogonalSize = options.getSashOrthogonalSize;\n        this.el = document.createElement('div');\n        this.el.classList.add('monaco-split-view2');\n        this.el.classList.add(this.orientation === 0 /* Orientation.VERTICAL */ ? 'vertical' : 'horizontal');\n        container.appendChild(this.el);\n        this.sashContainer = append(this.el, $('.sash-container'));\n        this.viewContainer = $('.split-view-container');\n        this.scrollable = this._register(new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: 125,\n            scheduleAtNextAnimationFrame: callback => scheduleAtNextAnimationFrame(getWindow(this.el), callback),\n        }));\n        this.scrollableElement = this._register(new SmoothScrollableElement(this.viewContainer, {\n            vertical: this.orientation === 0 /* Orientation.VERTICAL */ ? ((_d = options.scrollbarVisibility) !== null && _d !== void 0 ? _d : 1 /* ScrollbarVisibility.Auto */) : 2 /* ScrollbarVisibility.Hidden */,\n            horizontal: this.orientation === 1 /* Orientation.HORIZONTAL */ ? ((_e = options.scrollbarVisibility) !== null && _e !== void 0 ? _e : 1 /* ScrollbarVisibility.Auto */) : 2 /* ScrollbarVisibility.Hidden */\n        }, this.scrollable));\n        // https://github.com/microsoft/vscode/issues/157737\n        const onDidScrollViewContainer = this._register(new DomEmitter(this.viewContainer, 'scroll')).event;\n        this._register(onDidScrollViewContainer(_ => {\n            const position = this.scrollableElement.getScrollPosition();\n            const scrollLeft = Math.abs(this.viewContainer.scrollLeft - position.scrollLeft) <= 1 ? undefined : this.viewContainer.scrollLeft;\n            const scrollTop = Math.abs(this.viewContainer.scrollTop - position.scrollTop) <= 1 ? undefined : this.viewContainer.scrollTop;\n            if (scrollLeft !== undefined || scrollTop !== undefined) {\n                this.scrollableElement.setScrollPosition({ scrollLeft, scrollTop });\n            }\n        }));\n        this.onDidScroll = this.scrollableElement.onScroll;\n        this._register(this.onDidScroll(e => {\n            if (e.scrollTopChanged) {\n                this.viewContainer.scrollTop = e.scrollTop;\n            }\n            if (e.scrollLeftChanged) {\n                this.viewContainer.scrollLeft = e.scrollLeft;\n            }\n        }));\n        append(this.el, this.scrollableElement.getDomNode());\n        this.style(options.styles || defaultStyles);\n        // We have an existing set of view, add them now\n        if (options.descriptor) {\n            this.size = options.descriptor.size;\n            options.descriptor.views.forEach((viewDescriptor, index) => {\n                const sizing = types.isUndefined(viewDescriptor.visible) || viewDescriptor.visible ? viewDescriptor.size : { type: 'invisible', cachedVisibleSize: viewDescriptor.size };\n                const view = viewDescriptor.view;\n                this.doAddView(view, sizing, index, true);\n            });\n            // Initialize content size and proportions for first layout\n            this._contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n            this.saveProportions();\n        }\n    }\n    style(styles) {\n        if (styles.separatorBorder.isTransparent()) {\n            this.el.classList.remove('separator-border');\n            this.el.style.removeProperty('--separator-border');\n        }\n        else {\n            this.el.classList.add('separator-border');\n            this.el.style.setProperty('--separator-border', styles.separatorBorder.toString());\n        }\n    }\n    /**\n     * Add a {@link IView view} to this {@link SplitView}.\n     *\n     * @param view The view to add.\n     * @param size Either a fixed size, or a dynamic {@link Sizing} strategy.\n     * @param index The index to insert the view on.\n     * @param skipLayout Whether layout should be skipped.\n     */\n    addView(view, size, index = this.viewItems.length, skipLayout) {\n        this.doAddView(view, size, index, skipLayout);\n    }\n    /**\n     * Layout the {@link SplitView}.\n     *\n     * @param size The entire size of the {@link SplitView}.\n     * @param layoutContext An optional layout context to pass along to {@link IView views}.\n     */\n    layout(size, layoutContext) {\n        const previousSize = Math.max(this.size, this._contentSize);\n        this.size = size;\n        this.layoutContext = layoutContext;\n        if (!this.proportions) {\n            const indexes = range(this.viewItems.length);\n            const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n            const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n            this.resize(this.viewItems.length - 1, size - previousSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n        }\n        else {\n            let total = 0;\n            for (let i = 0; i < this.viewItems.length; i++) {\n                const item = this.viewItems[i];\n                const proportion = this.proportions[i];\n                if (typeof proportion === 'number') {\n                    total += proportion;\n                }\n                else {\n                    size -= item.size;\n                }\n            }\n            for (let i = 0; i < this.viewItems.length; i++) {\n                const item = this.viewItems[i];\n                const proportion = this.proportions[i];\n                if (typeof proportion === 'number' && total > 0) {\n                    item.size = clamp(Math.round(proportion * size / total), item.minimumSize, item.maximumSize);\n                }\n            }\n        }\n        this.distributeEmptySpace();\n        this.layoutViews();\n    }\n    saveProportions() {\n        if (this.proportionalLayout && this._contentSize > 0) {\n            this.proportions = this.viewItems.map(v => v.proportionalLayout && v.visible ? v.size / this._contentSize : undefined);\n        }\n    }\n    onSashStart({ sash, start, alt }) {\n        for (const item of this.viewItems) {\n            item.enabled = false;\n        }\n        const index = this.sashItems.findIndex(item => item.sash === sash);\n        // This way, we can press Alt while we resize a sash, macOS style!\n        const disposable = combinedDisposable(addDisposableListener(this.el.ownerDocument.body, 'keydown', e => resetSashDragState(this.sashDragState.current, e.altKey)), addDisposableListener(this.el.ownerDocument.body, 'keyup', () => resetSashDragState(this.sashDragState.current, false)));\n        const resetSashDragState = (start, alt) => {\n            const sizes = this.viewItems.map(i => i.size);\n            let minDelta = Number.NEGATIVE_INFINITY;\n            let maxDelta = Number.POSITIVE_INFINITY;\n            if (this.inverseAltBehavior) {\n                alt = !alt;\n            }\n            if (alt) {\n                // When we're using the last sash with Alt, we're resizing\n                // the view to the left/up, instead of right/down as usual\n                // Thus, we must do the inverse of the usual\n                const isLastSash = index === this.sashItems.length - 1;\n                if (isLastSash) {\n                    const viewItem = this.viewItems[index];\n                    minDelta = (viewItem.minimumSize - viewItem.size) / 2;\n                    maxDelta = (viewItem.maximumSize - viewItem.size) / 2;\n                }\n                else {\n                    const viewItem = this.viewItems[index + 1];\n                    minDelta = (viewItem.size - viewItem.maximumSize) / 2;\n                    maxDelta = (viewItem.size - viewItem.minimumSize) / 2;\n                }\n            }\n            let snapBefore;\n            let snapAfter;\n            if (!alt) {\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n                const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].viewMaximumSize - sizes[i]), 0);\n                const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n                const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].viewMaximumSize), 0);\n                const minDelta = Math.max(minDeltaUp, minDeltaDown);\n                const maxDelta = Math.min(maxDeltaDown, maxDeltaUp);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                if (typeof snapBeforeIndex === 'number') {\n                    const viewItem = this.viewItems[snapBeforeIndex];\n                    const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n                    snapBefore = {\n                        index: snapBeforeIndex,\n                        limitDelta: viewItem.visible ? minDelta - halfSize : minDelta + halfSize,\n                        size: viewItem.size\n                    };\n                }\n                if (typeof snapAfterIndex === 'number') {\n                    const viewItem = this.viewItems[snapAfterIndex];\n                    const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n                    snapAfter = {\n                        index: snapAfterIndex,\n                        limitDelta: viewItem.visible ? maxDelta + halfSize : maxDelta - halfSize,\n                        size: viewItem.size\n                    };\n                }\n            }\n            this.sashDragState = { start, current: start, index, sizes, minDelta, maxDelta, alt, snapBefore, snapAfter, disposable };\n        };\n        resetSashDragState(start, alt);\n    }\n    onSashChange({ current }) {\n        const { index, start, sizes, alt, minDelta, maxDelta, snapBefore, snapAfter } = this.sashDragState;\n        this.sashDragState.current = current;\n        const delta = current - start;\n        const newDelta = this.resize(index, delta, sizes, undefined, undefined, minDelta, maxDelta, snapBefore, snapAfter);\n        if (alt) {\n            const isLastSash = index === this.sashItems.length - 1;\n            const newSizes = this.viewItems.map(i => i.size);\n            const viewItemIndex = isLastSash ? index : index + 1;\n            const viewItem = this.viewItems[viewItemIndex];\n            const newMinDelta = viewItem.size - viewItem.maximumSize;\n            const newMaxDelta = viewItem.size - viewItem.minimumSize;\n            const resizeIndex = isLastSash ? index - 1 : index + 1;\n            this.resize(resizeIndex, -newDelta, newSizes, undefined, undefined, newMinDelta, newMaxDelta);\n        }\n        this.distributeEmptySpace();\n        this.layoutViews();\n    }\n    onSashEnd(index) {\n        this._onDidSashChange.fire(index);\n        this.sashDragState.disposable.dispose();\n        this.saveProportions();\n        for (const item of this.viewItems) {\n            item.enabled = true;\n        }\n    }\n    onViewChange(item, size) {\n        const index = this.viewItems.indexOf(item);\n        if (index < 0 || index >= this.viewItems.length) {\n            return;\n        }\n        size = typeof size === 'number' ? size : item.size;\n        size = clamp(size, item.minimumSize, item.maximumSize);\n        if (this.inverseAltBehavior && index > 0) {\n            // In this case, we want the view to grow or shrink both sides equally\n            // so we just resize the \"left\" side by half and let `resize` do the clamping magic\n            this.resize(index - 1, Math.floor((item.size - size) / 2));\n            this.distributeEmptySpace();\n            this.layoutViews();\n        }\n        else {\n            item.size = size;\n            this.relayout([index], undefined);\n        }\n    }\n    /**\n     * Resize a {@link IView view} within the {@link SplitView}.\n     *\n     * @param index The {@link IView view} index.\n     * @param size The {@link IView view} size.\n     */\n    resizeView(index, size) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return;\n        }\n        if (this.state !== State.Idle) {\n            throw new Error('Cant modify splitview');\n        }\n        this.state = State.Busy;\n        try {\n            const indexes = range(this.viewItems.length).filter(i => i !== index);\n            const lowPriorityIndexes = [...indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */), index];\n            const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n            const item = this.viewItems[index];\n            size = Math.round(size);\n            size = clamp(size, item.minimumSize, Math.min(item.maximumSize, this.size));\n            item.size = size;\n            this.relayout(lowPriorityIndexes, highPriorityIndexes);\n        }\n        finally {\n            this.state = State.Idle;\n        }\n    }\n    /**\n     * Distribute the entire {@link SplitView} size among all {@link IView views}.\n     */\n    distributeViewSizes() {\n        const flexibleViewItems = [];\n        let flexibleSize = 0;\n        for (const item of this.viewItems) {\n            if (item.maximumSize - item.minimumSize > 0) {\n                flexibleViewItems.push(item);\n                flexibleSize += item.size;\n            }\n        }\n        const size = Math.floor(flexibleSize / flexibleViewItems.length);\n        for (const item of flexibleViewItems) {\n            item.size = clamp(size, item.minimumSize, item.maximumSize);\n        }\n        const indexes = range(this.viewItems.length);\n        const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\n    }\n    /**\n     * Returns the size of a {@link IView view}.\n     */\n    getViewSize(index) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return -1;\n        }\n        return this.viewItems[index].size;\n    }\n    doAddView(view, size, index = this.viewItems.length, skipLayout) {\n        if (this.state !== State.Idle) {\n            throw new Error('Cant modify splitview');\n        }\n        this.state = State.Busy;\n        try {\n            // Add view\n            const container = $('.split-view-view');\n            if (index === this.viewItems.length) {\n                this.viewContainer.appendChild(container);\n            }\n            else {\n                this.viewContainer.insertBefore(container, this.viewContainer.children.item(index));\n            }\n            const onChangeDisposable = view.onDidChange(size => this.onViewChange(item, size));\n            const containerDisposable = toDisposable(() => this.viewContainer.removeChild(container));\n            const disposable = combinedDisposable(onChangeDisposable, containerDisposable);\n            let viewSize;\n            if (typeof size === 'number') {\n                viewSize = size;\n            }\n            else {\n                if (size.type === 'auto') {\n                    if (this.areViewsDistributed()) {\n                        size = { type: 'distribute' };\n                    }\n                    else {\n                        size = { type: 'split', index: size.index };\n                    }\n                }\n                if (size.type === 'split') {\n                    viewSize = this.getViewSize(size.index) / 2;\n                }\n                else if (size.type === 'invisible') {\n                    viewSize = { cachedVisibleSize: size.cachedVisibleSize };\n                }\n                else {\n                    viewSize = view.minimumSize;\n                }\n            }\n            const item = this.orientation === 0 /* Orientation.VERTICAL */\n                ? new VerticalViewItem(container, view, viewSize, disposable)\n                : new HorizontalViewItem(container, view, viewSize, disposable);\n            this.viewItems.splice(index, 0, item);\n            // Add sash\n            if (this.viewItems.length > 1) {\n                const opts = { orthogonalStartSash: this.orthogonalStartSash, orthogonalEndSash: this.orthogonalEndSash };\n                const sash = this.orientation === 0 /* Orientation.VERTICAL */\n                    ? new Sash(this.sashContainer, { getHorizontalSashTop: s => this.getSashPosition(s), getHorizontalSashWidth: this.getSashOrthogonalSize }, { ...opts, orientation: 1 /* Orientation.HORIZONTAL */ })\n                    : new Sash(this.sashContainer, { getVerticalSashLeft: s => this.getSashPosition(s), getVerticalSashHeight: this.getSashOrthogonalSize }, { ...opts, orientation: 0 /* Orientation.VERTICAL */ });\n                const sashEventMapper = this.orientation === 0 /* Orientation.VERTICAL */\n                    ? (e) => ({ sash, start: e.startY, current: e.currentY, alt: e.altKey })\n                    : (e) => ({ sash, start: e.startX, current: e.currentX, alt: e.altKey });\n                const onStart = Event.map(sash.onDidStart, sashEventMapper);\n                const onStartDisposable = onStart(this.onSashStart, this);\n                const onChange = Event.map(sash.onDidChange, sashEventMapper);\n                const onChangeDisposable = onChange(this.onSashChange, this);\n                const onEnd = Event.map(sash.onDidEnd, () => this.sashItems.findIndex(item => item.sash === sash));\n                const onEndDisposable = onEnd(this.onSashEnd, this);\n                const onDidResetDisposable = sash.onDidReset(() => {\n                    const index = this.sashItems.findIndex(item => item.sash === sash);\n                    const upIndexes = range(index, -1);\n                    const downIndexes = range(index + 1, this.viewItems.length);\n                    const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                    const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                    if (typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible) {\n                        return;\n                    }\n                    if (typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible) {\n                        return;\n                    }\n                    this._onDidSashReset.fire(index);\n                });\n                const disposable = combinedDisposable(onStartDisposable, onChangeDisposable, onEndDisposable, onDidResetDisposable, sash);\n                const sashItem = { sash, disposable };\n                this.sashItems.splice(index - 1, 0, sashItem);\n            }\n            container.appendChild(view.element);\n            let highPriorityIndexes;\n            if (typeof size !== 'number' && size.type === 'split') {\n                highPriorityIndexes = [size.index];\n            }\n            if (!skipLayout) {\n                this.relayout([index], highPriorityIndexes);\n            }\n            if (!skipLayout && typeof size !== 'number' && size.type === 'distribute') {\n                this.distributeViewSizes();\n            }\n        }\n        finally {\n            this.state = State.Idle;\n        }\n    }\n    relayout(lowPriorityIndexes, highPriorityIndexes) {\n        const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        this.resize(this.viewItems.length - 1, this.size - contentSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n        this.distributeEmptySpace();\n        this.layoutViews();\n        this.saveProportions();\n    }\n    resize(index, delta, sizes = this.viewItems.map(i => i.size), lowPriorityIndexes, highPriorityIndexes, overloadMinDelta = Number.NEGATIVE_INFINITY, overloadMaxDelta = Number.POSITIVE_INFINITY, snapBefore, snapAfter) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return 0;\n        }\n        const upIndexes = range(index, -1);\n        const downIndexes = range(index + 1, this.viewItems.length);\n        if (highPriorityIndexes) {\n            for (const index of highPriorityIndexes) {\n                pushToStart(upIndexes, index);\n                pushToStart(downIndexes, index);\n            }\n        }\n        if (lowPriorityIndexes) {\n            for (const index of lowPriorityIndexes) {\n                pushToEnd(upIndexes, index);\n                pushToEnd(downIndexes, index);\n            }\n        }\n        const upItems = upIndexes.map(i => this.viewItems[i]);\n        const upSizes = upIndexes.map(i => sizes[i]);\n        const downItems = downIndexes.map(i => this.viewItems[i]);\n        const downSizes = downIndexes.map(i => sizes[i]);\n        const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n        const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].maximumSize - sizes[i]), 0);\n        const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n        const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].maximumSize), 0);\n        const minDelta = Math.max(minDeltaUp, minDeltaDown, overloadMinDelta);\n        const maxDelta = Math.min(maxDeltaDown, maxDeltaUp, overloadMaxDelta);\n        let snapped = false;\n        if (snapBefore) {\n            const snapView = this.viewItems[snapBefore.index];\n            const visible = delta >= snapBefore.limitDelta;\n            snapped = visible !== snapView.visible;\n            snapView.setVisible(visible, snapBefore.size);\n        }\n        if (!snapped && snapAfter) {\n            const snapView = this.viewItems[snapAfter.index];\n            const visible = delta < snapAfter.limitDelta;\n            snapped = visible !== snapView.visible;\n            snapView.setVisible(visible, snapAfter.size);\n        }\n        if (snapped) {\n            return this.resize(index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta);\n        }\n        delta = clamp(delta, minDelta, maxDelta);\n        for (let i = 0, deltaUp = delta; i < upItems.length; i++) {\n            const item = upItems[i];\n            const size = clamp(upSizes[i] + deltaUp, item.minimumSize, item.maximumSize);\n            const viewDelta = size - upSizes[i];\n            deltaUp -= viewDelta;\n            item.size = size;\n        }\n        for (let i = 0, deltaDown = delta; i < downItems.length; i++) {\n            const item = downItems[i];\n            const size = clamp(downSizes[i] - deltaDown, item.minimumSize, item.maximumSize);\n            const viewDelta = size - downSizes[i];\n            deltaDown += viewDelta;\n            item.size = size;\n        }\n        return delta;\n    }\n    distributeEmptySpace(lowPriorityIndex) {\n        const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        let emptyDelta = this.size - contentSize;\n        const indexes = range(this.viewItems.length - 1, -1);\n        const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        for (const index of highPriorityIndexes) {\n            pushToStart(indexes, index);\n        }\n        for (const index of lowPriorityIndexes) {\n            pushToEnd(indexes, index);\n        }\n        if (typeof lowPriorityIndex === 'number') {\n            pushToEnd(indexes, lowPriorityIndex);\n        }\n        for (let i = 0; emptyDelta !== 0 && i < indexes.length; i++) {\n            const item = this.viewItems[indexes[i]];\n            const size = clamp(item.size + emptyDelta, item.minimumSize, item.maximumSize);\n            const viewDelta = size - item.size;\n            emptyDelta -= viewDelta;\n            item.size = size;\n        }\n    }\n    layoutViews() {\n        // Save new content size\n        this._contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        // Layout views\n        let offset = 0;\n        for (const viewItem of this.viewItems) {\n            viewItem.layout(offset, this.layoutContext);\n            offset += viewItem.size;\n        }\n        // Layout sashes\n        this.sashItems.forEach(item => item.sash.layout());\n        this.updateSashEnablement();\n        this.updateScrollableElement();\n    }\n    updateScrollableElement() {\n        if (this.orientation === 0 /* Orientation.VERTICAL */) {\n            this.scrollableElement.setScrollDimensions({\n                height: this.size,\n                scrollHeight: this._contentSize\n            });\n        }\n        else {\n            this.scrollableElement.setScrollDimensions({\n                width: this.size,\n                scrollWidth: this._contentSize\n            });\n        }\n    }\n    updateSashEnablement() {\n        let previous = false;\n        const collapsesDown = this.viewItems.map(i => previous = (i.size - i.minimumSize > 0) || previous);\n        previous = false;\n        const expandsDown = this.viewItems.map(i => previous = (i.maximumSize - i.size > 0) || previous);\n        const reverseViews = [...this.viewItems].reverse();\n        previous = false;\n        const collapsesUp = reverseViews.map(i => previous = (i.size - i.minimumSize > 0) || previous).reverse();\n        previous = false;\n        const expandsUp = reverseViews.map(i => previous = (i.maximumSize - i.size > 0) || previous).reverse();\n        let position = 0;\n        for (let index = 0; index < this.sashItems.length; index++) {\n            const { sash } = this.sashItems[index];\n            const viewItem = this.viewItems[index];\n            position += viewItem.size;\n            const min = !(collapsesDown[index] && expandsUp[index + 1]);\n            const max = !(expandsDown[index] && collapsesUp[index + 1]);\n            if (min && max) {\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                const snappedBefore = typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible;\n                const snappedAfter = typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible;\n                if (snappedBefore && collapsesUp[index] && (position > 0 || this.startSnappingEnabled)) {\n                    sash.state = 1 /* SashState.AtMinimum */;\n                }\n                else if (snappedAfter && collapsesDown[index] && (position < this._contentSize || this.endSnappingEnabled)) {\n                    sash.state = 2 /* SashState.AtMaximum */;\n                }\n                else {\n                    sash.state = 0 /* SashState.Disabled */;\n                }\n            }\n            else if (min && !max) {\n                sash.state = 1 /* SashState.AtMinimum */;\n            }\n            else if (!min && max) {\n                sash.state = 2 /* SashState.AtMaximum */;\n            }\n            else {\n                sash.state = 3 /* SashState.Enabled */;\n            }\n        }\n    }\n    getSashPosition(sash) {\n        let position = 0;\n        for (let i = 0; i < this.sashItems.length; i++) {\n            position += this.viewItems[i].size;\n            if (this.sashItems[i].sash === sash) {\n                return position;\n            }\n        }\n        return 0;\n    }\n    findFirstSnapIndex(indexes) {\n        // visible views first\n        for (const index of indexes) {\n            const viewItem = this.viewItems[index];\n            if (!viewItem.visible) {\n                continue;\n            }\n            if (viewItem.snap) {\n                return index;\n            }\n        }\n        // then, hidden views\n        for (const index of indexes) {\n            const viewItem = this.viewItems[index];\n            if (viewItem.visible && viewItem.maximumSize - viewItem.minimumSize > 0) {\n                return undefined;\n            }\n            if (!viewItem.visible && viewItem.snap) {\n                return index;\n            }\n        }\n        return undefined;\n    }\n    areViewsDistributed() {\n        let min = undefined, max = undefined;\n        for (const view of this.viewItems) {\n            min = min === undefined ? view.size : Math.min(min, view.size);\n            max = max === undefined ? view.size : Math.max(max, view.size);\n            if (max - min > 2) {\n                return false;\n            }\n        }\n        return true;\n    }\n    dispose() {\n        var _a;\n        (_a = this.sashDragState) === null || _a === void 0 ? void 0 : _a.disposable.dispose();\n        dispose(this.viewItems);\n        this.viewItems = [];\n        this.sashItems.forEach(i => i.disposable.dispose());\n        this.sashItems = [];\n        super.dispose();\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}