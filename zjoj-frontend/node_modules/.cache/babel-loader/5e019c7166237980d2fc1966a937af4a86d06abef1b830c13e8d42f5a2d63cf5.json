{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { getColorPresentations, getColors } from './color.js';\nimport { ColorDetector } from './colorDetector.js';\nimport { ColorPickerModel } from './colorPickerModel.js';\nimport { ColorPickerWidget } from './colorPickerWidget.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { Dimension } from '../../../../base/browser/dom.js';\nexport class ColorHover {\n  constructor(owner, range, model, provider) {\n    this.owner = owner;\n    this.range = range;\n    this.model = model;\n    this.provider = provider;\n    /**\n     * Force the hover to always be rendered at this specific range,\n     * even in the case of multiple hover parts.\n     */\n    this.forceShowAtRange = true;\n  }\n  isValidForHoverAnchor(anchor) {\n    return anchor.type === 1 /* HoverAnchorType.Range */ && this.range.startColumn <= anchor.range.startColumn && this.range.endColumn >= anchor.range.endColumn;\n  }\n}\nlet ColorHoverParticipant = class ColorHoverParticipant {\n  constructor(_editor, _themeService) {\n    this._editor = _editor;\n    this._themeService = _themeService;\n    this.hoverOrdinal = 2;\n  }\n  computeSync(_anchor, _lineDecorations) {\n    return [];\n  }\n  computeAsync(anchor, lineDecorations, token) {\n    return AsyncIterableObject.fromPromise(this._computeAsync(anchor, lineDecorations, token));\n  }\n  async _computeAsync(_anchor, lineDecorations, _token) {\n    if (!this._editor.hasModel()) {\n      return [];\n    }\n    const colorDetector = ColorDetector.get(this._editor);\n    if (!colorDetector) {\n      return [];\n    }\n    for (const d of lineDecorations) {\n      if (!colorDetector.isColorDecoration(d)) {\n        continue;\n      }\n      const colorData = colorDetector.getColorData(d.range.getStartPosition());\n      if (colorData) {\n        const colorHover = await _createColorHover(this, this._editor.getModel(), colorData.colorInfo, colorData.provider);\n        return [colorHover];\n      }\n    }\n    return [];\n  }\n  renderHoverParts(context, hoverParts) {\n    return renderHoverParts(this, this._editor, this._themeService, hoverParts, context);\n  }\n};\nColorHoverParticipant = __decorate([__param(1, IThemeService)], ColorHoverParticipant);\nexport { ColorHoverParticipant };\nexport class StandaloneColorPickerHover {\n  constructor(owner, range, model, provider) {\n    this.owner = owner;\n    this.range = range;\n    this.model = model;\n    this.provider = provider;\n  }\n}\nlet StandaloneColorPickerParticipant = class StandaloneColorPickerParticipant {\n  constructor(_editor, _themeService) {\n    this._editor = _editor;\n    this._themeService = _themeService;\n    this._color = null;\n  }\n  async createColorHover(defaultColorInfo, defaultColorProvider, colorProviderRegistry) {\n    if (!this._editor.hasModel()) {\n      return null;\n    }\n    const colorDetector = ColorDetector.get(this._editor);\n    if (!colorDetector) {\n      return null;\n    }\n    const colors = await getColors(colorProviderRegistry, this._editor.getModel(), CancellationToken.None);\n    let foundColorInfo = null;\n    let foundColorProvider = null;\n    for (const colorData of colors) {\n      const colorInfo = colorData.colorInfo;\n      if (Range.containsRange(colorInfo.range, defaultColorInfo.range)) {\n        foundColorInfo = colorInfo;\n        foundColorProvider = colorData.provider;\n      }\n    }\n    const colorInfo = foundColorInfo !== null && foundColorInfo !== void 0 ? foundColorInfo : defaultColorInfo;\n    const colorProvider = foundColorProvider !== null && foundColorProvider !== void 0 ? foundColorProvider : defaultColorProvider;\n    const foundInEditor = !!foundColorInfo;\n    return {\n      colorHover: await _createColorHover(this, this._editor.getModel(), colorInfo, colorProvider),\n      foundInEditor: foundInEditor\n    };\n  }\n  async updateEditorModel(colorHoverData) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    const colorPickerModel = colorHoverData.model;\n    let range = new Range(colorHoverData.range.startLineNumber, colorHoverData.range.startColumn, colorHoverData.range.endLineNumber, colorHoverData.range.endColumn);\n    if (this._color) {\n      await _updateColorPresentations(this._editor.getModel(), colorPickerModel, this._color, range, colorHoverData);\n      range = _updateEditorModel(this._editor, range, colorPickerModel);\n    }\n  }\n  renderHoverParts(context, hoverParts) {\n    return renderHoverParts(this, this._editor, this._themeService, hoverParts, context);\n  }\n  set color(color) {\n    this._color = color;\n  }\n  get color() {\n    return this._color;\n  }\n};\nStandaloneColorPickerParticipant = __decorate([__param(1, IThemeService)], StandaloneColorPickerParticipant);\nexport { StandaloneColorPickerParticipant };\nasync function _createColorHover(participant, editorModel, colorInfo, provider) {\n  const originalText = editorModel.getValueInRange(colorInfo.range);\n  const {\n    red,\n    green,\n    blue,\n    alpha\n  } = colorInfo.color;\n  const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n  const color = new Color(rgba);\n  const colorPresentations = await getColorPresentations(editorModel, colorInfo, provider, CancellationToken.None);\n  const model = new ColorPickerModel(color, [], 0);\n  model.colorPresentations = colorPresentations || [];\n  model.guessColorPresentation(color, originalText);\n  if (participant instanceof ColorHoverParticipant) {\n    return new ColorHover(participant, Range.lift(colorInfo.range), model, provider);\n  } else {\n    return new StandaloneColorPickerHover(participant, Range.lift(colorInfo.range), model, provider);\n  }\n}\nfunction renderHoverParts(participant, editor, themeService, hoverParts, context) {\n  if (hoverParts.length === 0 || !editor.hasModel()) {\n    return Disposable.None;\n  }\n  if (context.setMinimumDimensions) {\n    const minimumHeight = editor.getOption(66 /* EditorOption.lineHeight */) + 8;\n    context.setMinimumDimensions(new Dimension(302, minimumHeight));\n  }\n  const disposables = new DisposableStore();\n  const colorHover = hoverParts[0];\n  const editorModel = editor.getModel();\n  const model = colorHover.model;\n  const widget = disposables.add(new ColorPickerWidget(context.fragment, model, editor.getOption(141 /* EditorOption.pixelRatio */), themeService, participant instanceof StandaloneColorPickerParticipant));\n  context.setColorPicker(widget);\n  let editorUpdatedByColorPicker = false;\n  let range = new Range(colorHover.range.startLineNumber, colorHover.range.startColumn, colorHover.range.endLineNumber, colorHover.range.endColumn);\n  if (participant instanceof StandaloneColorPickerParticipant) {\n    const color = hoverParts[0].model.color;\n    participant.color = color;\n    _updateColorPresentations(editorModel, model, color, range, colorHover);\n    disposables.add(model.onColorFlushed(color => {\n      participant.color = color;\n    }));\n  } else {\n    disposables.add(model.onColorFlushed(async color => {\n      await _updateColorPresentations(editorModel, model, color, range, colorHover);\n      editorUpdatedByColorPicker = true;\n      range = _updateEditorModel(editor, range, model, context);\n    }));\n  }\n  disposables.add(model.onDidChangeColor(color => {\n    _updateColorPresentations(editorModel, model, color, range, colorHover);\n  }));\n  disposables.add(editor.onDidChangeModelContent(e => {\n    if (editorUpdatedByColorPicker) {\n      editorUpdatedByColorPicker = false;\n    } else {\n      context.hide();\n      editor.focus();\n    }\n  }));\n  return disposables;\n}\nfunction _updateEditorModel(editor, range, model, context) {\n  let textEdits;\n  let newRange;\n  if (model.presentation.textEdit) {\n    textEdits = [model.presentation.textEdit];\n    newRange = new Range(model.presentation.textEdit.range.startLineNumber, model.presentation.textEdit.range.startColumn, model.presentation.textEdit.range.endLineNumber, model.presentation.textEdit.range.endColumn);\n    const trackedRange = editor.getModel()._setTrackedRange(null, newRange, 3 /* TrackedRangeStickiness.GrowsOnlyWhenTypingAfter */);\n    editor.pushUndoStop();\n    editor.executeEdits('colorpicker', textEdits);\n    newRange = editor.getModel()._getTrackedRange(trackedRange) || newRange;\n  } else {\n    textEdits = [{\n      range,\n      text: model.presentation.label,\n      forceMoveMarkers: false\n    }];\n    newRange = range.setEndPosition(range.endLineNumber, range.startColumn + model.presentation.label.length);\n    editor.pushUndoStop();\n    editor.executeEdits('colorpicker', textEdits);\n  }\n  if (model.presentation.additionalTextEdits) {\n    textEdits = [...model.presentation.additionalTextEdits];\n    editor.executeEdits('colorpicker', textEdits);\n    if (context) {\n      context.hide();\n    }\n  }\n  editor.pushUndoStop();\n  return newRange;\n}\nasync function _updateColorPresentations(editorModel, colorPickerModel, color, range, colorHover) {\n  const colorPresentations = await getColorPresentations(editorModel, {\n    range: range,\n    color: {\n      red: color.rgba.r / 255,\n      green: color.rgba.g / 255,\n      blue: color.rgba.b / 255,\n      alpha: color.rgba.a\n    }\n  }, colorHover.provider, CancellationToken.None);\n  colorPickerModel.colorPresentations = colorPresentations || [];\n}","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","AsyncIterableObject","CancellationToken","Color","RGBA","Disposable","DisposableStore","Range","getColorPresentations","getColors","ColorDetector","ColorPickerModel","ColorPickerWidget","IThemeService","Dimension","ColorHover","constructor","owner","range","model","provider","forceShowAtRange","isValidForHoverAnchor","anchor","type","startColumn","endColumn","ColorHoverParticipant","_editor","_themeService","hoverOrdinal","computeSync","_anchor","_lineDecorations","computeAsync","lineDecorations","token","fromPromise","_computeAsync","_token","hasModel","colorDetector","get","isColorDecoration","colorData","getColorData","getStartPosition","colorHover","_createColorHover","getModel","colorInfo","renderHoverParts","context","hoverParts","StandaloneColorPickerHover","StandaloneColorPickerParticipant","_color","createColorHover","defaultColorInfo","defaultColorProvider","colorProviderRegistry","colors","None","foundColorInfo","foundColorProvider","containsRange","colorProvider","foundInEditor","updateEditorModel","colorHoverData","colorPickerModel","startLineNumber","endLineNumber","_updateColorPresentations","_updateEditorModel","color","participant","editorModel","originalText","getValueInRange","red","green","blue","alpha","rgba","Math","round","colorPresentations","guessColorPresentation","lift","editor","themeService","setMinimumDimensions","minimumHeight","getOption","disposables","widget","add","fragment","setColorPicker","editorUpdatedByColorPicker","onColorFlushed","onDidChangeColor","onDidChangeModelContent","e","hide","focus","textEdits","newRange","presentation","textEdit","trackedRange","_setTrackedRange","pushUndoStop","executeEdits","_getTrackedRange","text","label","forceMoveMarkers","setEndPosition","additionalTextEdits","g","b","a"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorHoverParticipant.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { getColorPresentations, getColors } from './color.js';\nimport { ColorDetector } from './colorDetector.js';\nimport { ColorPickerModel } from './colorPickerModel.js';\nimport { ColorPickerWidget } from './colorPickerWidget.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { Dimension } from '../../../../base/browser/dom.js';\nexport class ColorHover {\n    constructor(owner, range, model, provider) {\n        this.owner = owner;\n        this.range = range;\n        this.model = model;\n        this.provider = provider;\n        /**\n         * Force the hover to always be rendered at this specific range,\n         * even in the case of multiple hover parts.\n         */\n        this.forceShowAtRange = true;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nlet ColorHoverParticipant = class ColorHoverParticipant {\n    constructor(_editor, _themeService) {\n        this._editor = _editor;\n        this._themeService = _themeService;\n        this.hoverOrdinal = 2;\n    }\n    computeSync(_anchor, _lineDecorations) {\n        return [];\n    }\n    computeAsync(anchor, lineDecorations, token) {\n        return AsyncIterableObject.fromPromise(this._computeAsync(anchor, lineDecorations, token));\n    }\n    async _computeAsync(_anchor, lineDecorations, _token) {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        const colorDetector = ColorDetector.get(this._editor);\n        if (!colorDetector) {\n            return [];\n        }\n        for (const d of lineDecorations) {\n            if (!colorDetector.isColorDecoration(d)) {\n                continue;\n            }\n            const colorData = colorDetector.getColorData(d.range.getStartPosition());\n            if (colorData) {\n                const colorHover = await _createColorHover(this, this._editor.getModel(), colorData.colorInfo, colorData.provider);\n                return [colorHover];\n            }\n        }\n        return [];\n    }\n    renderHoverParts(context, hoverParts) {\n        return renderHoverParts(this, this._editor, this._themeService, hoverParts, context);\n    }\n};\nColorHoverParticipant = __decorate([\n    __param(1, IThemeService)\n], ColorHoverParticipant);\nexport { ColorHoverParticipant };\nexport class StandaloneColorPickerHover {\n    constructor(owner, range, model, provider) {\n        this.owner = owner;\n        this.range = range;\n        this.model = model;\n        this.provider = provider;\n    }\n}\nlet StandaloneColorPickerParticipant = class StandaloneColorPickerParticipant {\n    constructor(_editor, _themeService) {\n        this._editor = _editor;\n        this._themeService = _themeService;\n        this._color = null;\n    }\n    async createColorHover(defaultColorInfo, defaultColorProvider, colorProviderRegistry) {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const colorDetector = ColorDetector.get(this._editor);\n        if (!colorDetector) {\n            return null;\n        }\n        const colors = await getColors(colorProviderRegistry, this._editor.getModel(), CancellationToken.None);\n        let foundColorInfo = null;\n        let foundColorProvider = null;\n        for (const colorData of colors) {\n            const colorInfo = colorData.colorInfo;\n            if (Range.containsRange(colorInfo.range, defaultColorInfo.range)) {\n                foundColorInfo = colorInfo;\n                foundColorProvider = colorData.provider;\n            }\n        }\n        const colorInfo = foundColorInfo !== null && foundColorInfo !== void 0 ? foundColorInfo : defaultColorInfo;\n        const colorProvider = foundColorProvider !== null && foundColorProvider !== void 0 ? foundColorProvider : defaultColorProvider;\n        const foundInEditor = !!foundColorInfo;\n        return { colorHover: await _createColorHover(this, this._editor.getModel(), colorInfo, colorProvider), foundInEditor: foundInEditor };\n    }\n    async updateEditorModel(colorHoverData) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const colorPickerModel = colorHoverData.model;\n        let range = new Range(colorHoverData.range.startLineNumber, colorHoverData.range.startColumn, colorHoverData.range.endLineNumber, colorHoverData.range.endColumn);\n        if (this._color) {\n            await _updateColorPresentations(this._editor.getModel(), colorPickerModel, this._color, range, colorHoverData);\n            range = _updateEditorModel(this._editor, range, colorPickerModel);\n        }\n    }\n    renderHoverParts(context, hoverParts) {\n        return renderHoverParts(this, this._editor, this._themeService, hoverParts, context);\n    }\n    set color(color) {\n        this._color = color;\n    }\n    get color() {\n        return this._color;\n    }\n};\nStandaloneColorPickerParticipant = __decorate([\n    __param(1, IThemeService)\n], StandaloneColorPickerParticipant);\nexport { StandaloneColorPickerParticipant };\nasync function _createColorHover(participant, editorModel, colorInfo, provider) {\n    const originalText = editorModel.getValueInRange(colorInfo.range);\n    const { red, green, blue, alpha } = colorInfo.color;\n    const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n    const color = new Color(rgba);\n    const colorPresentations = await getColorPresentations(editorModel, colorInfo, provider, CancellationToken.None);\n    const model = new ColorPickerModel(color, [], 0);\n    model.colorPresentations = colorPresentations || [];\n    model.guessColorPresentation(color, originalText);\n    if (participant instanceof ColorHoverParticipant) {\n        return new ColorHover(participant, Range.lift(colorInfo.range), model, provider);\n    }\n    else {\n        return new StandaloneColorPickerHover(participant, Range.lift(colorInfo.range), model, provider);\n    }\n}\nfunction renderHoverParts(participant, editor, themeService, hoverParts, context) {\n    if (hoverParts.length === 0 || !editor.hasModel()) {\n        return Disposable.None;\n    }\n    if (context.setMinimumDimensions) {\n        const minimumHeight = editor.getOption(66 /* EditorOption.lineHeight */) + 8;\n        context.setMinimumDimensions(new Dimension(302, minimumHeight));\n    }\n    const disposables = new DisposableStore();\n    const colorHover = hoverParts[0];\n    const editorModel = editor.getModel();\n    const model = colorHover.model;\n    const widget = disposables.add(new ColorPickerWidget(context.fragment, model, editor.getOption(141 /* EditorOption.pixelRatio */), themeService, participant instanceof StandaloneColorPickerParticipant));\n    context.setColorPicker(widget);\n    let editorUpdatedByColorPicker = false;\n    let range = new Range(colorHover.range.startLineNumber, colorHover.range.startColumn, colorHover.range.endLineNumber, colorHover.range.endColumn);\n    if (participant instanceof StandaloneColorPickerParticipant) {\n        const color = hoverParts[0].model.color;\n        participant.color = color;\n        _updateColorPresentations(editorModel, model, color, range, colorHover);\n        disposables.add(model.onColorFlushed((color) => {\n            participant.color = color;\n        }));\n    }\n    else {\n        disposables.add(model.onColorFlushed(async (color) => {\n            await _updateColorPresentations(editorModel, model, color, range, colorHover);\n            editorUpdatedByColorPicker = true;\n            range = _updateEditorModel(editor, range, model, context);\n        }));\n    }\n    disposables.add(model.onDidChangeColor((color) => {\n        _updateColorPresentations(editorModel, model, color, range, colorHover);\n    }));\n    disposables.add(editor.onDidChangeModelContent((e) => {\n        if (editorUpdatedByColorPicker) {\n            editorUpdatedByColorPicker = false;\n        }\n        else {\n            context.hide();\n            editor.focus();\n        }\n    }));\n    return disposables;\n}\nfunction _updateEditorModel(editor, range, model, context) {\n    let textEdits;\n    let newRange;\n    if (model.presentation.textEdit) {\n        textEdits = [model.presentation.textEdit];\n        newRange = new Range(model.presentation.textEdit.range.startLineNumber, model.presentation.textEdit.range.startColumn, model.presentation.textEdit.range.endLineNumber, model.presentation.textEdit.range.endColumn);\n        const trackedRange = editor.getModel()._setTrackedRange(null, newRange, 3 /* TrackedRangeStickiness.GrowsOnlyWhenTypingAfter */);\n        editor.pushUndoStop();\n        editor.executeEdits('colorpicker', textEdits);\n        newRange = editor.getModel()._getTrackedRange(trackedRange) || newRange;\n    }\n    else {\n        textEdits = [{ range, text: model.presentation.label, forceMoveMarkers: false }];\n        newRange = range.setEndPosition(range.endLineNumber, range.startColumn + model.presentation.label.length);\n        editor.pushUndoStop();\n        editor.executeEdits('colorpicker', textEdits);\n    }\n    if (model.presentation.additionalTextEdits) {\n        textEdits = [...model.presentation.additionalTextEdits];\n        editor.executeEdits('colorpicker', textEdits);\n        if (context) {\n            context.hide();\n        }\n    }\n    editor.pushUndoStop();\n    return newRange;\n}\nasync function _updateColorPresentations(editorModel, colorPickerModel, color, range, colorHover) {\n    const colorPresentations = await getColorPresentations(editorModel, {\n        range: range,\n        color: {\n            red: color.rgba.r / 255,\n            green: color.rgba.g / 255,\n            blue: color.rgba.b / 255,\n            alpha: color.rgba.a\n        }\n    }, colorHover.provider, CancellationToken.None);\n    colorPickerModel.colorPresentations = colorPresentations || [];\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}