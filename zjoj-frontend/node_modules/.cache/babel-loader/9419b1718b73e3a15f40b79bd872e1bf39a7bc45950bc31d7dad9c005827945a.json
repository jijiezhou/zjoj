{"ast":null,"code":"export class ObjectPool {\n  constructor(_create) {\n    this._create = _create;\n    this._unused = new Set();\n    this._used = new Set();\n    this._itemData = new Map();\n  }\n  getUnusedObj(data) {\n    var _a;\n    let obj;\n    if (this._unused.size === 0) {\n      obj = this._create(data);\n      this._itemData.set(obj, data);\n    } else {\n      const values = [...this._unused.values()];\n      obj = (_a = values.find(obj => this._itemData.get(obj).getId() === data.getId())) !== null && _a !== void 0 ? _a : values[0];\n      this._unused.delete(obj);\n      this._itemData.set(obj, data);\n      obj.setData(data);\n    }\n    this._used.add(obj);\n    return {\n      object: obj,\n      dispose: () => {\n        this._used.delete(obj);\n        if (this._unused.size > 5) {\n          obj.dispose();\n        } else {\n          this._unused.add(obj);\n        }\n      }\n    };\n  }\n  dispose() {\n    for (const obj of this._used) {\n      obj.dispose();\n    }\n    for (const obj of this._unused) {\n      obj.dispose();\n    }\n    this._used.clear();\n    this._unused.clear();\n  }\n}","map":{"version":3,"names":["ObjectPool","constructor","_create","_unused","Set","_used","_itemData","Map","getUnusedObj","data","_a","obj","size","set","values","find","get","getId","delete","setData","add","object","dispose","clear"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditorWidget/objectPool.js"],"sourcesContent":["export class ObjectPool {\n    constructor(_create) {\n        this._create = _create;\n        this._unused = new Set();\n        this._used = new Set();\n        this._itemData = new Map();\n    }\n    getUnusedObj(data) {\n        var _a;\n        let obj;\n        if (this._unused.size === 0) {\n            obj = this._create(data);\n            this._itemData.set(obj, data);\n        }\n        else {\n            const values = [...this._unused.values()];\n            obj = (_a = values.find(obj => this._itemData.get(obj).getId() === data.getId())) !== null && _a !== void 0 ? _a : values[0];\n            this._unused.delete(obj);\n            this._itemData.set(obj, data);\n            obj.setData(data);\n        }\n        this._used.add(obj);\n        return {\n            object: obj,\n            dispose: () => {\n                this._used.delete(obj);\n                if (this._unused.size > 5) {\n                    obj.dispose();\n                }\n                else {\n                    this._unused.add(obj);\n                }\n            }\n        };\n    }\n    dispose() {\n        for (const obj of this._used) {\n            obj.dispose();\n        }\n        for (const obj of this._unused) {\n            obj.dispose();\n        }\n        this._used.clear();\n        this._unused.clear();\n    }\n}\n"],"mappings":"AAAA,OAAO,MAAMA,UAAU,CAAC;EACpBC,WAAWA,CAACC,OAAO,EAAE;IACjB,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,OAAO,GAAG,IAAIC,GAAG,CAAC,CAAC;IACxB,IAAI,CAACC,KAAK,GAAG,IAAID,GAAG,CAAC,CAAC;IACtB,IAAI,CAACE,SAAS,GAAG,IAAIC,GAAG,CAAC,CAAC;EAC9B;EACAC,YAAYA,CAACC,IAAI,EAAE;IACf,IAAIC,EAAE;IACN,IAAIC,GAAG;IACP,IAAI,IAAI,CAACR,OAAO,CAACS,IAAI,KAAK,CAAC,EAAE;MACzBD,GAAG,GAAG,IAAI,CAACT,OAAO,CAACO,IAAI,CAAC;MACxB,IAAI,CAACH,SAAS,CAACO,GAAG,CAACF,GAAG,EAAEF,IAAI,CAAC;IACjC,CAAC,MACI;MACD,MAAMK,MAAM,GAAG,CAAC,GAAG,IAAI,CAACX,OAAO,CAACW,MAAM,CAAC,CAAC,CAAC;MACzCH,GAAG,GAAG,CAACD,EAAE,GAAGI,MAAM,CAACC,IAAI,CAACJ,GAAG,IAAI,IAAI,CAACL,SAAS,CAACU,GAAG,CAACL,GAAG,CAAC,CAACM,KAAK,CAAC,CAAC,KAAKR,IAAI,CAACQ,KAAK,CAAC,CAAC,CAAC,MAAM,IAAI,IAAIP,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAGI,MAAM,CAAC,CAAC,CAAC;MAC5H,IAAI,CAACX,OAAO,CAACe,MAAM,CAACP,GAAG,CAAC;MACxB,IAAI,CAACL,SAAS,CAACO,GAAG,CAACF,GAAG,EAAEF,IAAI,CAAC;MAC7BE,GAAG,CAACQ,OAAO,CAACV,IAAI,CAAC;IACrB;IACA,IAAI,CAACJ,KAAK,CAACe,GAAG,CAACT,GAAG,CAAC;IACnB,OAAO;MACHU,MAAM,EAAEV,GAAG;MACXW,OAAO,EAAEA,CAAA,KAAM;QACX,IAAI,CAACjB,KAAK,CAACa,MAAM,CAACP,GAAG,CAAC;QACtB,IAAI,IAAI,CAACR,OAAO,CAACS,IAAI,GAAG,CAAC,EAAE;UACvBD,GAAG,CAACW,OAAO,CAAC,CAAC;QACjB,CAAC,MACI;UACD,IAAI,CAACnB,OAAO,CAACiB,GAAG,CAACT,GAAG,CAAC;QACzB;MACJ;IACJ,CAAC;EACL;EACAW,OAAOA,CAAA,EAAG;IACN,KAAK,MAAMX,GAAG,IAAI,IAAI,CAACN,KAAK,EAAE;MAC1BM,GAAG,CAACW,OAAO,CAAC,CAAC;IACjB;IACA,KAAK,MAAMX,GAAG,IAAI,IAAI,CAACR,OAAO,EAAE;MAC5BQ,GAAG,CAACW,OAAO,CAAC,CAAC;IACjB;IACA,IAAI,CAACjB,KAAK,CAACkB,KAAK,CAAC,CAAC;IAClB,IAAI,CAACpB,OAAO,CAACoB,KAAK,CAAC,CAAC;EACxB;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}