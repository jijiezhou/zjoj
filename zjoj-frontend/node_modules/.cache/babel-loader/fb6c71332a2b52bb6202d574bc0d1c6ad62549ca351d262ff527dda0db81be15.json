{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { addDisposableListener } from '../../../base/browser/dom.js';\nimport { mainWindow } from '../../../base/browser/window.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { CONTEXT_ACCESSIBILITY_MODE_ENABLED } from '../common/accessibility.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { ILayoutService } from '../../layout/browser/layoutService.js';\nlet AccessibilityService = class AccessibilityService extends Disposable {\n  constructor(_contextKeyService, _layoutService, _configurationService) {\n    super();\n    this._contextKeyService = _contextKeyService;\n    this._layoutService = _layoutService;\n    this._configurationService = _configurationService;\n    this._accessibilitySupport = 0 /* AccessibilitySupport.Unknown */;\n    this._onDidChangeScreenReaderOptimized = new Emitter();\n    this._onDidChangeReducedMotion = new Emitter();\n    this._accessibilityModeEnabledContext = CONTEXT_ACCESSIBILITY_MODE_ENABLED.bindTo(this._contextKeyService);\n    const updateContextKey = () => this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());\n    this._register(this._configurationService.onDidChangeConfiguration(e => {\n      if (e.affectsConfiguration('editor.accessibilitySupport')) {\n        updateContextKey();\n        this._onDidChangeScreenReaderOptimized.fire();\n      }\n      if (e.affectsConfiguration('workbench.reduceMotion')) {\n        this._configMotionReduced = this._configurationService.getValue('workbench.reduceMotion');\n        this._onDidChangeReducedMotion.fire();\n      }\n    }));\n    updateContextKey();\n    this._register(this.onDidChangeScreenReaderOptimized(() => updateContextKey()));\n    const reduceMotionMatcher = mainWindow.matchMedia(`(prefers-reduced-motion: reduce)`);\n    this._systemMotionReduced = reduceMotionMatcher.matches;\n    this._configMotionReduced = this._configurationService.getValue('workbench.reduceMotion');\n    this.initReducedMotionListeners(reduceMotionMatcher);\n  }\n  initReducedMotionListeners(reduceMotionMatcher) {\n    this._register(addDisposableListener(reduceMotionMatcher, 'change', () => {\n      this._systemMotionReduced = reduceMotionMatcher.matches;\n      if (this._configMotionReduced === 'auto') {\n        this._onDidChangeReducedMotion.fire();\n      }\n    }));\n    const updateRootClasses = () => {\n      const reduce = this.isMotionReduced();\n      this._layoutService.mainContainer.classList.toggle('reduce-motion', reduce);\n      this._layoutService.mainContainer.classList.toggle('enable-motion', !reduce);\n    };\n    updateRootClasses();\n    this._register(this.onDidChangeReducedMotion(() => updateRootClasses()));\n  }\n  get onDidChangeScreenReaderOptimized() {\n    return this._onDidChangeScreenReaderOptimized.event;\n  }\n  isScreenReaderOptimized() {\n    const config = this._configurationService.getValue('editor.accessibilitySupport');\n    return config === 'on' || config === 'auto' && this._accessibilitySupport === 2 /* AccessibilitySupport.Enabled */;\n  }\n  get onDidChangeReducedMotion() {\n    return this._onDidChangeReducedMotion.event;\n  }\n  isMotionReduced() {\n    const config = this._configMotionReduced;\n    return config === 'on' || config === 'auto' && this._systemMotionReduced;\n  }\n  getAccessibilitySupport() {\n    return this._accessibilitySupport;\n  }\n};\nAccessibilityService = __decorate([__param(0, IContextKeyService), __param(1, ILayoutService), __param(2, IConfigurationService)], AccessibilityService);\nexport { AccessibilityService };","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","addDisposableListener","mainWindow","Emitter","Disposable","CONTEXT_ACCESSIBILITY_MODE_ENABLED","IConfigurationService","IContextKeyService","ILayoutService","AccessibilityService","constructor","_contextKeyService","_layoutService","_configurationService","_accessibilitySupport","_onDidChangeScreenReaderOptimized","_onDidChangeReducedMotion","_accessibilityModeEnabledContext","bindTo","updateContextKey","set","isScreenReaderOptimized","_register","onDidChangeConfiguration","e","affectsConfiguration","fire","_configMotionReduced","getValue","onDidChangeScreenReaderOptimized","reduceMotionMatcher","matchMedia","_systemMotionReduced","matches","initReducedMotionListeners","updateRootClasses","reduce","isMotionReduced","mainContainer","classList","toggle","onDidChangeReducedMotion","event","config","getAccessibilitySupport"],"sources":["/Users/zj/projects/zjoj/zjoj-frontend/node_modules/monaco-editor/esm/vs/platform/accessibility/browser/accessibilityService.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { addDisposableListener } from '../../../base/browser/dom.js';\nimport { mainWindow } from '../../../base/browser/window.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { CONTEXT_ACCESSIBILITY_MODE_ENABLED } from '../common/accessibility.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { ILayoutService } from '../../layout/browser/layoutService.js';\nlet AccessibilityService = class AccessibilityService extends Disposable {\n    constructor(_contextKeyService, _layoutService, _configurationService) {\n        super();\n        this._contextKeyService = _contextKeyService;\n        this._layoutService = _layoutService;\n        this._configurationService = _configurationService;\n        this._accessibilitySupport = 0 /* AccessibilitySupport.Unknown */;\n        this._onDidChangeScreenReaderOptimized = new Emitter();\n        this._onDidChangeReducedMotion = new Emitter();\n        this._accessibilityModeEnabledContext = CONTEXT_ACCESSIBILITY_MODE_ENABLED.bindTo(this._contextKeyService);\n        const updateContextKey = () => this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());\n        this._register(this._configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration('editor.accessibilitySupport')) {\n                updateContextKey();\n                this._onDidChangeScreenReaderOptimized.fire();\n            }\n            if (e.affectsConfiguration('workbench.reduceMotion')) {\n                this._configMotionReduced = this._configurationService.getValue('workbench.reduceMotion');\n                this._onDidChangeReducedMotion.fire();\n            }\n        }));\n        updateContextKey();\n        this._register(this.onDidChangeScreenReaderOptimized(() => updateContextKey()));\n        const reduceMotionMatcher = mainWindow.matchMedia(`(prefers-reduced-motion: reduce)`);\n        this._systemMotionReduced = reduceMotionMatcher.matches;\n        this._configMotionReduced = this._configurationService.getValue('workbench.reduceMotion');\n        this.initReducedMotionListeners(reduceMotionMatcher);\n    }\n    initReducedMotionListeners(reduceMotionMatcher) {\n        this._register(addDisposableListener(reduceMotionMatcher, 'change', () => {\n            this._systemMotionReduced = reduceMotionMatcher.matches;\n            if (this._configMotionReduced === 'auto') {\n                this._onDidChangeReducedMotion.fire();\n            }\n        }));\n        const updateRootClasses = () => {\n            const reduce = this.isMotionReduced();\n            this._layoutService.mainContainer.classList.toggle('reduce-motion', reduce);\n            this._layoutService.mainContainer.classList.toggle('enable-motion', !reduce);\n        };\n        updateRootClasses();\n        this._register(this.onDidChangeReducedMotion(() => updateRootClasses()));\n    }\n    get onDidChangeScreenReaderOptimized() {\n        return this._onDidChangeScreenReaderOptimized.event;\n    }\n    isScreenReaderOptimized() {\n        const config = this._configurationService.getValue('editor.accessibilitySupport');\n        return config === 'on' || (config === 'auto' && this._accessibilitySupport === 2 /* AccessibilitySupport.Enabled */);\n    }\n    get onDidChangeReducedMotion() {\n        return this._onDidChangeReducedMotion.event;\n    }\n    isMotionReduced() {\n        const config = this._configMotionReduced;\n        return config === 'on' || (config === 'auto' && this._systemMotionReduced);\n    }\n    getAccessibilitySupport() {\n        return this._accessibilitySupport;\n    }\n};\nAccessibilityService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, ILayoutService),\n    __param(2, IConfigurationService)\n], AccessibilityService);\nexport { AccessibilityService };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}